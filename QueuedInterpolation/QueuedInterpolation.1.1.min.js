var __decorate=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);r.prototype=t.prototype,e.prototype=new r},BABYLONX;!(function(BABYLONX){var ShaderMaterialHelperStatics=(function(){function e(){}return e})();ShaderMaterialHelperStatics.Dark=!1,ShaderMaterialHelperStatics.Light=!0,ShaderMaterialHelperStatics.PrecisionHighMode="highp",ShaderMaterialHelperStatics.PrecisionMediumMode="mediump",ShaderMaterialHelperStatics.face_back="!gl_FrontFacing",ShaderMaterialHelperStatics.face_front="gl_FrontFacing",ShaderMaterialHelperStatics.AttrPosition="position",ShaderMaterialHelperStatics.AttrNormal="normal",ShaderMaterialHelperStatics.AttrUv="uv",ShaderMaterialHelperStatics.AttrUv2="uv2",ShaderMaterialHelperStatics.AttrTypeForPosition="vec3",ShaderMaterialHelperStatics.AttrTypeForNormal="vec3",ShaderMaterialHelperStatics.AttrTypeForUv="vec2",ShaderMaterialHelperStatics.AttrTypeForUv2="vec2",ShaderMaterialHelperStatics.uniformView="view",ShaderMaterialHelperStatics.uniformWorld="world",ShaderMaterialHelperStatics.uniformWorldView="worldView",ShaderMaterialHelperStatics.uniformViewProjection="viewProjection",ShaderMaterialHelperStatics.uniformWorldViewProjection="worldViewProjection",ShaderMaterialHelperStatics.uniformStandardType="mat4",ShaderMaterialHelperStatics.uniformFlags="flags",ShaderMaterialHelperStatics.Mouse="mouse",ShaderMaterialHelperStatics.Screen="screen",ShaderMaterialHelperStatics.Camera="camera",ShaderMaterialHelperStatics.Look="look",ShaderMaterialHelperStatics.Time="time",ShaderMaterialHelperStatics.GlobalTime="gtime",ShaderMaterialHelperStatics.Position="pos",ShaderMaterialHelperStatics.WorldPosition="wpos",ShaderMaterialHelperStatics.Normal="nrm",ShaderMaterialHelperStatics.WorldNormal="wnrm",ShaderMaterialHelperStatics.Uv="vuv",ShaderMaterialHelperStatics.Uv2="vuv2",ShaderMaterialHelperStatics.Center="center",ShaderMaterialHelperStatics.ReflectMatrix="refMat",ShaderMaterialHelperStatics.Texture2D="txtRef_",ShaderMaterialHelperStatics.TextureCube="cubeRef_",BABYLONX.ShaderMaterialHelperStatics=ShaderMaterialHelperStatics;var Normals=(function(){function e(){}return e})();Normals.Default=ShaderMaterialHelperStatics.Normal,Normals.Inverse="-1.*"+ShaderMaterialHelperStatics.Normal,Normals.Pointed="normalize("+ShaderMaterialHelperStatics.Position+"-"+ShaderMaterialHelperStatics.Center+")",Normals.Flat="normalize(cross(dFdx("+ShaderMaterialHelperStatics.Position+" * -1.), dFdy("+ShaderMaterialHelperStatics.Position+")))",Normals.Map="normalMap()",BABYLONX.Normals=Normals;var Speculars=(function(){function e(){}return e})();Speculars.Map="specularMap()",BABYLONX.Speculars=Speculars;var ShaderMaterialHelper=(function(){function e(){}return e.prototype.ShaderMaterial=function(e,t,r,i){return this.MakeShaderMaterialForEngine(e,t,r,i)},e.prototype.MakeShaderMaterialForEngine=function(e,t,r,i){return{}},e.prototype.DefineTexture=function(e,t){return null},e.prototype.DefineCubeTexture=function(e,t){return null},e.prototype.SetUniforms=function(e,t,r,i,n,a){},e.prototype.PostProcessTextures=function(e,t,r){},e.prototype.DefineRenderTarget=function(e,t,r){return{}},e.prototype.ShaderPostProcess=function(e,t,r,i,n,a,s){return{}},e})();BABYLONX.ShaderMaterialHelper=ShaderMaterialHelper;var Shader=(function(){function e(){}return e.Replace=function(e,t,r){var i=null;return e.replace(new RegExp(t.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),i?"gi":"g"),"string"==typeof r?r.replace(/\$/g,"$$$$"):r)},e.Def=function(t,r){return void 0!=t&&null!=t?void 0==r||null==r||t:r!=e._null?void 0!=r&&null!=r&&r:null},e.Join=function(e){return e.join("\n                       ")},e.Print=function(t){if(void 0==t)return"0.";var r=e.Replace(t.toString(),"-","0"),i=new RegExp("^\\d+$");return i.test(r)&&t.toString().indexOf(".")==-1?t+".":t.toString()},e.Custom=function(){return"custom_"+this.Print(++this.Me.CustomIndexer)+"_"},e.Index=function(){return"_"+e.Indexer+"_"},e.DefCustom=function(e,t){this.Me.Body+=e+" custom_"+this.Print(++this.Me.CustomIndexer)+"_ = "+t+";"},e.toRGB=function(t,r){r=e.Def(r,255);var i=t-Math.floor(t/r)*r;t=Math.floor(t/r);var n=t-Math.floor(t/r)*r;t=Math.floor(t/r);var a=t-Math.floor(t/r)*r;return i>126&&i++,n>126&&n++,a>126&&a++,{r:i,g:n,b:a}},e.torgb=function(t,r){r=e.Def(r,255);var i=e.toRGB(t,r);return{r:i.r/256,g:i.g/256,b:i.b/256}},e.toID=function(t,r){r=e.Def(r,255);var i=255/r,n=Math.floor(t.r/i),a=Math.floor(t.g/i),s=Math.floor(t.b/i);return s*r*r+a*r+n},e})();Shader._null="set null anyway",BABYLONX.Shader=Shader;var Helper=(function(){function e(){var e=Shader.Me.Setting,t=new ShaderBuilder;return t.Parent=Shader.Me,t.Setting=e,t}return e.Depth=function(e){return"max(0.,min(1.,("+Shader.Print(e)+"-abs(length(camera-pos)))/"+Shader.Print(e)+" ))"},e})();Helper.Red=0,Helper.Yellow=1,Helper.White=2,Helper.Cyan=4,Helper.Blue=5,Helper.Pink=6,Helper.Black=7,Helper.Green=8,BABYLONX.Helper=Helper;var ShaderSetting=(function(){function e(){this.PrecisionMode=ShaderMaterialHelperStatics.PrecisionHighMode}return e})();BABYLONX.ShaderSetting=ShaderSetting;var ShaderBuilder=(function(){function ShaderBuilder(){this.Setting=new ShaderSetting,this.Extentions=[],this.Attributes=[],this.Fragment=[],this.Helpers=[],this.Uniforms=[],this.Varings=[],this.Vertex=[],this.Setting.Uv=!0,this.Setting.Time=!0,this.Setting.Camera=!0,this.Setting.Helpers=!0,this.Setting.NormalMap="result = vec4(0.5);",this.Setting.SpecularMap="float_result = 1.0;",this.Setting.NormalOpacity="0.5",this.Setting.Normal=ShaderMaterialHelperStatics.Normal,null==Shader.Indexer&&(Shader.Indexer=1),this.CustomIndexer=1,Shader.Me=this}return ShaderBuilder.InitializeEngine=function(){eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.MakeShaderMaterialForEngine=function(name,scene,shader,helpers){BABYLON.Effect.ShadersStore[name+#[QT]VertexShader#[QT]]=shader.Vertex;BABYLON.Effect.ShadersStore[name+#[QT]PixelShader#[QT]]=shader.Pixel;return new BABYLON.ShaderMaterial(name,scene,{vertex:name,fragment:name},helpers);}","#[QT]",'"'),"#[T]","'")),eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.DefineTexture = function (option, sc) { var tx = new BABYLON.Texture(option, sc); return tx; } ","#[QT]",'"'),"#[T]","'")),eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.DefineCubeTexture = function (option, sc) { var tx = new BABYLON.CubeTexture(option, sc); tx.coordinatesMode = BABYLON.Texture.PLANAR_MODE; return tx; }  ","#[QT]",'"'),"#[T]","'")),eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.SetUniforms = function (meshes, cameraPos, cameraTarget, mouse, screen, time) { for (var ms in meshes) { ms = meshes[ms]; if (ms.material && (ms.material.ShaderSetting != null || ms.material.ShaderSetting != undefined)) { if (ms.material.ShaderSetting.Camera)                ms.material.setVector3(BABYLONX.ShaderMaterialHelperStatics.Camera, cameraPos); if (ms.material.ShaderSetting.Center)                ms.material.setVector3(BABYLONX.ShaderMaterialHelperStatics.Center, { x: 0., y: 0., z: 0. }); if (ms.material.ShaderSetting.Mouse)                ms.material.setVector2(BABYLONX.ShaderMaterialHelperStatics.Mouse, mouse); if (ms.material.ShaderSetting.Screen)                ms.material.setVector2(BABYLONX.ShaderMaterialHelperStatics.Screen, screen); if (ms.material.ShaderSetting.GlobalTime)                ms.material.setVector4(BABYLONX.ShaderMaterialHelperStatics.GlobalTime, { x: 0., y: 0., z: 0., w: 0. }); if (ms.material.ShaderSetting.Look)                ms.material.setVector3(BABYLONX.ShaderMaterialHelperStatics.Look, cameraTarget); if (ms.material.ShaderSetting.Time)                ms.material.setFloat(BABYLONX.ShaderMaterialHelperStatics.Time, time);        }        }    }","#[QT]",'"'),"#[T]","'")),eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.ShaderPostProcess = function (name, samplers, camera, scale, shader, helpers, option) {if (!option) option = {};if (!option.samplingMode) option.samplingMode = BABYLON.Texture.BILINEAR_SAMPLINGMODE;BABYLON.Effect.ShadersStore[name + #[QT]PixelShader#[QT]] = shader.Pixel;var pps = new BABYLON.PostProcess(name, name, helpers.uniforms, samplers, scale, camera, option.samplingMode);pps.onApply = function (effect) {effect.setFloat(#[T]time#[T], time);effect.setVector2(#[QT]screen#[QT], { x: pps.width, y: pps.height });effect.setVector3(#[QT]camera#[QT], camera.position);if (option && option.onApply)option.onApply(effect);};return pps;} ","#[QT]",'"'),"#[T]","'")),eval(Shader.Replace(Shader.Replace("BABYLONX.ShaderMaterialHelper.prototype.PostProcessTextures = function (pps, name, txt) {pps._effect.setTexture(name, txt);}","#[QT]",'"'),"#[T]","'"))},ShaderBuilder.InitializePostEffects=function(e,t){ShaderBuilder.ColorIdRenderTarget=(new ShaderMaterialHelper).DefineRenderTarget("ColorId",t,e)},ShaderBuilder.prototype.PrepareBeforeMaterialBuild=function(){if(this.Setting=Shader.Me.Setting,this.Attributes.push(ShaderMaterialHelperStatics.AttrPosition),this.Attributes.push(ShaderMaterialHelperStatics.AttrNormal),this.Setting.Uv&&this.Attributes.push(ShaderMaterialHelperStatics.AttrUv),this.Setting.Uv2&&this.Attributes.push(ShaderMaterialHelperStatics.AttrUv2),this.Uniforms.push(ShaderMaterialHelperStatics.uniformView,ShaderMaterialHelperStatics.uniformWorld,ShaderMaterialHelperStatics.uniformWorldView,ShaderMaterialHelperStatics.uniformViewProjection,ShaderMaterialHelperStatics.uniformWorldViewProjection),this.Vertex.push("precision "+this.Setting.PrecisionMode+" float;"),this.Vertex.push("attribute "+ShaderMaterialHelperStatics.AttrTypeForPosition+" "+ShaderMaterialHelperStatics.AttrPosition+";"),this.Vertex.push("attribute "+ShaderMaterialHelperStatics.AttrTypeForNormal+" "+ShaderMaterialHelperStatics.AttrNormal+";"),this.Setting.Uv&&(this.Vertex.push("attribute "+ShaderMaterialHelperStatics.AttrTypeForUv+" "+ShaderMaterialHelperStatics.AttrUv+";"),this.Vertex.push("varying vec2 "+ShaderMaterialHelperStatics.Uv+";")),this.Setting.Uv2&&(this.Vertex.push("attribute "+ShaderMaterialHelperStatics.AttrTypeForUv2+" "+ShaderMaterialHelperStatics.AttrUv2+";"),this.Vertex.push("varying vec2 "+ShaderMaterialHelperStatics.Uv2+";")),this.Vertex.push("varying vec3 "+ShaderMaterialHelperStatics.Position+";"),this.Vertex.push("varying vec3 "+ShaderMaterialHelperStatics.Normal+";"),this.Vertex.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformWorldViewProjection+";"),this.Setting.VertexView&&this.Vertex.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformView+";"),this.Setting.VertexWorld&&this.Vertex.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformWorld+";"),this.Setting.VertexViewProjection&&this.Vertex.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformViewProjection+";"),this.Setting.Flags&&(this.Uniforms.push(ShaderMaterialHelperStatics.uniformFlags),this.Vertex.push("uniform  float "+ShaderMaterialHelperStatics.uniformFlags+";")),this.Setting.VertexWorldView&&this.Vertex.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformWorldView+";"),this.VertexUniforms&&this.Vertex.push(this.VertexUniforms),this.Fragment.push("precision "+this.Setting.PrecisionMode+" float;\n#extension GL_OES_standard_derivatives : enable\n\n\n "),this.Setting.Uv&&this.Fragment.push("varying vec2 "+ShaderMaterialHelperStatics.Uv+";"),this.Setting.Uv2&&this.Fragment.push("varying vec2 "+ShaderMaterialHelperStatics.Uv2+";"),this.Setting.FragmentView&&this.Fragment.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformView+";"),this.Setting.FragmentWorld&&this.Fragment.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformWorld+";"),this.Setting.FragmentViewProjection&&this.Fragment.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformViewProjection+";"),this.Setting.FragmentWorldView&&this.Fragment.push("uniform   "+ShaderMaterialHelperStatics.uniformStandardType+" "+ShaderMaterialHelperStatics.uniformWorldView+";"),this.Setting.Flags&&this.Fragment.push("uniform  float "+ShaderMaterialHelperStatics.uniformFlags+";"),this.FragmentUniforms&&this.Fragment.push(this.FragmentUniforms),this.Fragment.push("varying vec3 "+ShaderMaterialHelperStatics.Position+";"),this.Fragment.push("varying vec3 "+ShaderMaterialHelperStatics.Normal+";"),this.Setting.WorldPosition&&(this.Vertex.push("varying vec3 "+ShaderMaterialHelperStatics.WorldPosition+";"),this.Vertex.push("varying vec3 "+ShaderMaterialHelperStatics.WorldNormal+";"),this.Fragment.push("varying vec3 "+ShaderMaterialHelperStatics.WorldPosition+";"),this.Fragment.push("varying vec3 "+ShaderMaterialHelperStatics.WorldNormal+";")),null!=this.Setting.Texture2Ds)for(var e in this.Setting.Texture2Ds)this.Setting.Texture2Ds[e].inVertex&&this.Vertex.push("uniform  sampler2D "+ShaderMaterialHelperStatics.Texture2D+e+";"),this.Setting.Texture2Ds[e].inFragment&&this.Fragment.push("uniform  sampler2D  "+ShaderMaterialHelperStatics.Texture2D+e+";");if(this.Setting.CameraShot&&this.Fragment.push("uniform  sampler2D  textureSampler;"),null!=this.Setting.TextureCubes)for(var e in this.Setting.TextureCubes)this.Setting.TextureCubes[e].inVertex&&this.Vertex.push("uniform  samplerCube  "+ShaderMaterialHelperStatics.TextureCube+e+";"),this.Setting.TextureCubes[e].inFragment&&this.Fragment.push("uniform  samplerCube   "+ShaderMaterialHelperStatics.TextureCube+e+";");if(this.Setting.Center&&(this.Vertex.push("uniform  vec3 "+ShaderMaterialHelperStatics.Center+";"),this.Fragment.push("uniform  vec3 "+ShaderMaterialHelperStatics.Center+";")),this.Setting.Mouse&&(this.Vertex.push("uniform  vec2 "+ShaderMaterialHelperStatics.Mouse+";"),this.Fragment.push("uniform  vec2 "+ShaderMaterialHelperStatics.Mouse+";")),this.Setting.Screen&&(this.Vertex.push("uniform  vec2 "+ShaderMaterialHelperStatics.Screen+";"),this.Fragment.push("uniform  vec2 "+ShaderMaterialHelperStatics.Screen+";")),this.Setting.Camera&&(this.Vertex.push("uniform  vec3 "+ShaderMaterialHelperStatics.Camera+";"),this.Fragment.push("uniform  vec3 "+ShaderMaterialHelperStatics.Camera+";")),this.Setting.Look&&(this.Vertex.push("uniform  vec3 "+ShaderMaterialHelperStatics.Look+";"),this.Fragment.push("uniform  vec3 "+ShaderMaterialHelperStatics.Look+";")),this.Setting.Time&&(this.Vertex.push("uniform  float "+ShaderMaterialHelperStatics.Time+";"),this.Fragment.push("uniform  float "+ShaderMaterialHelperStatics.Time+";")),this.Setting.GlobalTime&&(this.Vertex.push("uniform  vec4 "+ShaderMaterialHelperStatics.GlobalTime+";"),this.Fragment.push("uniform  vec4 "+ShaderMaterialHelperStatics.GlobalTime+";")),this.Setting.ReflectMatrix&&(this.Vertex.push("uniform  mat4 "+ShaderMaterialHelperStatics.ReflectMatrix+";"),this.Fragment.push("uniform  mat4 "+ShaderMaterialHelperStatics.ReflectMatrix+";")),this.Setting.Helpers){var t=Shader.Join(["vec3 random3(vec3 c) {   float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));   vec3 r;   r.z = fract(512.0*j); j *= .125;  r.x = fract(512.0*j); j *= .125; r.y = fract(512.0*j);  return r-0.5;  } ","float rand(vec2 co){   return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } ","const float F3 =  0.3333333;const float G3 =  0.1666667;","float simplex3d(vec3 p) {   vec3 s = floor(p + dot(p, vec3(F3)));   vec3 x = p - s + dot(s, vec3(G3));  vec3 e = step(vec3(0.0), x - x.yzx);  vec3 i1 = e*(1.0 - e.zxy);  vec3 i2 = 1.0 - e.zxy*(1.0 - e);   vec3 x1 = x - i1 + G3;   vec3 x2 = x - i2 + 2.0*G3;   vec3 x3 = x - 1.0 + 3.0*G3;   vec4 w, d;    w.x = dot(x, x);   w.y = dot(x1, x1);  w.z = dot(x2, x2);  w.w = dot(x3, x3);   w = max(0.6 - w, 0.0);   d.x = dot(random3(s), x);   d.y = dot(random3(s + i1), x1);   d.z = dot(random3(s + i2), x2);  d.w = dot(random3(s + 1.0), x3);  w *= w;   w *= w;  d *= w;   return dot(d, vec4(52.0));     }  ","float noise(vec3 m) {  return   0.5333333*simplex3d(m)   +0.2666667*simplex3d(2.0*m) +0.1333333*simplex3d(4.0*m) +0.0666667*simplex3d(8.0*m);   } ","float dim(vec3 p1 , vec3 p2){   return sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y)+(p2.z-p1.z)*(p2.z-p1.z)); }","vec2  rotate_xy(vec2 pr1,vec2  pr2,float alpha) {vec2 pp2 = vec2( pr2.x - pr1.x,   pr2.y - pr1.y );return  vec2( pr1.x + pp2.x * cos(alpha*3.14159265/180.) - pp2.y * sin(alpha*3.14159265/180.),pr1.y + pp2.x * sin(alpha*3.14159265/180.) + pp2.y * cos(alpha*3.14159265/180.));} \n vec3  r_y(vec3 n, float a,vec3 c) {vec3 c1 = vec3( c.x,  c.y,   c.z );c1.x = c1.x;c1.y = c1.z;vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.x,  n.z ), a);n.x = p.x;n.z = p.y;return n; } \n vec3  r_x(vec3 n, float a,vec3 c) {vec3 c1 = vec3( c.x,  c.y,   c.z );c1.x = c1.y;c1.y = c1.z;vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.y,  n.z ), a);n.y = p.x;n.z = p.y;return n; } \n vec3  r_z(vec3 n, float a,vec3 c) {  vec3 c1 = vec3( c.x,  c.y,   c.z );vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.x,  n.y ), a);n.x = p.x;n.y = p.y;return n; }"]);this.Vertex.push(t),this.Fragment.push(t)}this.Vertex.push("void main(void) { \n    "+ShaderMaterialHelperStatics.Position+" = "+ShaderMaterialHelperStatics.AttrPosition+"; \n    "+ShaderMaterialHelperStatics.Normal+" = "+ShaderMaterialHelperStatics.AttrNormal+"; \n    vec4 result = vec4("+ShaderMaterialHelperStatics.Position+",1.);  \n      vuv = uv;\n     #[Source]\n    gl_Position = worldViewProjection * result;\n    #[AfterFinishVertex] \n }"),null!=this.Setting.NormalMap&&this.Fragment.push("vec3 normalMap() { vec4 result = vec4(0.); "+this.Setting.NormalMap+"; \n                  result = vec4( normalize( "+this.Setting.Normal+" -(normalize(result.xyz)*2.0-vec3(1.))*(max(-0.5,min(0.5,"+Shader.Print(this.Setting.NormalOpacity)+")) )),1.0); return result.xyz;}"),null!=this.Setting.SpecularMap&&this.Fragment.push("float specularMap() { vec4 result = vec4(0.);float float_result = 0.; "+this.Setting.SpecularMap+"; return float_result ;}"),this.Fragment.push(this.FragmentBeforeMain),this.Fragment.push(" \nvoid main(void) { \n     int discardState = 0;\n     vec4 result = vec4(0.);\n     #[Source] \n     if(discardState == 0)gl_FragColor = result; \n}")},ShaderBuilder.prototype.PrepareBeforePostProcessBuild=function(){if(this.Setting=Shader.Me.Setting,this.Attributes.push(ShaderMaterialHelperStatics.AttrPosition),this.Fragment.push("precision "+this.Setting.PrecisionMode+" float;\n\n "),this.Setting.Uv&&this.Fragment.push("varying vec2 vUV;"),this.Setting.Flags&&this.Fragment.push("uniform  float "+ShaderMaterialHelperStatics.uniformFlags+";"),null!=this.Setting.Texture2Ds)for(var e in this.Setting.Texture2Ds)this.Setting.Texture2Ds[e].inFragment&&this.Fragment.push("uniform  sampler2D  "+ShaderMaterialHelperStatics.Texture2D+e+";");if(null!=this.PPSSamplers)for(var e in this.PPSSamplers)this.PPSSamplers[e]&&this.Fragment.push("uniform  sampler2D  "+this.PPSSamplers[e]+";");if(this.Setting.CameraShot&&this.Fragment.push("uniform  sampler2D  textureSampler;"),this.Setting.Mouse&&this.Fragment.push("uniform  vec2 "+ShaderMaterialHelperStatics.Mouse+";"),this.Setting.Screen&&this.Fragment.push("uniform  vec2 "+ShaderMaterialHelperStatics.Screen+";"),this.Setting.Camera&&this.Fragment.push("uniform  vec3 "+ShaderMaterialHelperStatics.Camera+";"),this.Setting.Look&&this.Fragment.push("uniform  vec3 "+ShaderMaterialHelperStatics.Look+";"),this.Setting.Time&&this.Fragment.push("uniform  float "+ShaderMaterialHelperStatics.Time+";"),this.Setting.GlobalTime&&this.Fragment.push("uniform  vec4 "+ShaderMaterialHelperStatics.GlobalTime+";"),this.Setting.Helpers){var t=Shader.Join(["vec3 random3(vec3 c) {   float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));   vec3 r;   r.z = fract(512.0*j); j *= .125;  r.x = fract(512.0*j); j *= .125; r.y = fract(512.0*j);  return r-0.5;  } ","float rand(vec2 co){   return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453); } ","const float F3 =  0.3333333;const float G3 =  0.1666667;","float simplex3d(vec3 p) {   vec3 s = floor(p + dot(p, vec3(F3)));   vec3 x = p - s + dot(s, vec3(G3));  vec3 e = step(vec3(0.0), x - x.yzx);  vec3 i1 = e*(1.0 - e.zxy);  vec3 i2 = 1.0 - e.zxy*(1.0 - e);   vec3 x1 = x - i1 + G3;   vec3 x2 = x - i2 + 2.0*G3;   vec3 x3 = x - 1.0 + 3.0*G3;   vec4 w, d;    w.x = dot(x, x);   w.y = dot(x1, x1);  w.z = dot(x2, x2);  w.w = dot(x3, x3);   w = max(0.6 - w, 0.0);   d.x = dot(random3(s), x);   d.y = dot(random3(s + i1), x1);   d.z = dot(random3(s + i2), x2);  d.w = dot(random3(s + 1.0), x3);  w *= w;   w *= w;  d *= w;   return dot(d, vec4(52.0));     }  ","float noise(vec3 m) {  return   0.5333333*simplex3d(m)   +0.2666667*simplex3d(2.0*m) +0.1333333*simplex3d(4.0*m) +0.0666667*simplex3d(8.0*m);   } ","vec2  rotate_xy(vec2 pr1,vec2  pr2,float alpha) {vec2 pp2 = vec2( pr2.x - pr1.x,   pr2.y - pr1.y );return  vec2( pr1.x + pp2.x * cos(alpha*3.14159265/180.) - pp2.y * sin(alpha*3.14159265/180.),pr1.y + pp2.x * sin(alpha*3.14159265/180.) + pp2.y * cos(alpha*3.14159265/180.));} \n vec3  r_y(vec3 n, float a,vec3 c) {vec3 c1 = vec3( c.x,  c.y,   c.z );c1.x = c1.x;c1.y = c1.z;vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.x,  n.z ), a);n.x = p.x;n.z = p.y;return n; } \n vec3  r_x(vec3 n, float a,vec3 c) {vec3 c1 = vec3( c.x,  c.y,   c.z );c1.x = c1.y;c1.y = c1.z;vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.y,  n.z ), a);n.y = p.x;n.z = p.y;return n; } \n vec3  r_z(vec3 n, float a,vec3 c) {  vec3 c1 = vec3( c.x,  c.y,   c.z );vec2 p = rotate_xy(vec2(c1.x,c1.y), vec2( n.x,  n.y ), a);n.x = p.x;n.y = p.y;return n; }","float getIdColor(vec4 a){    float b = 255.;float c = 255. / b;float x = floor(a.x*256. / c);float y = floor(a.y *256./ c);float z = floor(a.z*256. / c);return z * b * b + y * b + x;}"]);this.Fragment.push(t)}null!=this.Setting.NormalMap&&this.Fragment.push("vec3 normalMap() { vec4 result = vec4(0.);   return result.xyz;}"),this.Fragment.push(this.FragmentBeforeMain),this.Fragment.push(" \nvoid main(void) { \n     int discardState = 0;\n     vec2 vuv = vUV;\n     vec3 center = vec3(0.);\n     vec4 result = vec4(0.);\n     #[Source] \n     if(discardState == 0)gl_FragColor = result; \n}")},ShaderBuilder.prototype.PrepareMaterial=function(e,t){if(e.ShaderSetting=this.Setting,this.Setting.Transparency?e.needAlphaBlending=function(){return!0}:e.needAlphaBlending=function(){return!1},this.Setting.Back||(this.Setting.Back=!1),this.Setting.DisableAlphaTesting?e.needAlphaTesting=function(){return!1}:e.needAlphaTesting=function(){return!0},e.setVector3("camera",{x:18,y:18,z:18}),e.backFaceCulling=!this.Setting.Back,e.wireframe=this.Setting.Wire,e.setFlags=function(e){if(this.ShaderSetting.Flags){for(var t=0,r=0;r<20;r++)e.length>r&&"1"==e[r]&&(t+=Math.pow(2,r));this.flagNumber=t,this.setFloat(ShaderMaterialHelperStatics.uniformFlags,t)}},e.flagNumber=0,e.flagUp=function(e){this.ShaderSetting.Flags&&(1!=Math.floor(this.flagNumber/Math.pow(2,e)%2)&&(this.flagNumber+=Math.pow(2,e)),this.setFloat(ShaderMaterialHelperStatics.uniformFlags,this.flagNumber))},e.flagDown=function(e){this.ShaderSetting.Flags&&(1==Math.floor(this.flagNumber/Math.pow(2,e)%2)&&(this.flagNumber-=Math.pow(2,e)),this.setFloat(ShaderMaterialHelperStatics.uniformFlags,this.flagNumber))},e.onCompiled=function(){},null!=this.Setting.Texture2Ds)for(var r in this.Setting.Texture2Ds){var i=(new ShaderMaterialHelper).DefineTexture(this.Setting.Texture2Ds[r].key,t);e.setTexture(ShaderMaterialHelperStatics.Texture2D+r,i)}if(null!=this.Setting.TextureCubes)for(var r in this.Setting.TextureCubes){var i=(new ShaderMaterialHelper).DefineCubeTexture(this.Setting.TextureCubes[r].key,t);e.setTexture(ShaderMaterialHelperStatics.TextureCube+r,i),e.setMatrix(ShaderMaterialHelperStatics.ReflectMatrix,i.getReflectionTextureMatrix())}return Shader.Me=null,e},ShaderBuilder.prototype.Build=function(){return Shader.Me.Parent.Setting=Shader.Me.Setting,Shader.Me=Shader.Me.Parent,this.Body},ShaderBuilder.prototype.BuildVertex=function(){return Shader.Me.Parent.Setting=Shader.Me.Setting,Shader.Me=Shader.Me.Parent,this.VertexBody},ShaderBuilder.prototype.SetUniform=function(e,t){return Shader.Me.VertexUniforms||(Shader.Me.VertexUniforms=""),Shader.Me.FragmentUniforms||(Shader.Me.FragmentUniforms=""),this.VertexUniforms+="uniform "+t+" "+e+";\n            ",this.FragmentUniforms+="uniform "+t+" "+e+";\n            ",this},ShaderBuilder.prototype.toScript=function(e,t,r){void 0===r&&(r=!0),this.PrepareBeforeMaterialBuild();var i="BABYLON.Effect.ShadersStore["+t+"VertexShader]="+Shader.Join(this.Vertex).replace("#[Source]",Shader.Def(this.VertexBody,"")).replace("#[AfterFinishVertex]",Shader.Def(this.AfterVertex,""))+";\n\n",n="BABYLON.Effect.ShadersStore["+t+"PixelShader ]="+Shader.Join(this.Fragment).replace("#[Source]",this.Body)+";\n\n",a="{vertex: "+t+", Pixel: "+t+"}",s="{";s+="uniforms: ["+this.Uniforms+"], ",s+="attributes: ["+this.Attributes+"], ",s+="needAlphaBlending: "+this.Setting.Transparency+", ",s+="needAlphaTesting: "+!this.Setting.DisableAlphaTesting+"}";var o;o=r?"module "+e+" {\n"+i+";\n"+n+";\n\texport class "+t+" extends BABYLON.ShaderMaterial {\n\t\tconstructor(name: string, scene: Scene) {\n\t\t\tsuper(name, scene, "+a+", "+s+");\n":"\n"+i+";\n"+n+";\nvar "+e+";\n(function (shape_key) {\n\tvar "+t+" = (function (_super) {\n\t\t__extends("+t+", _super);\n\t\tfunction "+t+"(name, scene) {\n\t\t\t_super.call(this, name, scene, "+a+", "+s+");\n";var l="\t\t\t\t";if(o+=l+"this..setVector3('camera', { x: 18., y: 18., z: 18. });\n",o+=l+"this.backFaceCulling = "+!this.Setting.Back+";\n",o+=l+"this.wireframe = "+this.Setting.Wire+";\n",(this.Setting.Texture2Ds||this.Setting.TextureCubes)&&(o+=l+"var texture;\n"),this.Setting.Texture2Ds)for(var h in this.Setting.Texture2Ds)o+=l+"texture = new BABYLON.Texture("+this.Setting.Texture2Ds[h].key+", scene)\n;",o+=l+"this.setTexture("+ShaderMaterialHelperStatics.Texture2D+h+", texture)\n;";if(this.Setting.TextureCubes)for(var h in this.Setting.TextureCubes)o+=l+"texture = new BABYLON.Texture("+this.Setting.TextureCubes[h].key+", scene)\n;",o+=l+"this.setTexture("+ShaderMaterialHelperStatics.TextureCube+h+", texture)\n;",o+=l+"this.setMatrix("+ShaderMaterialHelperStatics.ReflectMatrix+", texture.getReflectionTextureMatrix());\n";return r||(o+="\t\treturn this;\n"),o+="\t\t"+(r?"public setFlags(flags : string) : void":t+".prototype.setFlags = function(flags)")+" {\n",o+=l+"var s = 0.;\n",o+=l+"for (var i = 0; i < 20; i++) {\n",o+=l+"   if (flags.length > i && flags[i] == '1')\n",o+=l+"    s += Math.pow(2., i);\n",o+=l+"}\n",o+=l+"this.flagNumber = s;\n",o+=l+"this.setFloat("+ShaderMaterialHelperStatics.uniformFlags+", s);\n",o+="\t\t"+(r?"}\n":"}\n;"),o+="\t\t"+(r?"public flagUp(flag : number) : void":t+".prototype.flagUp = function(flag)")+" {\n",o+=l+"if (Math.floor((this.flagNumber / Math.pow(2., flag) % 2.)) != 1.)\n",o+=l+"    this.flagNumber += Math.pow(2., flag);\n",o+=l+"this.setFloat(ShaderMaterialHelperStatics.uniformFlags, this.flagNumber);\n",o+="\t\t"+(r?"}\n":"}\n;"),o+="\t\t"+(r?"public flagDown(flag : number) : void":t+".prototype.flagDown = function(flag)")+" {\n",o+=l+"if (Math.floor((this.flagNumber / Math.pow(2., flag) % 2.)) == 1.)\n",o+=l+"    this.flagNumber -= Math.pow(2., flag);\n",o+=l+"this.setFloat(ShaderMaterialHelperStatics.uniformFlags, this.flagNumber);\n",o+="\t\t"+(r?"}\n":"}\n;"),o+=r?"\t}\n}":"})("+e+" || ("+e+" = {}));"},ShaderBuilder.prototype.BuildMaterial=function(e){this.PrepareBeforeMaterialBuild(),null==Shader.ShaderIdentity&&(Shader.ShaderIdentity=0),Shader.ShaderIdentity++;var t=(new ShaderMaterialHelper).ShaderMaterial("ShaderBuilder_"+Shader.ShaderIdentity,e,{Pixel:Shader.Join(this.Fragment).replace("#[Source]",this.Body),Vertex:Shader.Join(this.Vertex).replace("#[Source]",Shader.Def(this.VertexBody,"")).replace("#[AfterFinishVertex]",Shader.Def(this.AfterVertex,""))},{uniforms:this.Uniforms,attributes:this.Attributes});return Shader.Indexer=1,this.PrepareMaterial(t,e)},ShaderBuilder.prototype.BuildPostProcess=function(e,t,r,i){this.Setting.Screen=!0,this.Setting.Mouse=!0,this.Setting.Time=!0,this.Setting.CameraShot=!0,this.PrepareBeforePostProcessBuild(),null==Shader.ShaderIdentity&&(Shader.ShaderIdentity=0),Shader.ShaderIdentity++;var n=[];for(var a in this.Setting.Texture2Ds)n.push(ShaderMaterialHelperStatics.Texture2D+a);if(null!=this.PPSSamplers)for(var a in this.PPSSamplers)this.PPSSamplers[a]&&n.push(this.PPSSamplers[a]);var s=(new ShaderMaterialHelper).ShaderPostProcess("ShaderBuilder_"+Shader.ShaderIdentity,n,e,r,{Pixel:Shader.Join(this.Fragment).replace("#[Source]",this.Body),Vertex:Shader.Join(this.Vertex).replace("#[Source]",Shader.Def(this.VertexBody,"")).replace("#[AfterFinishVertex]",Shader.Def(this.AfterVertex,""))},{uniforms:this.Uniforms,attributes:this.Attributes},i);if(null!=this.Setting.Texture2Ds)for(var a in this.Setting.Texture2Ds){var o=(new ShaderMaterialHelper).DefineTexture(this.Setting.Texture2Ds[a].key,t);(new ShaderMaterialHelper).PostProcessTextures(s,ShaderMaterialHelperStatics.Texture2D+a,o)}return s},ShaderBuilder.prototype.Event=function(e,t){return Shader.Me.Setting.Flags=!0,Shader.Indexer++,this.Body=Shader.Def(this.Body,""),this.Body+="  if ( floor(mod( "+ShaderMaterialHelperStatics.uniformFlags+"/pow(2.,"+Shader.Print(e)+"),2.)) == 1.) { "+t+" } ",this},ShaderBuilder.prototype.EventVertex=function(e,t){return Shader.Me.Setting.Flags=!0,Shader.Me.Setting.Vertex=!0,Shader.Indexer++,this.VertexBody=Shader.Def(this.VertexBody,""),this.VertexBody+=" if( floor(mod( "+ShaderMaterialHelperStatics.uniformFlags+"/pow(2.,"+Shader.Print(e)+"),2.)) == 1. ){ "+t+"}",this},ShaderBuilder.prototype.Transparency=function(){return Shader.Me.Setting.Transparency=!0,this},ShaderBuilder.prototype.DisableAlphaTesting=function(){return Shader.Me.Setting.DisableAlphaTesting=!0,this},ShaderBuilder.prototype.PostEffect1=function(e,t){return null==Shader.Me.PostEffect1Effects&&(Shader.Me.PostEffect1Effects=[]),Shader.Me.PostEffect1[e]=t,this},ShaderBuilder.prototype.PostEffect2=function(e,t){return null==Shader.Me.PostEffect2Effects&&(Shader.Me.PostEffect2Effects=[]),Shader.Me.PostEffect2[e]=t,this},ShaderBuilder.prototype.ImportSamplers=function(e){null==Shader.Me.PPSSamplers&&(Shader.Me.PPSSamplers=[]);for(var t in e)Shader.Me.PPSSamplers.push(e[t]);return this},ShaderBuilder.prototype.Wired=function(){return Shader.Me.Setting.Wire=!0,this},ShaderBuilder.prototype.VertexShader=function(e){return this.VertexBody=Shader.Def(this.VertexBody,""),this.VertexBody+=e,this},ShaderBuilder.prototype.Solid=function(e){return e=Shader.Def(e,{r:0,g:0,b:0,a:1}),e.a=Shader.Def(e.a,1),e.r=Shader.Def(e.r,0),e.g=Shader.Def(e.g,0),e.b=Shader.Def(e.b,0),this.Body=Shader.Def(this.Body,""),this.Body+=" result = vec4("+Shader.Print(e.r)+","+Shader.Print(e.g)+","+Shader.Print(e.b)+","+Shader.Print(e.a)+");",this},ShaderBuilder.prototype.GetMapIndex=function(e){if(null!=Shader.Me.Setting.Texture2Ds){for(var t in Shader.Me.Setting.Texture2Ds)if(this.Setting.Texture2Ds[t].key==e)return t}else Shader.Me.Setting.Texture2Ds=[];return-1},ShaderBuilder.prototype.GetCubeMapIndex=function(e){if(null!=Shader.Me.Setting.TextureCubes){for(var t in Shader.Me.Setting.TextureCubes)if(this.Setting.TextureCubes[t].key==e)return t}else Shader.Me.Setting.TextureCubes=[];return-1},ShaderBuilder.prototype.Func=function(e){
return e(Shader.Me)},ShaderBuilder.prototype.Nut=function(e,t){Shader.Indexer++,t=Shader.Def(t,{}),t.frame=Shader.Def(t.frame,"sin(time*0.4)");var r=Shader.Join(["float nut#[Ind]= "+Shader.Print(e)+";","float nut_ts#[Ind] = "+Shader.Print(t.frame)+";",this.Func((function(e){for(var r=[],i=0;i<t.bones.length;i++)r.push("vec3 nut_p#[Ind]_"+i+" = "+t.bones[i].center+";");return Shader.Join(r)})),this.Func((function(e){for(var r=[],i=0;i<t.bones.length;i++){r.push("if(nut#[Ind] "+t.bones[i].bet+"){ ");for(var n=0;n<t.array.length;n++){if(null!=t.bones[i].rotation.x&&void 0!=t.bones[i].rotation.x){r.push(t.array[n]+" = r_x("+t.array[n]+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.x)+",nut_p#[Ind]_"+i+");");for(var a=i+1;a<t.bones.length;a++)r.push("nut_p#[Ind]_"+a+" = r_x(nut_p#[Ind]_"+a+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.x)+",nut_p#[Ind]_"+i+");")}if(null!=t.bones[i].rotation.y&&void 0!=t.bones[i].rotation.y){r.push(t.array[n]+" = r_y("+t.array[n]+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.y)+",nut_p#[Ind]_"+i+");");for(var a=i+1;a<t.bones.length;a++)r.push("nut_p#[Ind]_"+a+" = r_y(nut_p#[Ind]_"+a+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.y)+",nut_p#[Ind]_"+i+");")}if(null!=t.bones[i].rotation.z&&void 0!=t.bones[i].rotation.z){r.push(t.array[n]+" = r_z("+t.array[n]+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.z)+",nut_p#[Ind]_"+i+");");for(var a=i+1;a<t.bones.length;a++)r.push("nut_p#[Ind]_"+a+" = r_z(nut_p#[Ind]_"+a+",nut_ts#[Ind]*"+Shader.Print(t.bones[i].rotation.z)+",nut_p#[Ind]_"+i+");")}}r.push("}")}return Shader.Join(r)}))]);return this.VertexBody=Shader.Def(this.VertexBody,""),r=Shader.Replace(r,"#[Ind]",Shader.Indexer.toString())+" result = vec4(pos,1.);",this.VertexBody+=r,this},ShaderBuilder.prototype.Map=function(e){Shader.Indexer++,e=Shader.Def(e,{path:"/images/color.png"});var t=0,r="";if(null==e.index||void 0==e.index)t=Shader.Me.GetMapIndex(e.path),t==-1?Shader.Me.Setting.Texture2Ds.push({key:e.path,inVertex:e.useInVertex,inFragment:!0}):Shader.Me.Setting.Texture2Ds[t].inVertex=e.useInVertex,t=Shader.Me.GetMapIndex(e.path),r=ShaderMaterialHelperStatics.Texture2D+t;else if("current"==e.index)r="textureSampler";else{var i=Shader.Replace(e.index.toString(),"-","0"),n=new RegExp("^\\d+$");r=n.test(i)&&e.index.toString().indexOf(".")==-1?ShaderMaterialHelperStatics.Texture2D+e.index:e.index}Shader.Me.Setting.Center=!0,Shader.Me.Setting.Helpers=!0,Shader.Me.Setting.Uv=!0,e.normal=Shader.Def(e.normal,Normals.Map),e.alpha=Shader.Def(e.alpha,!1),e.bias=Shader.Def(e.bias,"0."),e.normalLevel=Shader.Def(e.normalLevel,1),e.path=Shader.Def(e.path,"qa.jpg"),e.rotation=Shader.Def(e.rotation,{x:0,y:0,z:0}),e.scaleX=Shader.Def(e.scaleX,1),e.scaleY=Shader.Def(e.scaleY,1),e.useInVertex=Shader.Def(e.useInVertex,!1),e.x=Shader.Def(e.x,0),e.y=Shader.Def(e.y,0),e.uv=Shader.Def(e.uv,ShaderMaterialHelperStatics.Uv),e.animation=Shader.Def(e.animation,!1),e.tiled=Shader.Def(e.tiled,!1),e.columnIndex=Shader.Def(e.columnIndex,1),e.rowIndex=Shader.Def(e.rowIndex,1),e.animationSpeed=Shader.Def(e.animationSpeed,2e3),e.animationFrameEnd=Shader.Def(e.animationFrameEnd,100)+e.indexCount,e.animationFrameStart=Shader.Def(e.animationFrameStart,0)+e.indexCount,e.indexCount=Shader.Def(e.indexCount,1);var a=Math.min(e.animationFrameEnd-e.animationFrameStart,e.indexCount*e.indexCount),s=Shader.Def(e.uv,ShaderMaterialHelperStatics.Uv);s="planar"==e.uv?ShaderMaterialHelperStatics.Position:"vec3("+e.uv+".x,"+e.uv+".y,0.)",e.scaleX/=e.indexCount,e.scaleY/=e.indexCount;var o=["vec3 centeri#[Ind] = "+ShaderMaterialHelperStatics.Center+";","vec3 ppo#[Ind] = r_z( "+s+","+Shader.Print(e.rotation.x)+",centeri#[Ind]);  "," ppo#[Ind] = r_y( ppo#[Ind],"+Shader.Print(e.rotation.y)+",centeri#[Ind]);  "," ppo#[Ind] = r_x( ppo#[Ind],"+Shader.Print(e.rotation.x)+",centeri#[Ind]); ","vec3 nrm#[Ind] = r_z( "+e.normal+","+Shader.Print(e.rotation.x)+",centeri#[Ind]);  "," nrm#[Ind] = r_y( nrm#[Ind],"+Shader.Print(e.rotation.y)+",centeri#[Ind]);  "," nrm#[Ind] = r_x( nrm#[Ind],"+Shader.Print(e.rotation.z)+",centeri#[Ind]);  "].join("\n"),l=Shader.Join([o," vec4 color#[Ind] = texture2D("+r+" ,ppo#[Ind].xy*vec2("+Shader.Print(e.scaleX)+","+Shader.Print(e.scaleY)+")+vec2("+Shader.Print(e.x)+","+Shader.Print(e.y)+")"+(null==e.bias||"0."==Shader.Print(e.bias)?"":","+Shader.Print(e.bias))+");"," if(nrm#[Ind].z < "+Shader.Print(e.normalLevel)+"){ ",e.alpha?" result =  color#[Ind];":"result = vec4(color#[Ind].rgb , 1.); ","}"]);return(e.indexCount>1||e.tiled)&&(e.columnIndex=e.indexCount-e.columnIndex+1,l=[" vec3 uvt#[Ind] = vec3("+s+".x*"+Shader.Print(e.scaleX)+"+"+Shader.Print(e.x)+","+s+".y*"+Shader.Print(e.scaleY)+"+"+Shader.Print(e.y)+",0.0);     ","             "," float xst#[Ind] = 1./("+Shader.Print(e.indexCount)+"*2.);                                                    "," float yst#[Ind] =1./("+Shader.Print(e.indexCount)+"*2.);                                                     "," float xs#[Ind] = 1./"+Shader.Print(e.indexCount)+";                                                     "," float ys#[Ind] = 1./"+Shader.Print(e.indexCount)+";                                                     "," float yid#[Ind] = "+Shader.Print(e.columnIndex-1)+" ;                                                      "," float xid#[Ind] =  "+Shader.Print(e.rowIndex-1)+";                                                      ",e.animation?" float ind_a#[Ind] = floor(mod(time*0.001*"+Shader.Print(e.animationSpeed)+",   "+Shader.Print(a)+" )+"+Shader.Print(e.animationFrameStart)+"); yid#[Ind] = "+Shader.Print(e.indexCount)+"- floor(ind_a#[Ind] /  "+Shader.Print(e.indexCount)+"); xid#[Ind] =  floor(mod(ind_a#[Ind] ,  "+Shader.Print(e.indexCount)+")); ":""," float xi#[Ind] = mod(uvt#[Ind].x ,xs#[Ind])+xs#[Ind]*xid#[Ind]  ;                                   "," float yi#[Ind] = mod(uvt#[Ind].y ,ys#[Ind])+ys#[Ind]*yid#[Ind]  ;                                   ","                                                                       "," float xi2#[Ind] = mod(uvt#[Ind].x -xs#[Ind]*0.5 ,xs#[Ind])+xs#[Ind]*xid#[Ind]      ;                     "," float yi2#[Ind] = mod(uvt#[Ind].y -ys#[Ind]*0.5,ys#[Ind])+ys#[Ind]*yid#[Ind]   ;                         ","                                                                       ","                                                                       "," vec4 f#[Ind] = texture2D("+r+",vec2(xi#[Ind],yi#[Ind])) ;                             "," result =   f#[Ind] ;                                               ",e.tiled?[" vec4 f2#[Ind] = texture2D("+r+",vec2(xi2#[Ind]+xid#[Ind] ,yi#[Ind])) ;                      "," vec4 f3#[Ind] = texture2D("+r+",vec2(xi#[Ind],yi2#[Ind]+yid#[Ind])) ;                       "," vec4 f4#[Ind] = texture2D("+r+",vec2(xi2#[Ind]+xid#[Ind],yi2#[Ind]+yid#[Ind])) ;                  ","                                                                       ","                                                                       "," float ir#[Ind]  = 0.,ir2#[Ind] = 0.;                                              ","                                                                       ","     if( yi2#[Ind]  >= yid#[Ind] *ys#[Ind] ){                                            ","         ir2#[Ind]  = min(2.,max(0.,( yi2#[Ind]-yid#[Ind] *ys#[Ind])*2.0/ys#[Ind] ))   ;             ","         if(ir2#[Ind] > 1.0) ir2#[Ind] =1.0-(ir2#[Ind]-1.0);                             ","         ir2#[Ind] = min(1.0,max(0.0,pow(ir2#[Ind],"+Shader.Print(15)+" )*"+Shader.Print(3)+")); ","         result =  result *(1.0-ir2#[Ind]) +f3#[Ind]*ir2#[Ind]  ;           ","     }                                                                 "," if( xi2#[Ind]  >= xid#[Ind] *xs#[Ind]   ){                                               ","         ir2#[Ind]  = min(2.,max(0.,( xi2#[Ind]-xid#[Ind] *xs#[Ind])*2.0/xs#[Ind] ))   ;             ","         if(ir2#[Ind] > 1.0) ir2#[Ind] =1.0-(ir2#[Ind]-1.0);                             ","         ir2#[Ind] = min(1.0,max(0.0,pow(ir2#[Ind],"+Shader.Print(15)+" )*"+Shader.Print(3)+")); ","         result = result *(1.0-ir2#[Ind]) +f2#[Ind]*ir2#[Ind]  ;           ","     }  "," if( xi2#[Ind]  >= xid#[Ind] *xs#[Ind]  && xi2#[Ind]  >= xid#[Ind] *xs#[Ind]  ){                                               ","         ir2#[Ind]  = min(2.,max(0.,( xi2#[Ind]-xid#[Ind] *xs#[Ind])*2.0/xs#[Ind] ))   ;             ","  float       ir3#[Ind]  = min(2.,max(0.,( yi2#[Ind]-yid#[Ind] *ys#[Ind])*2.0/ys#[Ind] ))   ;             ","         if(ir2#[Ind] > 1.0) ir2#[Ind] =1.0-(ir2#[Ind]-1.0);                             ","         if(ir3#[Ind] > 1.0) ir3#[Ind] =1.0-(ir3#[Ind]-1.0);                             ","         ir2#[Ind] = min(1.0,max(0.0,pow(ir2#[Ind],"+Shader.Print(15)+" )*"+Shader.Print(3)+")); ","         ir3#[Ind] = min(1.0,max(0.0,pow(ir3#[Ind],"+Shader.Print(15)+" )*"+Shader.Print(3)+")); ","         ir2#[Ind] = min(1.0,max(0.0, ir2#[Ind]* ir3#[Ind] )); "," if(nrm#[Ind].z < "+Shader.Print(e.normalLevel)+"){ ",e.alpha?"    result =  result *(1.0-ir2#[Ind]) +f4#[Ind]* ir2#[Ind]   ;":"    result = vec4(result.xyz*(1.0-ir2#[Ind]) +f4#[Ind].xyz* ir2#[Ind]   ,1.0); ","}","     }  "].join("\n"):""].join("\n")),l=Shader.Replace(l,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=l,this},ShaderBuilder.prototype.Multi=function(e,t){t=Shader.Def(t,!0),Shader.Indexer++;for(var r="",i=["","","",""],n="0.0",a=0;a<e.length;a++)void 0!=e[a].result&&null!=e[a].result||(e[a]={result:e[a],opacity:1}),r+=" vec4 result#[Ind]"+a+";result#[Ind]"+a+" = vec4(0.,0.,0.,0.); float rp#[Ind]"+a+" = "+Shader.Print(e[a].opacity)+"; \n",r+=e[a].result+"\n                ",r+=" result#[Ind]"+a+" = result; \n",i[0]+=(0==a?"":" + ")+"result#[Ind]"+a+".x*rp#[Ind]"+a,i[1]+=(0==a?"":" + ")+"result#[Ind]"+a+".y*rp#[Ind]"+a,i[2]+=(0==a?"":" + ")+"result#[Ind]"+a+".z*rp#[Ind]"+a,i[3]+=(0==a?"":" + ")+"result#[Ind]"+a+".w*rp#[Ind]"+a,n+="+"+Shader.Print(e[a].opacity);return t&&(i[0]="("+i[0]+")/("+Shader.Print(n)+")",i[1]="("+i[1]+")/("+Shader.Print(n)+")",i[2]="("+i[2]+")/("+Shader.Print(n)+")",i[3]="("+i[3]+")/("+Shader.Print(n)+")"),r+="result = vec4("+i[0]+","+i[1]+","+i[2]+","+i[3]+");",this.Body=Shader.Def(this.Body,""),this.Body+=Shader.Replace(r,"#[Ind]","_"+Shader.Indexer+"_"),this},ShaderBuilder.prototype.Back=function(e){return Shader.Me.Setting.Back=!0,e=Shader.Def(e,""),this.Body=Shader.Def(this.Body,""),this.Body+="if("+ShaderMaterialHelperStatics.face_back+"){"+e+";}",this},ShaderBuilder.prototype.InLine=function(e){return e=Shader.Def(e,""),this.Body=Shader.Def(this.Body,""),this.Body+=e,this},ShaderBuilder.prototype.Front=function(e){return e=Shader.Def(e,""),this.Body=Shader.Def(this.Body,""),this.Body+="if("+ShaderMaterialHelperStatics.face_front+"){"+e+";}",this},ShaderBuilder.prototype.Range=function(e,t,r){Shader.Indexer++;Shader.Indexer;r.start=Shader.Def(r.start,0),r.end=Shader.Def(r.end,1),r.direction=Shader.Def(r.direction,ShaderMaterialHelperStatics.Position+".y");var i=["float s_r_dim#[Ind] = "+r.direction+";","if(s_r_dim#[Ind] > "+Shader.Print(r.end)+"){",t,"}","else { ",e,"   vec4 mat1#[Ind]; mat1#[Ind]  = result;","   if(s_r_dim#[Ind] > "+Shader.Print(r.start)+"){ ",t,"       vec4 mati2#[Ind];mati2#[Ind] = result;","       float s_r_cp#[Ind]  = (s_r_dim#[Ind] - ("+Shader.Print(r.start)+"))/("+Shader.Print(r.end)+"-("+Shader.Print(r.start)+"));","       float s_r_c#[Ind]  = 1.0 - s_r_cp#[Ind];","       result = vec4(mat1#[Ind].x*s_r_c#[Ind]+mati2#[Ind].x*s_r_cp#[Ind],mat1#[Ind].y*s_r_c#[Ind]+mati2#[Ind].y*s_r_cp#[Ind],mat1#[Ind].z*s_r_c#[Ind]+mati2#[Ind].z*s_r_cp#[Ind],mat1#[Ind].w*s_r_c#[Ind]+mati2#[Ind].w*s_r_cp#[Ind]);","   }","   else { result = mat1#[Ind]; }","}"].join("\n");return i=Shader.Replace(i,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=i,this},ShaderBuilder.prototype.Reference=function(e,t){null==Shader.Me.References&&(Shader.Me.References="");var r="vec4 resHelp#[Ind] = result;";return Shader.Me.References.indexOf(","+e+",")==-1&&(Shader.Me.References+=","+e+",",r+=" vec4 result_"+e+" = vec4(0.);\n                "),r+=null==t?"  result_"+e+" = result;":t+"\n                 result_"+e+" = result;",r+="result = resHelp#[Ind] ;",r=Shader.Replace(r,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=r,this},ShaderBuilder.prototype.ReplaceColor=function(e,t,r,i){Shader.Indexer++,i=Shader.Def(i,{});var n=Shader.Def(i.rangeStep,-.28),a=Shader.Def(i.rangePower,0),s=Shader.Def(i.colorIndex,0),o=Shader.Def(i.colorStep,1),l=Shader.Def(i.indexToEnd,!1),h=" > 0.5 + "+Shader.Print(n)+" ",u=" < 0.5 - "+Shader.Print(n)+" ",d="((result_"+e+".x*"+Shader.Print(o)+"-"+Shader.Print(s)+")>1.0 ? 0. : max(0.,(result_"+e+".x*"+Shader.Print(o)+"-"+Shader.Print(s)+")))",c="((result_"+e+".y*"+Shader.Print(o)+"-"+Shader.Print(s)+")>1.0 ? 0. : max(0.,(result_"+e+".y*"+Shader.Print(o)+"-"+Shader.Print(s)+")))",A="((result_"+e+".z*"+Shader.Print(o)+"-"+Shader.Print(s)+")>1.0 ? 0. : max(0.,(result_"+e+".z*"+Shader.Print(o)+"-"+Shader.Print(s)+")))";l&&(d="min(1.0, max(0.,(result_"+e+".x*"+Shader.Print(o)+"-"+Shader.Print(s)+")))",c="min(1.0, max(0.,(result_"+e+".y*"+Shader.Print(o)+"-"+Shader.Print(s)+")))",A="min(1.0, max(0.,(result_"+e+".z*"+Shader.Print(o)+"-"+Shader.Print(s)+")))");var p=" && ",f=" + ",S="",v="";switch(t){case Helper.White:v=d+h+p+c+h+p+A+h,S="("+d+f+c+f+A+")/3.0";break;case Helper.Cyan:v=d+u+p+c+h+p+A+h,S="("+c+f+A+")/2.0 - ("+d+")/1.0";break;case Helper.Pink:v=d+h+p+c+u+p+A+h,S="("+d+f+A+")/2.0 - ("+c+")/1.0";break;case Helper.Yellow:v=d+h+p+c+h+p+A+u,S="("+d+f+c+")/2.0 - ("+A+")/1.0";break;case Helper.Blue:v=d+u+p+c+u+p+A+h,S="("+A+")/1.0 - ("+d+f+c+")/2.0";break;case Helper.Red:v=d+h+p+c+u+p+A+u,S="("+d+")/1.0 - ("+c+f+A+")/2.0";break;case Helper.Green:v=d+u+p+c+h+p+A+u,S="("+c+")/1.0 - ("+d+f+A+")/2.0";break;case Helper.Black:v=d+u+p+c+u+p+A+u,S="1.0-("+d+f+c+f+A+")/3.0"}var m=" if( "+v+" ) { vec4 oldrs#[Ind] = vec4(result);float al#[Ind] = max(0.0,min(1.0,"+S+"+("+Shader.Print(a)+"))); float  l#[Ind] =  1.0-al#[Ind];  "+r+" result = result*al#[Ind] +  oldrs#[Ind] * l#[Ind];    }";return m=Shader.Replace(m,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=m,this},ShaderBuilder.prototype.Blue=function(e,t,r){return this.ReplaceColor(e,Helper.Blue,t,r)},ShaderBuilder.prototype.Cyan=function(e,t,r){return this.ReplaceColor(e,Helper.Cyan,t,r)},ShaderBuilder.prototype.Red=function(e,t,r){return this.ReplaceColor(e,Helper.Red,t,r)},ShaderBuilder.prototype.Yellow=function(e,t,r){return this.ReplaceColor(e,Helper.Yellow,t,r)},ShaderBuilder.prototype.Green=function(e,t,r){return this.ReplaceColor(e,Helper.Green,t,r)},ShaderBuilder.prototype.Pink=function(e,t,r){return this.ReplaceColor(e,Helper.Pink,t,r)},ShaderBuilder.prototype.White=function(e,t,r){return this.ReplaceColor(e,Helper.White,t,r)},ShaderBuilder.prototype.Black=function(e,t,r){return this.ReplaceColor(e,Helper.Black,t,r)},ShaderBuilder.prototype.ReflectCube=function(e){Shader.Indexer++,e=Shader.Def(e,{path:"/images/cube/a"});var t=Shader.Me.GetCubeMapIndex(e.path);t==-1?Shader.Me.Setting.TextureCubes.push({key:e.path,inVertex:e.useInVertex,inFragment:!0}):Shader.Me.Setting.TextureCubes[t].inVertex=!0,t=Shader.Me.GetCubeMapIndex(e.path),e.normal=Shader.Def(e.normal,Normals.Map),e.alpha=Shader.Def(e.alpha,!1),e.bias=Shader.Def(e.bias,"0."),e.normalLevel=Shader.Def(e.normalLevel,1),e.rotation=Shader.Def(e.rotation,{x:0,y:0,z:0}),e.scaleX=Shader.Def(e.scaleX,1),e.scaleY=Shader.Def(e.scaleY,1),e.useInVertex=Shader.Def(e.useInVertex,!1),e.x=Shader.Def(e.x,0),e.y=Shader.Def(e.y,0),e.uv=Shader.Def(e.uv,ShaderMaterialHelperStatics.Uv),e.reflectMap=Shader.Def(e.reflectMap,"1."),Shader.Me.Setting.Center=!0,Shader.Me.Setting.Camera=!0,Shader.Me.Setting.ReflectMatrix=!0;var r="";if(e.equirectangular){e.path=Shader.Def(e.path,"/images/cube/roofl1.jpg");var t=Shader.Me.GetMapIndex(e.path);t==-1?Shader.Me.Setting.Texture2Ds.push({key:e.path,inVertex:e.useInVertex,inFragment:!0}):Shader.Me.Setting.Texture2Ds[t].inVertex=!0,t=Shader.Me.GetMapIndex(e.path),Shader.Me.Setting.VertexWorld=!0,Shader.Me.Setting.FragmentWorld=!0,r=" vec3 nWorld#[Ind] = normalize( mat3( world[0].xyz, world[1].xyz, world[2].xyz ) *  "+e.normal+");  vec3 vReflect#[Ind] = normalize( reflect( normalize(  "+ShaderMaterialHelperStatics.Camera+"- vec3(world * vec4("+ShaderMaterialHelperStatics.Position+", 1.0))),  nWorld#[Ind] ) ); float yaw#[Ind] = .5 - atan( vReflect#[Ind].z, -1.* vReflect#[Ind].x ) / ( 2.0 * 3.14159265358979323846264);   float pitch#[Ind] = .5 - atan( vReflect#[Ind].y, length( vReflect#[Ind].xz ) ) / ( 3.14159265358979323846264);   vec3 color#[Ind] = texture2D( "+ShaderMaterialHelperStatics.Texture2D+t+", vec2( yaw#[Ind], pitch#[Ind])"+(null==e.bias||"0."==Shader.Print(e.bias)?"":","+Shader.Print(e.bias))+" ).rgb; result = vec4(color#[Ind] ,1.);"}else e.path=Shader.Def(e.path,"/images/cube/a"),r=["vec3 viewDir#[Ind] =  "+ShaderMaterialHelperStatics.Position+" - "+ShaderMaterialHelperStatics.Camera+" ;","  viewDir#[Ind] =r_x(viewDir#[Ind] ,"+Shader.Print(e.rotation.x)+",  "+ShaderMaterialHelperStatics.Center+");","  viewDir#[Ind] =r_y(viewDir#[Ind] ,"+Shader.Print(e.rotation.y)+","+ShaderMaterialHelperStatics.Center+");","  viewDir#[Ind] =r_z(viewDir#[Ind] ,"+Shader.Print(e.rotation.z)+","+ShaderMaterialHelperStatics.Center+");","vec3 coords#[Ind] = "+(e.refract?"refract":"reflect")+"(viewDir#[Ind]"+(e.revers?"*vec3(1.0)":"*vec3(-1.0)")+", "+e.normal+" "+(e.refract?",("+Shader.Print(e.refractMap)+")":"")+" )+"+ShaderMaterialHelperStatics.Position+"; ","vec3 vReflectionUVW#[Ind] = vec3( "+ShaderMaterialHelperStatics.ReflectMatrix+" *  vec4(coords#[Ind], 0)); ","vec3 rc#[Ind]= textureCube("+ShaderMaterialHelperStatics.TextureCube+t+", vReflectionUVW#[Ind] "+(null==e.bias||"0."==Shader.Print(e.bias)?"":","+Shader.Print(e.bias))+").rgb;","result =result  + vec4(rc#[Ind].x ,rc#[Ind].y,rc#[Ind].z, "+(e.alpha?"(rc#[Ind].x+rc#[Ind].y+rc#[Ind].z)/3.0 ":"1.")+")*(min(1.,max(0.,"+Shader.Print(e.reflectMap)+")));  "].join("\n            ");return r=Shader.Replace(r,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=r,this},ShaderBuilder.prototype.NormalMap=function(e,t){return Shader.Me.Setting.NormalOpacity=e,Shader.Me.Setting.NormalMap=t,this},ShaderBuilder.prototype.SpecularMap=function(e){return Shader.Me.Setting.SpecularMap=e,this},ShaderBuilder.prototype.Instance=function(){var e=Shader.Me.Setting,t=new ShaderBuilder;return t.Parent=Shader.Me,t.Setting=e,t},ShaderBuilder.prototype.Reflect=function(e,t){return t=Shader.Def(t,1),this.Multi(["result = result;",{result:this.Instance().ReflectCube(e).Build(),opacity:t}],!0)},ShaderBuilder.prototype.Light=function(e){e=Shader.Def(e,{}),e.color=Shader.Def(e.color,{r:1,g:1,b:1,a:1}),e.darkColorMode=Shader.Def(e.darkColorMode,!1),e.direction=Shader.Def(e.direction,"vec3(sin(time*0.02)*28.,sin(time*0.02)*8.+10.,cos(time*0.02)*28.)"),e.normal=Shader.Def(e.normal,Normals.Map),e.rotation=Shader.Def(e.rotation,{x:0,y:0,z:0}),e.specular=Shader.Def(e.specular,Speculars.Map),e.specularLevel=Shader.Def(e.specularLevel,1),e.specularPower=Shader.Def(e.specularPower,1),e.phonge=Shader.Def(e.phonge,0),e.phongePower=Shader.Def(e.phongePower,1),e.phongeLevel=Shader.Def(e.phongeLevel,1),e.supplement=Shader.Def(e.supplement,!1),e.reducer=Shader.Def(e.reducer,"1.");var t=e.color;e.darkColorMode&&(t.a=1-t.a,t.r=1-t.r,t.g=1-t.g,t.b=1-t.b,t.a=t.a-1),Shader.Indexer++,Shader.Me.Setting.Camera=!0,Shader.Me.Setting.FragmentWorld=!0,Shader.Me.Setting.VertexWorld=!0,Shader.Me.Setting.Helpers=!0,Shader.Me.Setting.Center=!0;var r=Shader.Join(["  vec3 dir#[Ind] = normalize(  vec3(world * vec4("+ShaderMaterialHelperStatics.Position+",1.)) - "+ShaderMaterialHelperStatics.Camera+");","  dir#[Ind] =r_x(dir#[Ind] ,"+Shader.Print(e.rotation.x)+",vec3("+ShaderMaterialHelperStatics.Center+"));","  dir#[Ind] =r_y(dir#[Ind] ,"+Shader.Print(e.rotation.y)+",vec3("+ShaderMaterialHelperStatics.Center+"));","  dir#[Ind] =r_z(dir#[Ind] ,"+Shader.Print(e.rotation.z)+",vec3("+ShaderMaterialHelperStatics.Center+"));","  vec4 p1#[Ind] = vec4("+e.direction+",.0);                                ","  vec4 c1#[Ind] = vec4("+Shader.Print(t.r)+","+Shader.Print(t.g)+","+Shader.Print(t.b)+",0.0); ","  vec3 vnrm#[Ind] = normalize(vec3(world * vec4("+e.normal+", 0.0)));          ","  vec3 l#[Ind]= normalize(p1#[Ind].xyz "+(e.parallel?"":"- vec3(world * vec4("+ShaderMaterialHelperStatics.Position+",1.))  ")+");   ","  vec3 vw#[Ind]= normalize(camera -  vec3(world * vec4("+ShaderMaterialHelperStatics.Position+",1.)));  ","  vec3 aw#[Ind]= normalize(vw#[Ind]+ l#[Ind]);  ","  float sc#[Ind]= max(0.,min(1., dot(vnrm#[Ind], aw#[Ind])));   ","  sc#[Ind]= pow(sc#[Ind]*min(1.,max(0.,"+Shader.Print(e.specular)+")), ("+Shader.Print(1e3*e.specularPower)+"))/"+Shader.Print(e.specularLevel)+" ;  "," float  ph#[Ind]= pow("+Shader.Print(e.phonge)+"*2., ("+Shader.Print(e.phongePower)+"*0.3333))/("+Shader.Print(e.phongeLevel)+"*3.) ;  ","  float ndl#[Ind] = max(0., dot(vnrm#[Ind], l#[Ind]));                            ","  float ls#[Ind] = "+(e.supplement?"1.0 -":"")+"max(0.,min(1.,ndl#[Ind]*ph#[Ind]*("+Shader.Print(e.reducer)+"))) ;         ","  result  += vec4( c1#[Ind].xyz*( ls#[Ind])*"+Shader.Print(t.a)+" ,  ls#[Ind]); ","  float ls2#[Ind] = "+(e.supplement?"0.*":"1.*")+"max(0.,min(1., sc#[Ind]*("+Shader.Print(e.reducer)+"))) ;         ","  result  += vec4( c1#[Ind].xyz*( ls2#[Ind])*"+Shader.Print(t.a)+" ,  ls2#[Ind]); "]);return r=Shader.Replace(r,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=r,this},ShaderBuilder.prototype.Effect=function(e){var t=Shader.Def(e,{});Shader.Indexer++;var r=["vec4 res#[Ind] = vec4(0.);","res#[Ind].x = "+(t.px?Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.px,"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+";":" result.x;"),"res#[Ind].y = "+(t.py?Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.py,"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+";":" result.y;"),"res#[Ind].z = "+(t.pz?Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pz,"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+";":" result.z;"),"res#[Ind].w = "+(t.pw?Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pw,"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+";":" result.w;"),"res#[Ind]  = "+(t.pr?" vec4("+Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pr,"pr","res#[Ind].x"),"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+","+Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pr,"pr","res#[Ind].y"),"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+","+Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pr,"pr","res#[Ind].z"),"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+","+Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(Shader.Replace(t.pr,"pr","res#[Ind].w"),"px","result.x"),"py","result.y"),"pz","result.z"),"pw","result.w")+");":" res#[Ind]*1.0;"),"result = res#[Ind] ;"].join("\n");return r=Shader.Replace(r,"#[Ind]","_"+Shader.Indexer+"_"),this.Body=Shader.Def(this.Body,""),this.Body+=r,this},ShaderBuilder.prototype.IdColor=function(e,t){var r={r:0,g:0,b:0};return r=Shader.torgb(1*e.valueOf(),255),this.Body=Shader.Def(this.Body,""),this.Body+="result = vec4("+Shader.Print(r.r)+","+Shader.Print(r.g)+","+Shader.Print(Math.max(r.b,0))+","+Shader.Print(t)+");",this},ShaderBuilder.prototype.Discard=function(){return this.Body=Shader.Def(this.Body,""),this.Body+="discard;",this},ShaderBuilder})();BABYLONX.ShaderBuilder=ShaderBuilder})(BABYLONX||(BABYLONX={}));var QI;!(function(e){var t=(function(){function e(t,r,i){this.rotation=t,this.translation=r,this.scale=i&&e.needScale(i)?i:e.One}return e.prototype.setBasisDiffs=function(e){this.rotationBasisDiff=this.rotation.subtract(e.rotation),this.translationBasisDiff=this.translation.subtract(e.translation),this.scaleBasisDiff=this.scale.subtract(e.scale)},e.prototype.setBasisRatios=function(t){this.rotationBasisRatio=this.rotation.multiply(BABYLON.Quaternion.Inverse(t.rotation)),this.translationBasisRatio=BABYLON.Vector3.Zero(),0!==t.translation.x&&(this.translationBasisRatio.x=this.translation.x/t.translation.x),0!==t.translation.y&&(this.translationBasisRatio.y=this.translation.y/t.translation.y),0!==t.translation.z&&(this.translationBasisRatio.z=this.translation.z/t.translation.z),this.scale.equals(e.One)&&t.scale.equals(e.One)?this.scaleBasisRatio=e.One:(this.scaleBasisRatio=BABYLON.Vector3.Zero(),0!==t.scale.x&&(this.scaleBasisRatio.x=this.scale.x/t.scale.x),0!==t.scale.y&&(this.scaleBasisRatio.y=this.scale.y/t.scale.y),0!==t.scale.z&&(this.scaleBasisRatio.z=this.scale.z/t.scale.z))},e.prototype.getRelativePose=function(t){if(t.rotationBasisDiff){var r=t.rotationBasisDiff.multiply(this.rotationBasisRatio).add(this.rotation),i=t.translationBasisDiff.multiply(this.translationBasisRatio).addInPlace(this.translation),n=t.scaleBasisDiff.multiply(this.scaleBasisRatio).addInPlace(this.scale);return new e(r,i,n)}return this},e.prototype.toMatrix=function(){return BABYLON.Matrix.Compose(this.scale?this.scale:e.One,this.rotation,this.translation)},e.prototype.equals=function(e,t,r){return!!this.rotation.equals(e)&&(!!this.translation.equals(t)&&!!this.scale.equals(r))},e.fromMatrix=function(t){var r=new BABYLON.Vector3(0,0,0),i=new BABYLON.Quaternion,n=new BABYLON.Vector3(0,0,0);return t.decompose(r,i,n),new e(i,n,r)},e.needScale=function(e){return Math.abs(1-e.x)>1e-4||Math.abs(1-e.y)>1e-4||Math.abs(1-e.z)>1e-4},e})();t.One=new BABYLON.Vector3(1,1,1),e.MatrixComp=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function e(t,r,i,n){this.name=t,this.dimensionsAtRest=r,this.nameOfRoot=i,this.boneLengths=n,this.poses={},Object.freeze(this.boneLengths),this.nBones=Object.keys(this.boneLengths).length,Object.freeze(this.nBones),e._libraries[this.name]=this}return e.getLibraryByName=function(t){return e._libraries[t]},e.createLibrary=function(t,r,i,n){var a=e._libraries[t];if(a){if(Object.keys(n).length!==a.nBones)return BABYLON.Tools.Error("QI.SkeletonPoseLibrary:  library("+t+") already created; # of has Bones mis-match; "+Object.keys(n).length+", but "+a.nBones+" already"),null;for(var s in n){if(!a.boneLengths[s])return BABYLON.Tools.Error("QI.SkeletonPoseLibrary:  Bone("+s+") not found in library already created"),null;if(a.boneLengths[s]!==n[s])return BABYLON.Tools.Error("QI.SkeletonPoseLibrary:  Bone("+s+") length mis-match in library already created"),null}return a}return new e(t,r,i,n)},e.prototype._addPose=function(e){if(this.poses[e.name])return void BABYLON.Tools.Error("QI.SkeletonPoseLibrary:  pose("+e.name+"), has already been added in library("+this.name+")");for(var t in e.targets)if(!this.boneLengths[t])return void BABYLON.Tools.Error("QI.SkeletonPoseLibrary:  pose("+e.name+"), has Bone("+t+") not found in library("+this.name+")");this.poses[e.name]=e,e.isSubPose?BABYLON.Tools.Log("QI.SkeletonPoseLibrary:  added sub-pose ("+this.name+"."+e.name+"), using "+Object.keys(e.targets).length+" bones"):BABYLON.Tools.Log("QI.SkeletonPoseLibrary:  added pose ("+this.name+"."+e.name+")")},e.prototype.getPoses=function(e){var t=new Array;for(var r in this.poses)this.poses[r].isSubPose&&e?t.push(r.replace(".sp","")):this.poses[r].isSubPose||e||t.push(r);return t},e})();t._libraries={},e.SkeletonPoseLibrary=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(){}return t.initialize=function(r){t._afterRenderAssigned||(r.registerAfterRender(t._manualAdvanceAfterRender),navigator.isCocoonJS&&(Cocoon.App.on("activated",t.resumeSystem),Cocoon.App.on("suspending",t.pauseSystem)),t._scene=r,t._afterRenderAssigned=!0,BABYLON.Tools.Log("Queued Interpolation Timeline Control system initialized, version: "+e.PovProcessor.Version))},t.change=function(e,r){void 0===r&&(r=24),t._isRealtime=e,t._manualFrameRate=r},t._manualAdvanceAfterRender=function(){var e=BABYLON.Tools.Now-t._lastFrame;if(t._lastFrame=BABYLON.Tools.Now,!t._systemPaused||t._resumeQueued)if(t._frameID++,t._isRealtime?t._now+=e*t._speed:t._now+=1e3/t._manualFrameRate,t._resumeQueued||BABYLON.Tools.Now-t._lastRun>t.CHANGED_TABS_THRESHOLD)t._systemPaused=t._resumeQueued=!1,t._systemResumeTime=t._now;else if(!t._isRealtime&&t.MP4Worker){var r=t._scene.getEngine();r.readPixels(0,0,r.getRenderWidth(),r.getRenderHeight())}t._isRealtime?t._privelegedNow+=e*t._speed:t._privelegedNow+=1e3/t._manualFrameRate,t._lastRun=BABYLON.Tools.Now},t.sizeFor720=function(){t._sizeForRecording(1280,720)},t.sizeFor1080=function(){t._sizeForRecording(1920,1080)},t._sizeForRecording=function(e,r){t._scene.getEngine().setSize(e,r)},Object.defineProperty(t,"manualFrameRate",{get:function(){return t._manualFrameRate},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isRealtime",{get:function(){return t._isRealtime},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Now",{get:function(){return t._now},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PrivilegedNow",{get:function(){return t._privelegedNow},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FrameID",{get:function(){return t._frameID},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Speed",{get:function(){return t._speed},set:function(e){if(!t._isRealtime)return void BABYLON.Tools.Error("TimelineControl: changing speed only supported for realtime mode");t._speed=e;for(var r=t._scene.mainSoundTrack.soundCollection,i=0,n=r.length;i<n;i++)r[i].setPlaybackRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"scene",{get:function(){return t._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isSystemPaused",{get:function(){return t._systemPaused},enumerable:!0,configurable:!0}),t.pauseSystem=function(e){t._systemPaused=!0,t._scene.audioEnabled=e},t.resumeSystem=function(){t._resumeQueued=!0,t._scene.audioEnabled=!0},Object.defineProperty(t,"SystemResumeTime",{get:function(){return t._systemResumeTime},enumerable:!0,configurable:!0}),t})();t._isRealtime=!0,t._now=BABYLON.Tools.Now,t._privelegedNow=BABYLON.Tools.Now,t._lastRun=BABYLON.Tools.Now,t._lastFrame=BABYLON.Tools.Now,t._frameID=0,t._resumeQueued=!1,t._speed=1,t.CHANGED_TABS_THRESHOLD=500,t._systemResumeTime=0,t._systemPaused=!1,e.TimelineControl=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function e(t){void 0===t&&(t=e.MODE_IN),this._mode=t}return e.prototype.getCompletionMilestone=function(t){if(t<=0)return 0;if(t>=1)return 1;switch(this._mode){case e.MODE_IN:return this._compute(t);case e.MODE_OUT:return 1-this._compute(1-t)}return t>=.5?.5*(1-this._compute(2*(1-t)))+.5:.5*this._compute(2*t)},e.prototype._compute=function(e){return 0},e})();t.MODE_IN=0,t.MODE_OUT=1,t.MODE_INOUT=2,e.Pace=t;var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return e=Math.max(0,Math.min(1,e)),1-Math.sqrt(1-e*e)},t})(t);e.CirclePace=r;var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return e*e*e},t})(t);e.CubicPace=i;var n=(function(e){function r(r,i,n){void 0===r&&(r=3),void 0===i&&(i=3),void 0===n&&(n=t.MODE_IN);var a=e.call(this,n)||this;return a.oscillations=r,a.springiness=i,a}return __extends(r,e),r.prototype._compute=function(e){var t,r=Math.max(0,this.oscillations),i=Math.max(0,this.springiness);return t=0==i?e:(Math.exp(i*e)-1)/(Math.exp(i)-1),t*Math.sin((6.283185307179586*r+1.5707963267948966)*e)},r})(t);e.ElasticPace=n;var a=(function(e){function r(r,i){void 0===r&&(r=2),void 0===i&&(i=t.MODE_IN);var n=e.call(this,i)||this;return n.exponent=r,n}return __extends(r,e),r.prototype._compute=function(e){return this.exponent<=0?e:(Math.exp(this.exponent*e)-1)/(Math.exp(this.exponent)-1);
},r})(t);e.ExponentialPace=a;var s=(function(e){function r(r,i){void 0===r&&(r=2),void 0===i&&(i=t.MODE_IN);var n=e.call(this,i)||this;return n.power=r,n}return __extends(r,e),r.prototype._compute=function(e){var t=Math.max(0,this.power);return Math.pow(e,t)},r})(t);e.PowerPace=s;var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return e*e},t})(t);e.QuadraticPace=o;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return e*e*e*e},t})(t);e.QuarticPace=l;var h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return e*e*e*e*e},t})(t);e.QuinticPace=h;var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._compute=function(e){return 1-Math.sin(1.5707963267948966*(1-e))},t})(t);e.SinePace=u;var d=(function(e){function r(r,i,n,a,s){void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===a&&(a=1),void 0===s&&(s=t.MODE_IN);var o=e.call(this,s)||this;return o.x1=r,o.y1=i,o.x2=n,o.y2=a,o}return __extends(r,e),r.prototype._compute=function(e){return BABYLON.BezierCurve.interpolate(e,this.x1,this.y1,this.x2,this.y2)},r})(t);e.BezierCurvePace=d;var c=(function(e){function r(r,i){var n=e.call(this,t.MODE_IN)||this;n.completionRatios=r,n.durationRatios=i,n.completionRatios instanceof Array&&n.durationRatios instanceof Array||BABYLON.Tools.Error("QI.SteppedPace: ratios not arrays"),n.completionRatios.length!==n.durationRatios.length&&BABYLON.Tools.Error("QI.SteppedPace: ratio arrays not of equal length"),n.steps=n.completionRatios.length,0===n.steps&&BABYLON.Tools.Error("QI.SteppedPace: ratio arrays cannot be empty");for(var a,s,o=-1,l=0;l<n.steps;l++)a=n.completionRatios[l],s=n.durationRatios[l],(a<=0||s<=0)&&BABYLON.Tools.Error("QI.SteppedPace: ratios must be > 0"),(a>1||s>1)&&BABYLON.Tools.Error("QI.SteppedPace: ratios must be <= 1"),o>=s&&BABYLON.Tools.Error("QI.SteppedPace: durationRatios must be in increasing order"),o=s;1===a&&1===s||BABYLON.Tools.Error("QI.SteppedPace: final ratios must be 1"),n.incremetalCompletionBetweenSteps=[n.completionRatios[0]],n.incremetalDurationBetweenSteps=[n.durationRatios[0]];for(var l=1;l<n.steps;l++)n.incremetalCompletionBetweenSteps.push(n.completionRatios[l]-n.completionRatios[l-1]),n.incremetalDurationBetweenSteps.push(n.durationRatios[l]-n.durationRatios[l-1]);return Object.freeze(n),n}return __extends(r,e),r.prototype.getCompletionMilestone=function(e){if(e<=0)return 0;if(e>=1)return 1;for(var t=0;t<this.steps&&!(e<this.durationRatios[t]);t++);var r=t>0?this.completionRatios[t-1]:0,i=t>0?this.durationRatios[t-1]:0,n=(e-i)/this.incremetalDurationBetweenSteps[t];return r+n*this.incremetalCompletionBetweenSteps[t]},r})(t);e.SteppedPace=c})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(r,i,n,a){return void 0===n&&(n=null),this._milliDuration=r,this.movePOV=i,this.rotatePOV=n,this._startTime=-1,this._currentDurationRatio=t._BLOCKED,this._groupName=e.PovProcessor.POV_GROUP_NAME,this.muteSound=!1,this._milliDuration<=0?void BABYLON.Tools.Error("MotionEvent: milliDuration must > 0"):(this.options=a||{millisBefore:0,absoluteMovement:!1,absoluteRotation:!1,pace:t.LINEAR,noStepWiseMovement:!1,mirrorAxes:null,subposes:null,revertSubposes:!1,privilegedEvent:!1},this.options.millisBefore=this.options.millisBefore||0,this.options.absoluteMovement=this.options.absoluteMovement||!1,this.options.absoluteRotation=this.options.absoluteRotation||!1,this.options.pace=this.options.pace||t.LINEAR,this.options.noStepWiseMovement=this.options.noStepWiseMovement||!1,this.options.mirrorAxes=this.options.mirrorAxes||null,this.options.subposes=this.options.subposes||null,this.options.revertSubposes=this.options.revertSubposes||!1,void this.setProratedWallClocks(1,!1))}return t.prototype.toString=function(){return"group: "+this._groupName+", type: "+this.getClassName()+", duration: "+this._milliDuration+", move: "+(this.movePOV?this.movePOV.toString():"None")+", rotate: "+(this.rotatePOV?this.rotatePOV.toString():"None, sound: "+(this.options.sound?this.options.sound.name:"None")+", mustComplete event: "+(this.options.requireCompletionOf?"Yes":"No")+", wait: "+this.options.millisBefore+", non-linear pace: "+(this.options.pace!==t.LINEAR)+", absoluteMovement: "+this.options.absoluteMovement+", absoluteRotation: "+this.options.absoluteRotation+", noStepWiseMovement: "+this.options.noStepWiseMovement)},t.prototype.getClassName=function(){return"PoseEvent"},t.prototype.activate=function(e){void 0===e&&(e=0),this._startTime=this._now,e>0&&(e/=5,this._startTime-=e<this._milliDuration/10?e:this._milliDuration/10),this._currentDurationRatio=this._syncPartner||this.options.requireCompletionOf||this.options.sound&&!this.muteSound?t._BLOCKED:this._proratedMillisBefore>0?t._WAITING:t._READY},t.prototype.getCompletionMilestone=function(){if(this._currentDurationRatio===t._COMPLETE)return t._COMPLETE;if(this._currentDurationRatio===t._BLOCKED){if(!this.isSoundReady()||!this.isPriorComplete())return t._BLOCKED;this._startTime=this._now,this._currentDurationRatio=t._SYNC_BLOCKED}if(this._currentDurationRatio===t._SYNC_BLOCKED){if(this._syncPartner){if(!this._syncPartner.isSyncBlocked())return t._SYNC_BLOCKED;this._startTime=this._now,this._syncPartner._syncReady(this._startTime)}this._currentDurationRatio=t._WAITING}if(this._millisSoFar=this._now-this._startTime,this._currentDurationRatio===t._WAITING){var r=this._millisSoFar-this._proratedMillisBefore;if(!(r>=0))return t._WAITING;this._startTime=this._now-r,this._millisSoFar=r,this.options.sound&&!this.muteSound&&(this.options.sound.setPlaybackRate(e.TimelineControl.Speed),this.options.sound.play())}return this._currentDurationRatio=this._millisSoFar/this._proratedMilliDuration,this._currentDurationRatio>t._COMPLETE&&(this._currentDurationRatio=t._COMPLETE),this.pace.getCompletionMilestone(this._currentDurationRatio)},t.prototype.isSoundReady=function(){return!this.options.sound||this.muteSound||this.options.sound._isReadyToPlay},t.prototype.isPriorComplete=function(){return!this.options.requireCompletionOf||this.options.requireCompletionOf.isComplete()},t.prototype.resumePlay=function(){if(this._currentDurationRatio!==t._COMPLETE&&this._currentDurationRatio!==t._BLOCKED){this._startTime;this._startTime=this._now-this._millisSoFar,this.options.sound&&!this.muteSound&&this.options.sound.isPaused&&this.options.sound.play()}},t.prototype.pause=function(){this.options.sound&&!this.options.privilegedEvent&&this.options.sound.pause()},t.prototype.setSyncPartner=function(e){this._syncPartner=e,e._syncPartner=this},t.prototype._syncReady=function(e){this._startTime=e,this._currentDurationRatio=t._WAITING},t.prototype.isBlocked=function(){return this._currentDurationRatio<=t._BLOCKED},t.prototype.isSyncBlocked=function(){return this._currentDurationRatio===t._SYNC_BLOCKED},t.prototype.isWaiting=function(){return this._currentDurationRatio===t._WAITING},t.prototype.isComplete=function(){return this._currentDurationRatio===t._COMPLETE},t.prototype.isExecuting=function(){return this._currentDurationRatio>t._READY&&this._currentDurationRatio<t._COMPLETE},Object.defineProperty(t.prototype,"milliDuration",{get:function(){return this._milliDuration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"millisBefore",{get:function(){return this.options.millisBefore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pace",{get:function(){return this.options.pace},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"syncPartner",{get:function(){return this._syncPartner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_now",{get:function(){return this.options.privilegedEvent?e.TimelineControl.PrivilegedNow:e.TimelineControl.Now},enumerable:!0,configurable:!0}),t.prototype.setProratedWallClocks=function(e,t){this._proratedMilliDuration=this._milliDuration*e,this._proratedMillisBefore=this.millisBefore>0||!t?Math.abs(this.millisBefore)*e:0},Object.defineProperty(t,"BLOCKED",{get:function(){return t._BLOCKED},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SYNC_BLOCKED",{get:function(){return t._SYNC_BLOCKED},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WAITING",{get:function(){return t._WAITING},enumerable:!0,configurable:!0}),Object.defineProperty(t,"READY",{get:function(){return t._READY},enumerable:!0,configurable:!0}),Object.defineProperty(t,"COMPLETE",{get:function(){return t._COMPLETE},enumerable:!0,configurable:!0}),t})();t.LINEAR=new e.SteppedPace([1],[1]),t._BLOCKED=-30,t._SYNC_BLOCKED=-20,t._WAITING=-10,t._READY=0,t._COMPLETE=1,e.MotionEvent=t;var r=(function(t){function r(r,i,n){void 0===i&&(i=e.PovProcessor.POV_GROUP_NAME);var a=t.call(this,r,null,null,{sound:n})||this;return a._groupName=i,a}return __extends(r,t),r.prototype.getClassName=function(){return"Stall"},r})(t);e.Stall=r})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e._paused=!1,e}return __extends(r,t),r.prototype.initialize=function(t,r){if(void 0===t&&(t=0),this.activate(t),r){e.TimelineControl.initialize(r),this.options.privilegedEvent&&e.TimelineControl.pauseSystem("undefined"!=typeof this.options.sound);var i=this;this._registeredFN=function(){i._beforeRender()},r.registerBeforeRender(this._registeredFN),this._scene=r}},r.prototype.getClassName=function(){return"NonMotionEvent"},r.prototype._beforeRender=function(){if(!this.options.privilegedEvent){if(e.TimelineControl.isSystemPaused)return void(this._paused||(this.pause(),this._paused=!0));this._paused&&(this._paused=!1,this.resumePlay())}var t=this.getCompletionMilestone();t<0||(this._incrementallyUpdate(t),this.isComplete()&&this.clear())},r.prototype.clear=function(){this._scene&&(this._paused=!1,this._scene.unregisterBeforeRender(this._registeredFN),this._scene=null,this.options.privilegedEvent&&e.TimelineControl.resumeSystem()),this._alsoCleanFunc&&this._alsoCleanFunc()},r.prototype.alsoClean=function(e){this._alsoCleanFunc=e},r.prototype._incrementallyUpdate=function(e){},r})(e.MotionEvent);e.NonMotionEvent=t;var r=(function(e){function t(r,i,n,a,s){var o=e.call(this,a,null,null,s)||this;if(o._object=r,o._property=i,o._targetValue=n,"number"==typeof o._targetValue)o._datatype=t._NUMBER_TYPE;else{if(!(o._targetValue instanceof BABYLON.Vector3))throw"Datatype not supported";o._datatype=t._VEC3_TYPE}return o}return __extends(t,e),t.prototype.getClassName=function(){return"PropertyEvent"},t.prototype.initialize=function(r,i){switch(void 0===r&&(r=0),this._datatype){case t._NUMBER_TYPE:this._initialValue=this._object[this._property];break;case t._VEC3_TYPE:this._initialValue=this._object[this._property].clone()}this._initialValue=this._object[this._property],e.prototype.initialize.call(this,r,i)},t.prototype._incrementallyUpdate=function(e){switch(this._datatype){case t._NUMBER_TYPE:this._object[this._property]=this._initialValue+(this._targetValue-this._initialValue)*e;break;case t._VEC3_TYPE:this._object[this._property]=BABYLON.Vector3.Lerp(this._initialValue,this._targetValue,e)}},t})(t);r._NUMBER_TYPE=1,r._VEC3_TYPE=2,e.PropertyEvent=r;var i=(function(e){function t(t,r,i){var n=e.call(this,r,null,null,i)||this;return n._callback=t,n}return __extends(t,e),t.prototype.getClassName=function(){return"RecurringCallbackEvent"},t.prototype._incrementallyUpdate=function(e){this._callback(e)},t})(t);e.RecurringCallbackEvent=i})(QI||(QI={}));var QI;!(function(e){var t=(function(e){function t(t,r,i,n,a,s){var o=e.call(this,t,s)||this;return o._target=r,o._eSeries=i,o._clearQueue=n,o._stopCurrentSeries=a,o}return __extends(t,e),t.prototype.execute=function(e){this._target.queueEventSeries(this._eSeries,this._clearQueue,this._stopCurrentSeries)},t})(BABYLON.Action);e.SeriesAction=t;var r=(function(){function e(e){this.groupName=e,this._indexInRun=-99,this._highestIndexInRun=-1}return e.prototype.isReady=function(){return this._indexInRun===-1},e.prototype.runComplete=function(){return this._indexInRun>this._highestIndexInRun},e.prototype.activate=function(){this._indexInRun=-1},e})(),i=(function(){function t(t,r,i,n,a){void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=e.PovProcessor.POV_GROUP_NAME),void 0===a&&(a=!1),this._events=t,this._nRepeats=r,this._initialWallclockProrating=i,this._groupForFuncActions=n,this._debug=a,this._partnerReady=!0,this._groups=new Array,this._nGroups=0,this._nEvents=this._events.length,this._prorating=1!==this._initialWallclockProrating,1===this._nRepeats&&this._prorating&&BABYLON.Tools.Warn("EventSeries: clock prorating ignored when # of repeats is 1");for(var s,o=0;o<this._nEvents;o++){if(s=!1,this._events[o]instanceof e.MotionEvent?s=!0:this._events[o]instanceof BABYLON.Action?s=!0:"function"==typeof this._events[o]&&(s=!0),!s)return void BABYLON.Tools.Error("EventSeries:  events must either be a MotionEvent, Action, or function.  Problem idx: "+o);var l=this._events[o]instanceof e.MotionEvent?this._events[o]._groupName:this._groupForFuncActions;this._addGroupAsRequired(l,o),this._events[o]instanceof BABYLON.Action&&this._events[o]._prepare()}}return t.prototype.toString=function(){for(var e="number of events: "+this._nEvents+", repeats: "+this._nRepeats+", # groups: "+this._nGroups,t=0;t<this._nEvents;t++)e+="\n"+t+"- "+this._events[t].toString();return e},t.prototype._addGroupAsRequired=function(e,t){for(var i=null,n=0,a=this._groups.length;n<a;n++)if(this._groups[n].groupName===e){i=this._groups[n];break}null===i&&(i=new r(e),this._groups.push(i),this._nGroups++),i._highestIndexInRun=t},t.prototype.hasMultipleParticipants=function(){return this._nGroups>1},t.prototype.isGroupParticipating=function(e){for(var t=0;t<this._nGroups;t++)if(this._groups[t].groupName===e)return!0;return!1},t.prototype.setSeriesSyncPartner=function(e){this._syncPartner=e,this._partnerReady=!1,e._syncPartner=this},t.prototype._setPartnerReady=function(){this._syncPartner._partnerReady=!0},t.prototype.activate=function(e){this._indexInRun=-1,this._repeatCounter=0,this._proRatingThisRepeat=this._nRepeats>1?this._initialWallclockProrating:1,this._appyProrating(),this._everybodyReady=!0;for(var t=0;t<this._nGroups;t++)this._groups[t].groupName===e?this._groups[t].activate():this._everybodyReady=this._everybodyReady&&this._groups[t].isReady();this._everybodyReady&&this._syncPartner&&this._setPartnerReady(),this._debug&&BABYLON.Tools.Log("EventSeries: series activated by "+e+", _everybodyReady: "+this._everybodyReady+", _partnerReady: "+this._partnerReady)},t.prototype.hasMoreEvents=function(){return this._repeatCounter<this._nRepeats},t.prototype.nextEvent=function(e){if(!this._everybodyReady||!this._partnerReady)return this._debug&&BABYLON.Tools.Log("EventSeries: nextEvent, not everybody or partner ready"),null;if(this.hasMultipleParticipants())return this._nextGroupEvent(e);if(++this._indexInRun===this._nEvents){if(!(++this._repeatCounter<this._nRepeats))return null;this._indexInRun=0,this._prorating&&(this._proRatingThisRepeat=this._initialWallclockProrating+(1-this._initialWallclockProrating)*((this._repeatCounter+1)/this._nRepeats)),this._appyProrating()}return this._debug&&BABYLON.Tools.Log("EventSeries: nextEvent "+this._indexInRun+" in series returned"),this._events[this._indexInRun]},t.prototype._appyProrating=function(){for(var t=0;t<this._nEvents;t++)this._events[t]instanceof e.MotionEvent&&this._events[t].setProratedWallClocks(this._proRatingThisRepeat,this._repeatCounter>0)},t.prototype._nextGroupEvent=function(t){for(var r,i=!0,n=0;n<this._nGroups;n++)i=i&&this._groups[n].runComplete(),this._groups[n].groupName===t&&(r=this._groups[n]);if(i)if(++this._repeatCounter<this._nRepeats){for(var n=0;n<this._nGroups;n++)this._groups[n].activate();1!==this._initialWallclockProrating&&(this._proRatingThisRepeat=this._initialWallclockProrating+(1-this._initialWallclockProrating)*((this._repeatCounter+1)/this._nRepeats)),this._debug&&BABYLON.Tools.Log("EventSeries: set for repeat # "+this._repeatCounter)}else this._debug&&console.log("EventSeries: Series complete"),this._everybodyReady=!1,this._syncPartner&&(this._partnerReady=!1);if(r.runComplete())return null;if(r._indexInRun===r._highestIndexInRun)return r._indexInRun++,this._debug&&BABYLON.Tools.Log("EventSeries: group "+r.groupName+" has completed series."),null;for(var a=r._indexInRun+1;a<this._nEvents;a++){var t=this._events[a]instanceof e.MotionEvent?this._events[a]._groupName:this._groupForFuncActions;if(r.groupName===t)return r._indexInRun=a,this._events[a]instanceof e.MotionEvent&&this._events[a].setProratedWallClocks(this._proRatingThisRepeat,this._repeatCounter>0),this._debug&&BABYLON.Tools.Log("EventSeries: "+a+" in series returned: "+name+", allGroupsRunComplete "+i+", everybodyReady "+this._everybodyReady),this._events[a]}},t})();e.EventSeries=i})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(r,i){void 0===i&&(i=!1),this._node=r,this.skipRegistration=i,this._queue=new Array,this._currentSeries=null,this._currentStepInSeries=null,this._endOfLastFrameTs=-1,this._doingRotation=!1,this._rotationMatrix=new BABYLON.Matrix,this._doingMovePOV=!1,this._u=!1,this._name=t.POV_GROUP_NAME,this._lastResumeTime=0,this._instancePaused=!1;var n=this._node.getScene();if(e.TimelineControl.initialize(n),this._isproperty=null===this._node,this._isMesh=!this._isproperty&&this._node instanceof BABYLON.Mesh,this._isLight=!this._isproperty&&this._node instanceof BABYLON.Light,this._isCamera=!this._isproperty&&this._node instanceof BABYLON.Camera,this._isCamera){if(!(this._node instanceof BABYLON.TargetCamera))throw new Error("PovProcessor: Only TargetCamera subclasses can use Queued Interpolation");if(this._node.lockedTarget)throw new Error("PovProcessor: Camera with a lockedTarget cannot use Queued Interpolation");this._rotationProperty="rotation"}else if(this._isLight){if(!this._node.position||!this._node.direction)throw new Error("PovProcessor: Only SpotLight & DirectionalLight can use Queued Interpolation");this._rotationProperty="direction"}else this._isMesh&&(this._rotationProperty="rotation");var a=this;i||(this._registeredFN=function(){a._incrementallyMove()},n.registerBeforeRender(this._registeredFN))}return t.prototype.dispose=function(){this._node.getScene().unregisterBeforeRender(this._registeredFN)},t.prototype._incrementallyMove=function(){if(this._instancePaused||e.TimelineControl.isSystemPaused)return void(this._currentStepInSeries&&this._currentStepInSeries.pause());if(this._lastResumeTime<e.TimelineControl.SystemResumeTime&&(this._lastResumeTime=e.TimelineControl.SystemResumeTime,this.resumeInstancePlay()),null!==this._currentSeries&&this._currentSeries.hasMoreEvents()||this._nextEventSeries()){for(;null===this._currentStepInSeries||this._currentStepInSeries.isComplete();){var r=this._currentSeries.nextEvent(this._name);if(null===r)return;r instanceof BABYLON.Action&&this._isMesh?r.execute(BABYLON.ActionEvent.CreateNew(this._node)):"function"==typeof r?r.call():this._nextEvent(r)}try{if(this._ratioComplete=this._currentStepInSeries.getCompletionMilestone(),this._ratioComplete<0)return;if(this._runOfStep++,this._currentStepInSeries instanceof e.NonMotionEvent)return void this._currentStepInSeries._incrementallyUpdate(this._ratioComplete);if(this._doingRotation&&t.LerpToRef(this._rotationStart,this._rotationEnd,this._ratioComplete,this._node[this._rotationProperty]),this._doingMovePOV){if(!this._doingRotation||this._currentStepInSeries.options.noStepWiseMovement||this._currentStepInSeries.options.absoluteMovement)t.LerpToRef(this._positionStartVec,this._positionEndVec,this._ratioComplete,this._node.position);else{var i=this._fullAmtRight*this._ratioComplete-this._amtRightSoFar,n=this._fullAmtUp*this._ratioComplete-this._amtUpSoFar,a=this._fullAmtForward*this._ratioComplete-this._amtForwardSoFar;this.movePOV(i,n,a),this._amtRightSoFar+=i,this._amtUpSoFar+=n,this._amtForwardSoFar+=a}null!==this._activeLockedCamera&&this._activeLockedCamera._getViewMatrix()}}finally{this._endOfLastFrameTs=e.TimelineControl.Now}}},t.prototype.queueEventSeries=function(e,t,r){t&&this.clearQueue(r),this._queue.push(e)},t.prototype.insertSeriesInFront=function(e){this._queue.splice(0,0,e)},t.prototype.queueSingleEvent=function(t,r){void 0===r&&(r=1),this.queueEventSeries(new e.EventSeries([t],r))},t.prototype.clearQueue=function(e){this._queue=new Array,e&&(this._currentSeries=null)},t.prototype.stopCurrent=function(e,t){e&&(this._currentStepInSeries=null),t&&(this._currentSeries=null)},t.prototype._nextEventSeries=function(){var e=this._queue.length>0&&this._node.isEnabled()&&this._node._currentRenderId!==-1;return e?(this._currentSeries=this._queue.shift(),this._currentSeries.activate(this._name)):this._currentSeries=null,this._currentStepInSeries=null,e},t.prototype.isActive=function(){return null!==this._currentSeries||this._queue.length>0},t.prototype.getQueueState=function(){var t=this._name+" queue state:  number series queued: "+this._queue.length;this._node instanceof e.Mesh&&(t+=", paused : "+this._node.isPaused(),t+=", mesh visible : "+this._node.isVisible);for(var r=0,i=this._queue.length;r<i;r++)t+="\n\tSeries "+r+"- "+this._queue[r].toString();return this._currentSeries&&(t+="\n\n\t Current processing: \n"+this._currentSeries.toString()),t},t.prototype._nextEvent=function(r,i){void 0===i&&(i=null);var n=e.TimelineControl.isRealtime?e.TimelineControl.Now-this._endOfLastFrameTs:0;if(r.activate(n-this._endOfLastFrameTs<t.MAX_MILLIS_FOR_EVENT_LATE_START&&!this._currentSeries.hasMultipleParticipants()?n:0),this._currentStepInSeries=r,r instanceof e.NonMotionEvent&&r.initialize(n),this._doingRotation=null!==r.rotatePOV,this._doingRotation&&(this._rotationStart=this._node[this._rotationProperty].clone(),this._rotationEnd=r.options.absoluteRotation?r.rotatePOV:this._rotationStart.add(this.calcRotatePOV(r.rotatePOV.x,r.rotatePOV.y,r.rotatePOV.z))),this._doingMovePOV=null!==r.movePOV,this._doingMovePOV){var a=r.movePOV;i&&(a=a.multiply(i)),this._positionStartVec=this._node.position.clone(),this._fullAmtRight=a.x,this._amtRightSoFar=0,this._fullAmtUp=a.y,this._amtUpSoFar=0,this._fullAmtForward=a.z,this._amtForwardSoFar=0,(!this._doingRotation||r.options.noStepWiseMovement||r.options.absoluteMovement)&&(this._positionEndVec=r.options.absoluteMovement?r.movePOV:this._positionStartVec.add(this.calcMovePOV(this._fullAmtRight,this._fullAmtUp,this._fullAmtForward)))}if(this._activeLockedCamera=null,(this._doingRotation||this._doingMovePOV)&&this._isMesh){var s=this._node.getScene().activeCamera,o=s.lockedTarget||s.target;o&&o===this._node&&(this._activeLockedCamera=s)}this._runOfStep=0},t.prototype.movePOV=function(e,t,r){this._node.position.addInPlace(this.calcMovePOV(e,t,r))},t.prototype.calcMovePOV=function(e,t,r){var i=this._node[this._rotationProperty];BABYLON.Matrix.RotationYawPitchRollToRef(i.y,i.x,i.z,this._rotationMatrix);var n=BABYLON.Vector3.Zero(),a=this._isMesh&&this._node.definedFacingForward?-1:1;return BABYLON.Vector3.TransformCoordinatesFromFloatsToRef(e*a,t,r*a,this._rotationMatrix,n),n},t.prototype.rotatePOV=function(e,t,r){var i=this.calcRotatePOV(e,t,r);this._node[this._rotationProperty].addInPlace(i)},t.prototype.calcRotatePOV=function(e,t,r){var i=this._isMesh?this._node.definedFacingForward?1:-1:1;return new BABYLON.Vector3(e*i,t,r*i)},t.prototype.isInstancePaused=function(){return this._instancePaused},t.prototype.pauseInstance=function(){this._instancePaused=!0},t.prototype.resumeInstancePlay=function(){this._lastResumeTime=e.TimelineControl.Now,this._instancePaused=!1,null!==this._currentStepInSeries&&this._currentStepInSeries.resumePlay()},Object.defineProperty(t,"Version",{get:function(){return"1.1.0 Beta"},enumerable:!0,configurable:!0}),t.LerpToRef=function(e,t,r,i){i.x=e.x+(t.x-e.x)*r,i.y=e.y+(t.y-e.y)*r,i.z=e.z+(t.z-e.z)*r},t.SlerpToRef=function(e,t,r,i){var n,a,s=r,o=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w,l=!1;if(o<0&&(l=!0,o=-o),o>.999999)a=1-s,n=l?-s:s;else{var h=Math.acos(o),u=1/Math.sin(h);a=Math.sin((1-s)*h)*u,n=l?-Math.sin(s*h)*u:Math.sin(s*h)*u}return i.x=a*e.x+n*t.x,i.y=a*e.y+n*t.y,i.z=a*e.z+n*t.z,i.w=a*e.w+n*t.w,i},t.formatQuat=function(e){return"{X: "+e.x.toFixed(4)+" Y:"+e.y.toFixed(4)+" Z:"+e.z.toFixed(4)+" W:"+e.w.toFixed(4)+"}"},t})();t.POV_GROUP_NAME="POV_PROCESSOR",t.MAX_MILLIS_FOR_EVENT_LATE_START=50,e.PovProcessor=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(r,i,n,a,s){var o=t.call(this,r,i,n,a,s)||this;return o._startScale=new BABYLON.Vector3(0,0,0),o._startRotation=new BABYLON.Quaternion,o._startTranslation=new BABYLON.Vector3(0,0,0),o._resultScale=new BABYLON.Vector3(0,0,0),o._resultRotation=new BABYLON.Quaternion,o._resultTranslation=new BABYLON.Vector3(0,0,0),o._rotationMatrix=new BABYLON.Matrix,o._restComp=e.MatrixComp.fromMatrix(s),o}return __extends(r,t),r.prototype.assignPoseLibrary=function(e){this._restComp.setBasisRatios(e.poses.basis.targets[this.name])},r.prototype._assignPose=function(e,t){this._rel_target=this._restComp.getRelativePose(e),this.getLocalMatrix().decompose(this._startScale,this._startRotation,this._startTranslation),this._alreadyAtTarget=this._rel_target.equals(this._startRotation,this._startTranslation,this._startScale)&&!this.getParent(),this._alreadyAtTarget||t&&this._incrementallyDeform(1)},r.prototype._setAlreadyAtTarget=function(){this._alreadyAtTarget=!0},r.prototype._incrementallyDeform=function(t){if(!this._alreadyAtTarget){e.PovProcessor.LerpToRef(this._startScale,this._rel_target.scale,t,this._resultScale),e.PovProcessor.SlerpToRef(this._startRotation,this._rel_target.rotation,t,this._resultRotation),e.PovProcessor.LerpToRef(this._startTranslation,this._rel_target.translation,t,this._resultTranslation);var r=this.getLocalMatrix();r.m[0]=this._resultScale.x,r.m[1]=0,r.m[2]=0,r.m[3]=0,r.m[4]=0,r.m[5]=this._resultScale.y,r.m[6]=0,r.m[7]=0,r.m[8]=0,r.m[9]=0,r.m[10]=this._resultScale.z,r.m[11]=0,r.m[12]=0,r.m[13]=0,r.m[14]=0,r.m[15]=1,BABYLON.Matrix.IdentityToRef(this._rotationMatrix),this._resultRotation.toRotationMatrix(this._rotationMatrix),r.multiplyToRef(this._rotationMatrix,r),r.setTranslation(this._resultTranslation),this.markAsDirty()}},r})(BABYLON.Bone);e.Bone=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e._subPoses=new Array,e}return __extends(r,t),r.prototype.validateSkeleton=function(){for(var t=this.bones.length,r=0,i=0;i<t;i++){var n=this.bones[i];if(n.getParent()||r++,!(n instanceof e.Bone))return BABYLON.Tools.Error("QI.Skeleton:  "+this.name+", Bone("+n.name+") is not a QI.Bone"),!1}return 1===r||(BABYLON.Tools.Error("QI.Skeleton:  "+this.name+" has more than 1 bone without a parent"),!1)},r.prototype.assignPoseLibrary=function(t){if(!this._poseLibrary||this._poseLibrary.name!==t){var r=e.SkeletonPoseLibrary.getLibraryByName(t);if(r){if(this._validateLibraryForSkeleton(r)){this._poseLibrary=r,this.clearAllSubPoses(),this._skelDimensionsRatio=this.dimensionsAtRest.divide(this._poseLibrary.dimensionsAtRest),1===this._skelDimensionsRatio.x&&1===this._skelDimensionsRatio.y&&1===this._skelDimensionsRatio.z&&(this._skelDimensionsRatio=null);for(var i=0,n=this.bones.length;i<n;i++)this.bones[i].assignPoseLibrary(this._poseLibrary)}}else BABYLON.Tools.Error("QI.Skeleton:  library("+t+") not found")}},r.prototype._validateLibraryForSkeleton=function(e){var t=this.bones.length;if(Object.keys(e.boneLengths).length!==t)return BABYLON.Tools.Error("QI.Skeleton:  library("+e.name+") has incorrect # of bones; "+t+" in skeleton "+e.nBones+" in library"),!1;for(var r=0;r<t;r++){var i=this.bones[r];if(!e.boneLengths[i.name])return BABYLON.Tools.Error("QI.Skeleton:  "+this.name+", has Bone("+i.name+") not found in library"),!1}return!0},r.prototype._assignPoseImmediately=function(e){var t=this._poseLibrary.poses[e];t?t._assignPose(this,!0):BABYLON.Tools.Error("QI.Skeleton:  pose("+e+") not found")},r.prototype.currentStateAsPose=function(t){for(var r=(this._poseLibrary.poses.basis,{}),i=0,n=this.bones.length;i<n;i++)r[this.bones[i].name]=this.bones[i].getLocalMatrix().clone();return new e.Pose(t,this._poseLibrary,r)},r.prototype.addSubPose=function(e){for(var t=0,r=this._subPoses.length;t<r;t++)if(this._subPoses[t].name===e)return;var i=this._poseLibrary?this._poseLibrary.poses[e]:null;i?i.isSubPose?this._subPoses.push(i):BABYLON.Tools.Error("QI.Skeleton:  pose("+i.name+") is not a sub-pose"):BABYLON.Tools.Error("QI.Skeleton:  sub-pose("+e+") not found")},r.prototype.removeSubPose=function(e){for(var t=0;t<this._subPoses.length;t++)if(this._subPoses[t].name===e)return void this._subPoses.splice(t,1)},r.prototype.clearAllSubPoses=function(){this._subPoses=new Array},r})(BABYLON.Skeleton);e.Skeleton=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(t,r,i){this.name=t,this.library=r,this.targets={};for(var n in i)this.targets[n]=e.MatrixComp.fromMatrix(i[n]);if(this.isSubPose=t.indexOf(".sp")!=-1,this.library._addPose(this),this.isSubPose&&Object.keys(this.targets).length===r.nBones)return void BABYLON.Tools.Error("QI.Pose:  sub-pose("+this.name+"), must have fewer bones than found in library("+r.name+")");if("basis"!==t){var a=this.library.poses.basis.targets;for(var n in a)n!==this.library.nameOfRoot&&(this.targets[n]?(this.targets[n].setBasisDiffs(a[n]),"sitting2"===t&&console.log(n+": "+this.targets[n].rotationBasisDiff.toString())):this.isSubPose||(this.targets[n]=a[n]))}for(var n in this.targets){var s=this.targets[n];Object.freeze(s)}Object.freeze(this)}return t.prototype._assignPose=function(e,t){for(var r=e._subPoses.length>0?this._mergeSubPoses(e._subPoses):this.targets,i=0,n=e.bones.length;i<n;i++){var a=e.bones[i],s=r[a.name];s?a._assignPose(s,t):a._setAlreadyAtTarget()}},t.prototype._mergeSubPoses=function(e){var t={};for(var r in this.targets)t[r]=this.targets[r];for(var i=0,n=e.length;i<n;i++)for(var r in e[i].targets)t[r]=e[i].targets[r];return t},t})();e.Pose=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(r,i,n,a,s){void 0===n&&(n=null),void 0===a&&(a=null);var o=t.call(this,i,n,a,s)||this;return o.poseName=r,o._groupName=e.PoseProcessor.INTERPOLATOR_GROUP_NAME,o}return __extends(r,t),r.prototype.toString=function(){var e="Pose- "+this.poseName+", ";if(this.options.subposes&&this.options.subposes.length>0){e+="Subposes- [";for(var r=0,i=this.options.subposes.length;r<i;r++)e+=" "+this.options.subposes[r];e+="], revertSubposes- "+this.options.revertSubposes+", "}return e+t.prototype.toString.call(this)},r.prototype.getClassName=function(){return"PoseEvent"},r})(e.MotionEvent);e.PoseEvent=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(e,i,n){var a=t.call(this,i,n)||this;a._skeleton=e,a._lastPoseRun="basis",a._name=r.INTERPOLATOR_GROUP_NAME;a._skeleton.bones.length;return a._skeleton.validateSkeleton(),a}return __extends(r,t),r.prototype.incrementallyDeform=function(){if(t.prototype._incrementallyMove.call(this),null===this._currentSeries||!(this._currentStepInSeries instanceof e.PoseEvent))return!1;if(this._lastPoseRun=this._currentStepInSeries.poseName,this._ratioComplete<0)return!1;for(var r=0,i=this._skeleton.bones.length;r<i;r++)this._skeleton.bones[r]._incrementallyDeform(this._ratioComplete);return!0},r.prototype.getLastPoseNameQueuedOrRun=function(){for(var e,t=this._queue.length-1;t>=0;t--)if(e=this._getLastPoseEventInSeries(this._queue[t]))return e;return this._currentSeries&&(e=this._getLastPoseEventInSeries(this._currentSeries))?e:this._lastPoseRun},r.prototype._getLastPoseEventInSeries=function(t){for(var r=t._events,i=r.length-1;i>=0;i--)if(r[i]instanceof e.PoseEvent)return r[i].poseName;return null},r.prototype._nextEvent=function(r){if(r instanceof e.PoseEvent){var i=r,n=this._skeleton._poseLibrary.poses[i.poseName];
if(n){if(i.options.subposes)for(var a=0,s=i.options.subposes.length;a<s;a++)i.options.revertSubposes?this._skeleton.removeSubPose(i.options.subposes[a]):this._skeleton.addSubPose(i.options.subposes[a]);n._assignPose(this._skeleton)}else if(null!==i.poseName)return void BABYLON.Tools.Error("PoseProcessor:  pose("+i.poseName+") not found")}t.prototype._nextEvent.call(this,r,this._skeleton._skelDimensionsRatio)},r})(e.PovProcessor);t.INTERPOLATOR_GROUP_NAME="SKELETON",e.PoseProcessor=t})(QI||(QI={}));var QI;!(function(e){var t=(function(e){function t(t,r,i,a,s,o,l,h){void 0===a&&(a=null),void 0===o&&(o=null),void 0===l&&(l=null);var u=e.call(this,s,o,l,h)||this;if(u._referenceStateName=r,u._endStateNames=i,u._endStateRatios=a,!(u._endStateNames instanceof Array&&(null===u._endStateRatios||u._endStateRatios instanceof Array)))return BABYLON.Tools.Error("VertexDeformation: end states / ratios not an array"),u;var d=u._endStateNames.length;if(null!==u._endStateRatios&&u._endStateRatios.length!==d)return BABYLON.Tools.Error("VertexDeformation: end states / ratios not same length"),u;if(u._groupName=t.toUpperCase(),u._referenceStateName=u._referenceStateName.toUpperCase(),u instanceof n)return u;for(var c=0;c<d;c++)if(u._endStateNames[c]=u._endStateNames[c].toUpperCase(),u._referenceStateName===u._endStateNames[c])return BABYLON.Tools.Error("VertexDeformation: reference state cannot be the same as the end state"),u;return u}return __extends(t,e),t.prototype.getReferenceStateName=function(){return this._referenceStateName},t.prototype.getEndStateName=function(e){return this._endStateNames[e]},t.prototype.getEndStateNames=function(){return this._endStateNames},t.prototype.getEndStateRatio=function(e){return this._endStateRatios[e]},t.prototype.getEndStateRatios=function(){return this._endStateRatios},t.prototype.getClassName=function(){return"VertexDeformation"},t.prototype.toString=function(){var t=e.prototype.toString.call(this);t+", reference state: "+this._referenceStateName;for(var r=0,i=this._endStateNames.length;r<i;r++)t+=", [ "+this._endStateNames[r]+" @ "+this._endStateRatios[r]+"]";return t},t})(e.MotionEvent);e.VertexDeformation=t;var r=(function(e){function t(t,r,i,n,a,s,o){return void 0===a&&(a=null),void 0===s&&(s=null),e.call(this,t,"BASIS",[r],[i],n,a,s,o)||this}return __extends(t,e),t.prototype.getClassName=function(){return"Deformation"},t})(t);e.Deformation=r;var i=(function(e){function t(t,r,i,n){return void 0===i&&(i=1),e.call(this,t,r,i,.01,null,null,n)||this}return __extends(t,e),t.prototype.getClassName=function(){return"MorphImmediate"},t})(r);e.MorphImmediate=i;var n=(function(e){function t(t,r,i,n,a){return void 0===i&&(i=null),void 0===n&&(n=null),e.call(this,t,"BASIS",1,r,i,n,a)||this}return __extends(t,e),t.prototype.getClassName=function(){return"BasisReturn"},t})(r);e.BasisReturn=n})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(e,i,n){var a=t.call(this,e,!0)||this;if(a._affectedPositionElements=n,a._states=new Array,a._normals=new Array,a._stateNames=new Array,a._reusablePositionFinals=new Array,a._reusableNormalFinals=new Array,a._lastReusablePosUsed=0,a._lastReusableNormUsed=0,a._mirrorAxis=-1,a._name=i,!(a._affectedPositionElements instanceof Uint32Array))return BABYLON.Tools.Error("ShapeKeyGroup: invalid affectedPositionElements arg"),a;a._nPosElements=a._affectedPositionElements.length,a._reusablePositionFinals.push(new Float32Array(a._nPosElements)),a._reusablePositionFinals.push(new Float32Array(a._nPosElements));for(var s,o=new Array,l=-1,h=0;h<a._nPosElements;h++)s=Math.floor(a._affectedPositionElements[h]/3),l!==s&&(l=s,o.push(l));a._affectedVertices=new Uint16Array(o),a._nVertices=a._affectedVertices.length,a._reusableNormalFinals.push(new Float32Array(3*a._nVertices)),a._reusableNormalFinals.push(new Float32Array(3*a._nVertices));for(var u=new Float32Array(a._nPosElements),d=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),h=0;h<a._nPosElements;h++)u[h]=d[a._affectedPositionElements[h]];return a._addShapeKey(r.BASIS,!1,u),a._currFinalPositionVals=a._states[0],a._currFinalNormalVals=a._normals[0],a}return __extends(r,t),r.prototype._getDerivedName=function(e,t,r,i){return void 0===i&&(i=null),e+"-["+t+"]@["+r+"]"+(i?"-"+i:"")},r.prototype.addDerivedKeyFromDeformation=function(e){this.addComboDerivedKey(e.getReferenceStateName(),e.getEndStateNames(),e.getEndStateRatios())},r.prototype.addDerivedKey=function(e,t,r,i){return void 0===i&&(i=null),1===r?void BABYLON.Tools.Warn("ShapeKeyGroup: deriving a shape key where the endStateRatio is 1 is pointless, ignored"):void this.addComboDerivedKey(e,[t],[r],i)},r.prototype.addComboDerivedKey=function(e,t,r,i,n){if(void 0===i&&(i=null),!n||!this.hasKey(n)){var a=this._getIdxForState(e);if(a===-1)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid reference state");for(var s,o=new Array,l=0;l<t.length;l++){if(s=this._getIdxForState(t[l]),s===-1)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid end state name: "+t[l].toUpperCase());o.push(s)}var h=n?n:this._getDerivedName(a,o,r,i),u=new Float32Array(this._nPosElements);this._buildPosEndPoint(u,a,o,r,i,this._node.debug),this._addShapeKey(h,!1,u)}},r.prototype._addShapeKey=function(e,t,r){if("string"!=typeof e||0===e.length)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid stateName arg");if(this.hasKey(e))return void BABYLON.Tools.Warn("ShapeKeyGroup: stateName "+e+" is a duplicate, ignored");if(this._states.push(r),this._stateNames.push(e),t)for(var i=this._states[0],n=0;n<this._nPosElements;n++)r[n]+=i[n];var a=new Float32Array(3*this._nVertices);this._buildNormEndPoint(a,r),this._normals.push(a),this._node.debug&&BABYLON.Tools.Log("Shape key: "+e+" added to group: "+this._name+" on QI.Mesh: "+this._node.name)},r.prototype.deleteShapeKey=function(e){var t=this._getIdxForState(e);return t===-1?void BABYLON.Tools.Error("ShapeKeyGroup: invalid reference state"):(this._stateNames.splice(t,1),this._states.splice(t,1),this._normals.splice(t,1),void(this._node.debug&&BABYLON.Tools.Log("Shape key: "+e+" deleted from group: "+this._name+" on QI.Mesh: "+this._node.name)))},r.prototype._incrementallyDeform=function(r,i){return t.prototype._incrementallyMove.call(this),null!==this._currentSeries&&this._currentStepInSeries instanceof e.VertexDeformation&&(!(this._ratioComplete<0)&&(1===this._runOfStep&&this._firstRun(),this._updatePositions(r),this._updateNormals(i),!0))},r.prototype._deformImmediately=function(t,r,i){var n=this._getIdxForState(t);if(n===-1)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid end state name: "+t.toUpperCase());this._currentStepInSeries instanceof e.VertexDeformation&&this.stopCurrent(!0),this._currFinalPositionVals=this._states[n],this._currFinalNormalVals=this._normals[n];for(var a=0;a<this._nPosElements;a++)r[this._affectedPositionElements[a]]=this._currFinalPositionVals[a];for(var s,o,a=0;a<this._nVertices;a++)s=3*this._affectedVertices[a],o=3*a,i[s]=this._currFinalNormalVals[o],i[s+1]=this._currFinalNormalVals[o+1],i[s+2]=this._currFinalNormalVals[o+2]},r.prototype._updatePositions=function(e){for(var t=0;t<this._nPosElements;t++)e[this._affectedPositionElements[t]]=this._priorFinalPositionVals[t]+(this._currFinalPositionVals[t]-this._priorFinalPositionVals[t])*this._ratioComplete},r.prototype._updateNormals=function(e){for(var t,r,i=0;i<this._nVertices;i++)t=3*this._affectedVertices[i],r=3*i,e[t]=this._priorFinalNormalVals[r]+(this._currFinalNormalVals[r]-this._priorFinalNormalVals[r])*this._ratioComplete,e[t+1]=this._priorFinalNormalVals[r+1]+(this._currFinalNormalVals[r+1]-this._priorFinalNormalVals[r+1])*this._ratioComplete,e[t+2]=this._priorFinalNormalVals[r+2]+(this._currFinalNormalVals[r+2]-this._priorFinalNormalVals[r+2])*this._ratioComplete},r.prototype._firstRun=function(){if(this._currentStepInSeries instanceof e.VertexDeformation){this._priorFinalPositionVals=this._currFinalPositionVals,this._priorFinalNormalVals=this._currFinalNormalVals;var t=this._currentStepInSeries,r=this._getIdxForState(t.getReferenceStateName());if(r===-1)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid reference state");var i=t.getEndStateNames(),n=t.getEndStateRatios();if(this._stalling=null===n,!this._stalling){for(var a,s=new Array,o=!0,l=0;l<i.length;l++){if(a=this._getIdxForState(i[l]),a===-1)return void BABYLON.Tools.Error("ShapeKeyGroup: invalid end state name: "+i[l].toUpperCase());s.push(a),o=o&&0===n[l]}if(o||1===n.length&&(1===n[0]||0===n[0])){var h=o||0===n[0]?r:s[0];this._currFinalPositionVals=this._states[h],this._currFinalNormalVals=this._normals[h]}else{var u=this._getIdxForState(this._getDerivedName(r,s,n,t.options.mirrorAxes));u!==-1?(this._currFinalPositionVals=this._states[u],this._currFinalNormalVals=this._normals[u]):(this._lastReusablePosUsed=1===this._lastReusablePosUsed?0:1,this._buildPosEndPoint(this._reusablePositionFinals[this._lastReusablePosUsed],r,s,n,t.options.mirrorAxes,this._node.debug),this._currFinalPositionVals=this._reusablePositionFinals[this._lastReusablePosUsed],this._lastReusableNormUsed=1===this._lastReusableNormUsed?0:1,this._buildNormEndPoint(this._reusableNormalFinals[this._lastReusableNormUsed],this._currFinalPositionVals),this._currFinalNormalVals=this._reusableNormalFinals[this._lastReusableNormUsed])}}}},r.prototype._buildPosEndPoint=function(e,t,i,n,a,s){void 0===a&&(a=null),void 0===s&&(s=!1);var o,l,h,u,d=this._states[t],c=i.length;if(a||r._isMirroring(n))for(u=new Array(n.length),a&&(a=a.toUpperCase()),h=0;h<n.length;h++)if(a)switch(a.charAt(h)){case"X":u[h]=1;break;case"Y":u[h]=2;break;case"Z":u[h]=3}else u[h]=this._mirrorAxis;for(var A=0;A<this._nPosElements;A++){for(o=0,h=0;h<c;h++)l=(this._states[i[h]][A]-d[A])*n[h],n[h]<0&&u[h]!==(A+1)%3&&3!==u[h]&&(l*=-1),o+=l;e[A]=d[A]+o}s&&BABYLON.Tools.Log(this._name+" end Point built for referenceIdx: "+t+",  endStateIdxs: "+i+", endStateRatios: "+n)},r.prototype._buildNormEndPoint=function(e,t){var r=this._node;r._futurePositions.set(r._originalPositions);for(var i=0;i<this._nPosElements;i++)r._futurePositions[this._affectedPositionElements[i]]=t[i];BABYLON.VertexData.ComputeNormals(r._futurePositions,r.getIndices(),r._futureNormals);for(var n,a,i=0;i<this._nVertices;i++)n=3*this._affectedVertices[i],a=3*i,e[a]=r._futureNormals[n],e[a+1]=r._futureNormals[n+1],e[a+2]=r._futureNormals[n+2]},r._isMirroring=function(e){for(var t=0,r=e.length;t<r;t++)if(e[t]<0)return!0;return!1},r.prototype.hasKey=function(e){return this._getIdxForState(e)!==-1},r.prototype._getIdxForState=function(e){e=e.toUpperCase();for(var t=0,r=this._stateNames.length;t<r;t++)if(this._stateNames[t]===e)return t;return-1},r.prototype.getName=function(){return this._name},r.prototype.getNPosElements=function(){return this._nPosElements},r.prototype.getNStates=function(){return this._stateNames.length},r.prototype.getStates=function(){return this._stateNames.slice(0)},r.prototype.toString=function(){return"ShapeKeyGroup: "+this._name+", n position elements: "+this._nPosElements+",\nStates: "+this._stateNames},r.prototype.mirrorAxisOnX=function(){this._mirrorAxis=1},r.prototype.mirrorAxisOnY=function(){this._mirrorAxis=2},r.prototype.mirrorAxisOnZ=function(){this._mirrorAxis=3},r._buildConsolidatedGroup=function(e,t,i){for(var n=e._originalPositions.length,a=i.length,s=0,o=new Array(n),l=0;l<a;l++)for(var h=i[l],u=0;u<h._nPosElements;u++){var d=h._affectedPositionElements[u];o[d]||(o[d]=!0,s++)}for(var c=new Uint32Array(s),A=0,l=0;l<n;l++)o[l]&&(c[A++]=l);var p=new r(e,t,c);e.addShapeKeyGroup(p);for(var l=0;l<a;l++){for(var h=i[l],f=new Array(h._nPosElements),S=0,v=0;v<s;v++)c[v]===h._affectedPositionElements[S]&&(f[S++]=v);for(var m=1,P=h._states.length;m<P;m++){var g=new Float32Array(s);g.set(p._states[0]);for(var B=h._states[m],u=0;u<h._nPosElements;u++)g[f[u]]=B[u];p._addShapeKey(h._name+"_"+h._stateNames[m],!1,g)}}return p},r})(e.PovProcessor);t.BASIS="BASIS",e.ShapeKeyGroup=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function e(e,t,r,i){if(this._mesh=e,this.durations=t,this.soundEffect=r,this.soundEffect&&i){var n=this;this.soundEffect.onended=function(){n.soundEffect.dispose()}}}return e.prototype.makeEntrance=function(){throw"Must be over-ridden by sub-classes"},e})();e.AbstractGrandEntrance=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(r,i,n,a,s){void 0===n&&(n=null);var o=t.call(this,r,i,n,a,s)||this;if(o.debug=!1,o._shapeKeyGroups=new Array,o._clockStart=-1,o._renderCPU=0,o._totalDeformations=0,o._totalFrames=0,o._lastFrameID=-1,o._instancePaused=!0,a&&a._shapeKeyGroups.length>0)throw"QI.Mesh: meshes with shapekeys cannot be cloned";o._povProcessor=new e.PovProcessor(o,(!1));var l=o;return o._registeredFN=function(){l.beforeRender()},i.registerBeforeRender(o._registeredFN),o}return __extends(r,t),r.prototype.beforeRender=function(){if(null!==this._positions32F&&null!==this._normals32F&&!e.TimelineControl.isSystemPaused&&!this._instancePaused){var r=BABYLON.Tools.Now;if(this._lastFrameID!==e.TimelineControl.FrameID){this._lastFrameID=e.TimelineControl.FrameID,this._shapeKeyChangesMade=!1;for(var i=0,n=this._shapeKeyGroups.length;i<n;i++){var a=this._shapeKeyGroups[i]._incrementallyDeform(this._positions32F,this._normals32F);this._shapeKeyChangesMade=this._shapeKeyChangesMade||a}this._skeletonChangesMade=!1,this._poseProcessor&&(this._skeletonChangesMade=this._poseProcessor.incrementallyDeform()),this._povProcessor._incrementallyMove(),(this._shapeKeyChangesMade||this._skeletonChangesMade)&&(this._shapeKeyChangesMade&&(!this.computeBonesUsingShaders&&this._skeletonChangesMade||(t.prototype.updateVerticesData.call(this,BABYLON.VertexBuffer.PositionKind,this._positions32F),t.prototype.updateVerticesData.call(this,BABYLON.VertexBuffer.NormalKind,this._normals32F))),this._clockStart<0&&this._resetTracking(r),this._renderCPU+=BABYLON.Tools.Now-r,this._totalDeformations++),this._totalFrames++}}},r.prototype.resetTracking=function(){this._resetTracking(BABYLON.Tools.Now)},r.prototype._resetTracking=function(e){this._clockStart=e,this._renderCPU=0,this._totalDeformations=0,this._totalFrames=0},r.prototype.getTrackingReport=function(e){void 0===e&&(e=!1);for(var t=BABYLON.Tools.Now-this._clockStart,r="\nNum Deformations: "+this._totalDeformations+"\nRender CPU milli: "+this._renderCPU.toFixed(2)+"\nRender CPU milli / Deformations: "+(this._renderCPU/this._totalDeformations).toFixed(2)+"\nWallclock milli / Deformations: "+(t/this._totalDeformations).toFixed(2)+"\nMemo, Deformations / Sec: "+(this._totalDeformations/(t/1e3)).toFixed(2)+"\nMemo, Frames with no deformation: "+(this._totalFrames-this._totalDeformations)+"\nMemo, Total vertices: "+this.getTotalVertices()+"\nShape keys:",i=0;i<this._shapeKeyGroups.length;i++)r+="\n"+this._shapeKeyGroups[i].toString();return e&&this.resetTracking(),r},r.prototype.createInstance=function(e){return this._shapeKeyGroups.length>0?(BABYLON.Tools.Error("QI.Mesh:  Shared vertex instances not possible with shape keys"),null):t.prototype.createInstance.call(this,e)},r.prototype.convertToFlatShadedMesh=function(){return this._shapeKeyGroups.length>0?(BABYLON.Tools.Error("QI.Mesh:  Flat shading must be done on export with shape keys"),null):t.prototype.convertToFlatShadedMesh.call(this)},r.prototype.setVerticesData=function(r,i,n,a){if(t.prototype.setVerticesData.call(this,r,i,n||r===BABYLON.VertexBuffer.PositionKind||r===BABYLON.VertexBuffer.NormalKind,a),r===BABYLON.VertexBuffer.PositionKind){this._positions32F=this.setPositionsForCPUSkinning(),this._originalPositions=new Float32Array(i.length);for(var s=0,o=i.length;s<o;s++)this._originalPositions[s]=i[s];this._futurePositions=new Float32Array(i.length),this._futureNormals=new Float32Array(i.length)}else r===BABYLON.VertexBuffer.NormalKind?this._normals32F=this.setNormalsForCPUSkinning():r===BABYLON.VertexBuffer.MatricesWeightsKind&&(this._poseProcessor||(this._poseProcessor=new e.PoseProcessor(this.skeleton,this,(!0))));return this},r.prototype.dispose=function(e){t.prototype.dispose.call(this,e),this.getScene().unregisterBeforeRender(this._registeredFN)},r.prototype.addShapeKeyGroup=function(e){this._shapeKeyGroups.push(e)},r.prototype.consolidateShapeKeyGroups=function(t,r,i){for(var n=r.length,a=new Array(n),s=0;s<n;s++)if(a[s]=this.getShapeKeyGroup(r[s]),!a[s])return BABYLON.Tools.Error("QI.Mesh: no shape key group with name: "+r[s]),null;var o=e.ShapeKeyGroup._buildConsolidatedGroup(this,t,a);if(!i)for(var s=0;s<n;s++)this.removeShapeKeyGroup(r[s]);return o},r.prototype.removeShapeKeyGroup=function(e){for(var t=0,r=this._shapeKeyGroups.length;t<r;t++)if(this._shapeKeyGroups[t].getName()===e)return void this._shapeKeyGroups.splice(t,1);BABYLON.Tools.Warn("QI.Mesh: no shape key group with name: "+e)},r.prototype.setShapeKeyGroupLast=function(e){for(var t=-1,r=this._shapeKeyGroups.length,i=0;i<r;i++)if(this._shapeKeyGroups[i]._name===e){t=i;break}if(t===-1)return void BABYLON.Tools.Error("QI.Mesh: no shape key group with name: "+e);if(t+1<r){var n=this._shapeKeyGroups[t];this._shapeKeyGroups.splice(t,1),this._shapeKeyGroups.splice(r,0,n)}},r.prototype.clearAllQueues=function(e){for(var t=0,r=this._shapeKeyGroups.length;t<r;t++)this._shapeKeyGroups[t].clearQueue(e);this._poseProcessor&&this._poseProcessor.clearQueue(e),this._povProcessor&&this._povProcessor.clearQueue(e)},r.prototype.appendStallForMissingQueues=function(t,r,i){void 0===i&&(i=e.PovProcessor.POV_GROUP_NAME);for(var n=!1,a=!this._poseProcessor,s=this._shapeKeyGroups.length,o=new Array(s),l=!1,h=0,u=t.length;h<u;h++)if(t[h]instanceof e.VertexDeformation){for(var d=t[h]._groupName,c=0;c<s;c++)if(this._shapeKeyGroups[c]._name===d){o[c]=!0;break}}else t[h]instanceof e.PoseEvent?a=!0:t[h]instanceof e.MotionEvent?n=!0:l=!0;if(l)if(i===e.PovProcessor.POV_GROUP_NAME)n=!0;else if(i===e.PoseProcessor.INTERPOLATOR_GROUP_NAME)a=!0;else for(var c=0;c<s;c++)if(i===this._shapeKeyGroups[c]._name){o[c]=!0;break}n||t.push(new e.Stall(r,e.PovProcessor.POV_GROUP_NAME)),a||t.push(new e.Stall(r,e.PoseProcessor.INTERPOLATOR_GROUP_NAME));for(var c=0;c<s;c++)o[c]||t.push(new e.Stall(r,this._shapeKeyGroups[c]._name));return t},r.prototype.queueSingleEvent=function(t){this.queueEventSeries(new e.EventSeries([t]))},r.prototype.queueEventSeries=function(t,r,i,n){var a;this.debug&&(a=[]);for(var s=0,o=this._shapeKeyGroups.length;s<o;s++)t.isGroupParticipating(this._shapeKeyGroups[s].getName())&&(n?this._shapeKeyGroups[s].insertSeriesInFront(t):this._shapeKeyGroups[s].queueEventSeries(t,r,i),a&&a.push(this._shapeKeyGroups[s].getName()));if(t.isGroupParticipating(e.PoseProcessor.INTERPOLATOR_GROUP_NAME)&&(n?this._poseProcessor.insertSeriesInFront(t):this._poseProcessor.queueEventSeries(t),a&&a.push(e.PoseProcessor.INTERPOLATOR_GROUP_NAME)),t.isGroupParticipating(e.PovProcessor.POV_GROUP_NAME)&&(n?this._povProcessor.insertSeriesInFront(t):this._povProcessor.queueEventSeries(t),a&&a.push(e.PovProcessor.POV_GROUP_NAME)),a)if(0===a.length)BABYLON.Tools.Warn("QI.Mesh:  no shape keys groups or skeleton participating in event series");else{for(var l="QI.Mesh:  series queued to "+a.length+" group(s): [ ",h=0;h<a.length;h++)l+=a[h]+" ";BABYLON.Tools.Log(l+"]")}},r.prototype.hasShapeKeyGroup=function(e){return null!==this.getShapeKeyGroup(e)},r.prototype.getShapeKeyGroup=function(e){for(var t=0,r=this._shapeKeyGroups.length;t<r;t++)if(this._shapeKeyGroups[t].getName()===e)return this._shapeKeyGroups[t];return null},r.prototype.queueDeform=function(t,r,i,n,a,s,o){void 0===a&&(a=null),void 0===s&&(s=null);var l=new e.Deformation(t,r,i,n,a,s,o);return this.queueSingleEvent(l),l},r.prototype.deformImmediately=function(e,r){var i=this.getShapeKeyGroup(e);return i?(i._deformImmediately(r,this._positions32F,this._normals32F),t.prototype.updateVerticesData.call(this,BABYLON.VertexBuffer.PositionKind,this._positions32F),void t.prototype.updateVerticesData.call(this,BABYLON.VertexBuffer.NormalKind,this._normals32F)):void BABYLON.Tools.Error("QI.Mesh: invalid shape key group: "+e.toUpperCase())},r.prototype.assignPoseLibrary=function(e){this.skeleton&&this.skeleton.assignPoseLibrary(e)},r.prototype.assignPoseImmediately=function(e){this.skeleton&&(this.skeleton._assignPoseImmediately(e),this._poseProcessor._lastPoseRun=e)},r.prototype.queuePose=function(t,r,i,n,a){void 0===i&&(i=null),void 0===n&&(n=null);var s=new e.PoseEvent(t,r,i,n,a);return this.queueSingleEvent(s),s},r.prototype.assignSubPoseImmediately=function(e){return this.addSubPose(e,.01)},r.prototype.addSubPose=function(t,r,i){if(this.skeleton){if(r){var n=this.skeleton,a=new e.PoseEvent(this.getLastPoseNameQueuedOrRun(),r,null,null,i),s=[function(){n.addSubPose(t)},a];return this.queueEventSeries(new e.EventSeries(s,1,1,e.PoseProcessor.INTERPOLATOR_GROUP_NAME)),a}return this.skeleton.addSubPose(t),null}},r.prototype.removeSubPose=function(e){this.skeleton&&this.skeleton.removeSubPose(e)},r.prototype.clearAllSubPoses=function(){this.skeleton&&this.skeleton.clearAllSubPoses()},r.prototype.getLastPoseNameQueuedOrRun=function(){return this._poseProcessor?this._poseProcessor.getLastPoseNameQueuedOrRun():null},r.prototype.grandEntrance=function(){this.isEnabled()&&!this.isVisible&&(this.entranceMethod?this.entranceMethod.makeEntrance():this.makeVisible(!0))},r.prototype.makeComputedGroup=function(){var t=this.getShapeKeyGroup(r.COMPUTED_GROUP_NAME);if(!t){for(var i=this._originalPositions.length,n=new Uint32Array(i),a=0;a<i;a++)n[a]=a;t=new e.ShapeKeyGroup(this,r.COMPUTED_GROUP_NAME,n),this.addShapeKeyGroup(t)}return t},r.prototype.makeVisible=function(e){this.isVisible=e,e?this.resumeInstancePlay():this.pausePlay();for(var t=this.getChildMeshes(),i=0,n=t.length;i<n;i++)t[i]instanceof r?t[i].makeVisible(e):t[i].isVisible=e},r.prototype.getSizeCenterWtKids=function(){for(var e=this.getBoundingInfo().boundingBox,t=e.minimumWorld.clone(),r=e.maximumWorld.clone(),i=this.getChildMeshes(),n=0,a=i.length;n<a;n++)e=i[n].getBoundingInfo().boundingBox,t.x>e.minimumWorld.x&&(t.x=e.minimumWorld.x),t.y>e.minimumWorld.y&&(t.y=e.minimumWorld.y),t.z>e.minimumWorld.z&&(t.z=e.minimumWorld.z),r.x<e.maximumWorld.x&&(r.x=e.maximumWorld.x),r.y<e.maximumWorld.y&&(r.y=e.maximumWorld.y),r.z<e.maximumWorld.z&&(r.z=e.maximumWorld.z);return{size:r.subtract(t),center:r.addInPlace(t).scaleInPlace(.5)}},r.prototype.isPaused=function(){return this._instancePaused},r.prototype.pausePlay=function(){this._instancePaused=!0;for(var e=0,t=this._shapeKeyGroups.length;e<t;e++)this._shapeKeyGroups[e].pauseInstance();this._poseProcessor&&this._poseProcessor.pauseInstance(),this._povProcessor&&this._povProcessor.pauseInstance()},r.prototype.resumeInstancePlay=function(){this._instancePaused=!1;for(var e=0,t=this._shapeKeyGroups.length;e<t;e++)this._shapeKeyGroups[e].resumeInstancePlay();this._poseProcessor&&this._poseProcessor.resumeInstancePlay(),this._povProcessor&&this._povProcessor.resumeInstancePlay()},r})(BABYLON.Mesh);t.COMPUTED_GROUP_NAME="COMPUTED-GROUP",e.Mesh=t})(QI||(QI={}));var QI;!(function(e){var t=(function(e){function t(t,r,i,n,a){return void 0===i&&(i=null),e.call(this,t,r,i,n,a,!0)||this}return __extends(t,e),t.prototype.assemble=function(e,r,i,n,a){var s,o,l,h=0,u=0,d=0,c=0,A=[],p=r.length,f=new Float32Array(p),S=new Float32Array(p/3*4);a&&(s=new Float32Array(p/3*4),o=new Float32Array(p/3*4),l=1-n);for(var v,m,P,g,B,_,E,y,I,x,M,O=0,w=e.length;O<w;O++){v=f[u]=r[u],m=f[u+1]=r[u+1],P=f[u+2]=r[u+2],u+=3,M=Math.random()*(2*t.COLOR_RANGE)-t.COLOR_RANGE,E=S[d]=Math.min(1,Math.max(0,this.color.r+M)),y=S[d+1]=Math.min(1,Math.max(0,this.color.g+M)),I=S[d+2]=Math.min(1,Math.max(0,this.color.b+M)),x=S[d+3]=1,d+=4,h++,a&&(s[c]=a,o[c]=1,c+=4);for(var D=1;D<e[O];D++)g=r[u],f[u]=v+g,B=r[u+1],f[u+1]=m+B,_=r[u+2],f[u+2]=P+_,u+=3,S[d]=E,S[d+1]=y,S[d+2]=I,S[d+3]=x,d+=4,a&&(s[c]=a,o[c]=1-l*(this._lengthSoFar(g,B,_)/i),c+=4),A.push(h-1),A.push(h),h++}this.setVerticesData(BABYLON.VertexBuffer.PositionKind,f),this.setVerticesData(BABYLON.VertexBuffer.ColorKind,S),this.setIndices(A),a&&(this.numBoneInfluencers=1,this.setVerticesData(BABYLON.VertexBuffer.MatricesIndicesKind,s),this.setVerticesData(BABYLON.VertexBuffer.MatricesWeightsKind,o))},t.prototype._lengthSoFar=function(e,t,r){return Math.sqrt(e*e+t*t+r*r)},t})(BABYLON.LinesMesh);t.COLOR_RANGE=.05,e.Hair=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function e(){this.initialized=!1,this.playbackReady=!1,this.recording=!1,this._leftchannel=new Array,this._rightchannel=new Array,this._recorder=null,this._recordingLength=0,this._volume=null,this._audioInput=null}return e.getInstance=function(t){if(e._instance)return e._instance;if(e._instance=new e,e._instance._completionCallback=t?t:null,!BABYLON.Engine.audioEngine.canUseWebAudio)return window.alert("QI.AudioRecorder: WebAudio not supported"),e._instance;if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia){var r=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices):function(e){return new Promise(function(t,r){navigator.getUserMedia(e,t,r)})};r({audio:!0}).then((function(t){e.prepMic(t)}))["catch"]((function(e){window.alert("QI.AudioRecorder: Error initializing audio capture:\n\t"+e+"\nNote: Firefox errors when mic not plugged in.")}))}else window.alert("QI.AudioRecorder: Navigator.getUserMedia not supported.");return e._instance},e.prepMic=function(t){var r=e._instance,i=BABYLON.Engine.audioEngine.audioContext;r._volume=i.createGain(),r._audioInput=i.createMediaStreamSource(t),r._audioInput.connect(r._volume);var n=4096;r._recorder=i.createScriptProcessor(n,2,2),r._recorder.onaudioprocess=function(e){if(r.recording){var t=e,i=t.inputBuffer.getChannelData(0),a=t.inputBuffer.getChannelData(1);r._leftchannel.push(new Float32Array(i)),r._rightchannel.push(new Float32Array(a)),r._recordingLength+=n,r._requestedDuration!==Number.MAX_VALUE&&BABYLON.Tools.Now-r._requestedDuration>=r._startTime&&r.recordStop()}},r._volume.connect(r._recorder),r._recorder.connect(i.destination),r.initialized=!0,r._completionCallback&&(r._completionCallback(),r._completionCallback=null)},e.prototype.recordStart=function(e,t){return void 0===e&&(e=Number.MAX_VALUE),this.recording?void BABYLON.Tools.Warn("QI.AudioRecorder: already recording"):(this.recording=!0,this._requestedDuration=e,this._startTime=BABYLON.Tools.Now,this._completionCallback=t?t:null,void this.clean())},e.prototype.recordStop=function(){return this.recording?(this.recording=!1,this._leftBuffer=this._mergeBuffers(this._leftchannel),this._rightBuffer=this._mergeBuffers(this._rightchannel),this.playbackReady=!0,this.clean(!1),void(this._completionCallback&&this._completionCallback())):void BABYLON.Tools.Warn("QI.AudioRecorder: recordStop when not recording")},e.prototype._mergeBuffers=function(e){for(var t=new Float32Array(this._recordingLength),r=0,i=e.length,n=0;n<i;n++){var a=e[n];t.set(a,r),r+=a.length}return t},e.prototype.clean=function(e){void 0===e&&(e=!0),this._leftchannel.length=this._rightchannel.length=0,this._recordingLength=0,e&&(this._leftBuffer=this._rightBuffer=null,this.playbackReady=!1)},e.prototype.playback=function(e,t,r){void 0===e&&(e=1),void 0===t&&(t=0);var i=this.getAudioBuffer(e,t,r);if(i){var n=BABYLON.Engine.audioEngine.audioContext,a=n.createBufferSource();a.buffer=i,a.connect(n.destination),a.start(0)}},e.playbackExternal=function(t,r,i,n){void 0===r&&(r=1),void 0===i&&(i=0),n||(n=t.getChannelData(0).length);var a=t.numberOfChannels>1,s=e._downSampling(t.getChannelData(0).slice(i,n),r),o=a?e._downSampling(t.getChannelData(1).slice(i,n),r):null,l=(s.length,t.sampleRate/r),h=BABYLON.Engine.audioEngine.audioContext;t=h.createBuffer(a?2:1,s.length,l),t.getChannelData(0).set(s),a&&t.getChannelData(1).set(o);var u=h.createBufferSource();u.buffer=t,u.connect(h.destination),u.start(0)},e.prototype.getNSamples=function(){return this._leftBuffer?this._leftBuffer.length:0},e.prototype.getAudioBuffer=function(t,r,i){if(void 0===t&&(t=1),void 0===r&&(r=0),!this.playbackReady)return BABYLON.Tools.Warn("QI.AudioRecorder: playback when not playbackReady"),null;var n,a;0!==r||i?(i||(i=this._leftBuffer.length),n=e._downSampling(this._leftBuffer.slice(r,i),t),a=e._downSampling(this._rightBuffer.slice(r,i),t)):(n=e._downSampling(this._leftBuffer,t),a=e._downSampling(this._rightBuffer,t));var s=BABYLON.Engine.audioEngine.audioContext,o=s.createBuffer(2,n.length,s.sampleRate/t);return o.getChannelData(0).set(n),o.getChannelData(1).set(a),o},e._cleanUrl=function(){e._objectUrl&&((window.webkitURL||window.URL).revokeObjectURL(e._objectUrl),e._objectUrl=null)},e.prototype.micToScript=function(t,r,i,n,a,s){void 0===r&&(r=!0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===a&&(a=0),e.saveToScript(t,this.getAudioBuffer(),r,i,n,a,s)},e.saveToScript=function(t,r,i,n,a,s,o){if(void 0===i&&(i=!0),void 0===n&&(n=1),void 0===a&&(a=!1),void 0===s&&(s=0),e._cleanUrl(),0===t.length)return void window.alert("QI.AudioRecorder: No name specified");if(t.indexOf(".")!==-1)return void window.alert("QI.AudioRecorder: Dot not allowed in a function name");var l=t+(a?".ts":".js"),h=new Blob([e._getScriptSource(t,r,i,n,a,s,o)],{type:"text/plain;charset=utf-8"});e._objectUrl=(window.webkitURL||window.URL).createObjectURL(h);var u=window.document.createElement("a");u.href=e._objectUrl,u.download=l;var d=document.createEvent("MouseEvents");d.initEvent("click",!0,!1),u.dispatchEvent(d)},e._getScriptSource=function(t,r,i,n,a,s,o){o||(o=r.getChannelData(0).length),i=i&&r.numberOfChannels>1;var l=e._downSampling(r.getChannelData(0).slice(s,o),n),h=i?e._downSampling(r.getChannelData(1).slice(s,o),n):null,u=l.length,d=r.sampleRate/n,c=a?"export function "+t+"(scene: BABYLON.Scene) : BABYLON.Sound {\n":"function "+t+"(scene) {\n";return c+="    var context = BABYLON.Engine.audioEngine.audioContext;\n",c+="    var audioBuffer = context.createBuffer("+(i?2:1)+", "+u+", "+d+");\n",c+='    audioBuffer.getChannelData(0).set(QI.decode16Bit("'+e._floatTo16BitIntBase64(l)+'") );\n',i&&(c+='    audioBuffer.getChannelData(1).set(QI.decode16Bit("'+e._floatTo16BitIntBase64(h)+'") );\n'),c+='    var snd = new BABYLON.Sound("'+t+'", null, scene);\n',c+="    snd.setAudioBuffer(audioBuffer);\n",c+="    return snd;\n",c+="}\n"},e._floatTo16BitIntBase64=function(t){for(var r="",i=0,n=t.length;i<n;i++)r+=e._to16Bit(t[i]);return window.btoa(r)},e._to16Bit=function(e){var t=32767*e&65535,r=String.fromCharCode((65280&t)>>8);return r+=String.fromCharCode(255&t)},e.prototype.micToWAV=function(t,r,i,n,a){void 0===r&&(r=!0),void 0===i&&(i=1),void 0===n&&(n=0),e.saveToWAV(t,this.getAudioBuffer(),r,i,n,a)},e.saveToWAV=function(t,r,i,n,a,s){if(void 0===i&&(i=!0),void 0===n&&(n=1),void 0===a&&(a=0),0===t.length)return void window.alert("QI.AudioRecorder: No name specified");(t.toLowerCase().lastIndexOf(".wav")!==t.length-4||t.length<5)&&(t+=".wav");var o=new Blob([e._encodeWAV(r,i,n,a,s)],{type:"audio/wav"});e._objectUrl=(window.webkitURL||window.URL).createObjectURL(o);var l=window.document.createElement("a");l.href=e._objectUrl,l.download=t;var h=document.createEvent("MouseEvents");h.initEvent("click",!0,!1),l.dispatchEvent(h)},e._encodeWAV=function(t,r,i,n,a){a||(a=t.getChannelData(0).length),r=r&&t.numberOfChannels>1;var s=e._downSampling(t.getChannelData(0).slice(n,a),i),o=r?e._downSampling(t.getChannelData(1).slice(n,a),i):null,l=t.sampleRate/i,h=r?e._interleave(s,o):s,u=2*h.length,d=44,c=r?2:1,A=2*c,p=new ArrayBuffer(d+u),f=new DataView(p);e._writeUTFBytes(f,0,"RIFF"),f.setUint32(4,d+u,!0),e._writeUTFBytes(f,8,"WAVE"),e._writeUTFBytes(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,1,!0),f.setUint16(22,c,!0),f.setUint32(24,l,!0),f.setUint32(28,l*A,!0),f.setUint16(32,A,!0),f.setUint16(34,16,!0),e._writeUTFBytes(f,36,"data"),f.setUint32(40,u,!0);for(var S=h.length,v=d,m=1,P=0;P<S;P++)f.setInt16(v,h[P]*(32767*m),!0),v+=2;return f;
},e._writeUTFBytes=function(e,t,r){for(var i=r.length,n=0;n<i;n++)e.setUint8(t+n,r.charCodeAt(n))},e._interleave=function(e,t){for(var r=e.length+t.length,i=new Float32Array(r),n=0,a=0;a<r;)i[a++]=e[n],i[a++]=t[n],n++;return i},e._downSampling=function(e,t){if(1===t)return e;for(var r=Math.floor(e.length/t),i=new Float32Array(r),n=0,a=0;n<r*t;n+=t,a++)i[a]=e[n];return i},e})();e.AudioRecorder=t})(QI||(QI={}));var QI;!(function(e){function t(e){for(var t=window.atob(e),i=t.length,n=new Float32Array(i/2),a=0,s=0;a<i;a+=2,s++)n[s]=r(t,a);return n}function r(e,t){var r=e.charCodeAt(t),i=e.charCodeAt(t+1),n=r>>7===1;r=127&r;var a=256*r+i;return n&&(a-=32768),a/32767}e.decode16Bit=t})(QI||(QI={}));var QI;!(function(e){function t(t){var r=BABYLON.Engine.audioEngine.audioContext,i=r.createBuffer(1,3678,12e3);i.getChannelData(0).set(e.decode16Bit("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"));var n=new BABYLON.Sound("whoosh",null,t);return n.setAudioBuffer(i),n}e.Whoosh=t})(QI||(QI={}));var QI;!(function(e){function t(t){var r=BABYLON.Engine.audioEngine.audioContext,i=r.createBuffer(1,9021,12e3);i.getChannelData(0).set(e.decode16Bit("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/4P/f/+F/4T/hP9//4b/hf+E/4D/hf+F/4T/gP+H/4r/hf+F/4T/hP+F/4X/hf+F/4X/hP+E/4X/hf+G/4b/hf+G/4b/hv+F/4b/hv+H/4f/hv+H/4f/h/+G/4f/h/+I/4j/h/+H/4j/iP+H/4f/iP+I/4n/if+I/4n/if+J/4j/if+J/4r/iv+J/4r/iv+K/4n/iv+K/4n/i/+K/4r/i/+L/4r/iv+L/4v/jP+M/4v/jP+M/4z/jP+M/4v/jP+M/43/jf+N/4z/jf+N/4z/jP+N/43/jv+O/43/jv+O/47/jv+O/43/jf+O/4//j/+P/4//j/+P/47/jv+P/4//kP+Q/4//kP+Q/5D/kP+Q/4//j/+Q/5H/kf+R/5H/kf+R/5D/kf+R/5H/kv+S/5D/jv/dAJkAiQCjALcAywDIANYA3gDmAOYA7QDyAPIA8QD0APcA9wD5APkA+AD4APYA9QD1APQA+QD8AP8A/wECAQMBAwEDAQIBAAEAAP0A+ADvAPAA6QDiANkA2gDNAL8AtACvAJcAXQAu/4r/bf9X/1n/Sv9E/z//P/89/z7/Qv9D/0z/WP9c/2T/a/9y/3L/ef9+/4T/g/+G/4b/hf+F/4D/ff98/3v/ef96/3r/fv+F/5f/kv/LAFsAgQB+AIgAiwCLAIsAiQCFAIQAgAB4AGsAbABeAFQATQBMAFsAbQB/AIAAmQCsALIAugDEAMoAygDOAM8AzgDPAMoAxAC2ALcAoQB+//D/nP9h/0f/Rf83/yv/Iv8i/x7/Hv8f/x7/JP8q/zD/MP88/0z/Vf9n/6AAswCUALoA0wDoAOUA8gD3APoA+gD6APYA8gDuAOAAyQDFAKYAY/9D/2X/Nv8g/w7/EP8B/vr++f74/vv/B/8M/xb/MP9//4YArADMAOsA6gD+AQUBCAEJAQYA/QEAAO4A1wDMAI0Aov9c/y//NP8S/wz+//73/vj++f8C/wz/NP8l/3kAsAC0AOYA6gD4AP8A/wD6APQA6ADHANcAo/+s/2v/L/80/x3/Ev8R/xX/Gf8q/0z/PP+MACkApwDPAMYA0wDVANUAyQDHAK0AagBz/37/Y/9P/1P/Uf9l/3f/f/+P/4//iv+A/4H/hv+K/6X/x/+9AB4ANQBNAIEAdgCiALUAugC5ALcAq/+J/6b/Uf9B/y3/Kf8o/y//T/90AKMAlgDRAOMA6ADgANkAwv+P/7r/RP8q/xT/EP8M/x//hv+4ANIA1gDtAOgA6wDD"));
var n=new BABYLON.Sound("teleport",null,t);return n.setAudioBuffer(i),n}e.Teleport=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function e(e,t,r,i,n,a,s,o){if(this.name=e,this.winkable=t,this.blinkable=r,this.randomizable=i,this.endStateNames=n,this.endStateRatios=a,this.mirrorAxes=s,this.id=o,this.mirrorReqd=!1,this.endStateNames.length!==this.endStateRatios.length)return void BABYLON.Tools.Error("Expression: "+this.name+" invalid when endStateNames not same length as endStateRatios");if(this.mirrorAxes&&this.mirrorAxes.length!==this.endStateRatios.length)return void BABYLON.Tools.Error("Expression: "+this.name+" invalid when mirrorAxes not same length as endStateRatios");for(var l=0,h=this.endStateRatios.length;l<h;l++)if(this.endStateRatios[l]<0){this.mirrorReqd=!0;break}!this.mirrorAxes&&this.mirrorReqd&&BABYLON.Tools.Error("Expression: "+this.name+" invalid when mirrorAxes missing when an endStateRatios is negative"),Object.freeze(this)}return Object.defineProperty(e.prototype,"isViseme",{get:function(){return this.id&&this.id===e.VISEME_ID},enumerable:!0,configurable:!0}),e.prototype.toString=function(){for(var e='var exp = new QI.Expression("'+this.name+'", '+this.winkable+", "+this.blinkable+", "+this.randomizable+", ",t="[",r="[",i=this.endStateNames.length,n=0;n<i;n++)t+='"'+this.endStateNames[n]+'"',r+=this.endStateRatios[n],n+1<i?(t+=", ",r+=", "):(t+="]",r+="]");return e+=t+", "+r+", ",e+=this.mirrorReqd?'"'+this.mirrorAxes+'"':"null",e+=this.id?", "+this.id:"",e+=");\n",e+"model.addExpression(exp);"},e})();t.NONE=new t("NONE",(!0),(!0),(!1),[],[],null,0),t.ANGRY=new t("ANGRY",(!1),(!0),(!0),["CHEEKS_HIGH","CHEEKS_SUCK","EYEBROWS_ANGRY","EYEBROWS_RAISED_LEFT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","SYMMETRY_LEFT_UP"],[1.85,.3,1.85,-.3,1.4,1,-.2,1,.1],"---Y--Y--",1),t.CRYING=new t("CRYING",(!1),(!1),(!1),["CHEEKS_HIGH","CHEEKS_SUCK","EYEBROWS_RAISED_LEFT","EYEBROWS_RAISED_RIGHT","EYELIDS_SQUINT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_LIPS_LOWER_UP"],[-1,1.4,-.2,-.2,1.2,1.2,1.25,-.65],"Y-YY---Y",2),t.DISGUSTED=new t("DISGUSTED",(!1),(!0),(!0),["CHEEKS_HIGH","CHEEKS_SUCK","EYEBROWS_ANGRY","EYEBROWS_RAISED_LEFT","EYELIDS_SQUINT","WINK_LEFT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP"],[.95,.05,.55,1,.45,-.1,1.35,1.3,-.1,.2,-1],"-----Y--Y-Y",3),t.HAPPY=new t("HAPPY",(!0),(!0),(!0),["CHEEKS_HIGH","CHEEKS_PUMP","EYEBROWS_ANGRY","EYEBROWS_RAISED_LEFT","EYELIDS_SQUINT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_WIDE","SYMMETRY_CHIN_LEFT","SYMMETRY_LEFT_UP","SYMMETRY_RIGHT_UP"],[.8,.25,-.8,-.1,.15,.25,-.45,.5,.7,-.5,-.25,.4,-.1,.1,.2],"--YY--Y--YY-X--",4),t.LAUGH=new t("LAUGH",(!0),(!0),(!0),["CHEEKS_HIGH","EYEBROWS_ANGRY","EYELIDS_SQUINT","NOSE_FLARE","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN","MOUTH_PUCKER"],[.8,-1,-.15,.55,.45,-.25,.5,.85,-1],"-YY--Z--X",5),t.PPHPHT=new t("PPHPHT",(!1),(!0),(!1),["CHEEKS_HIGH","CHEEKS_SUCK","EYELIDS_SQUINT","NOSE_FLARE","TONGUE_STUCK_OUT","MOUTH_OPEN","MOUTH_PUCKER"],[.5,1,.5,1,1.05,.5,1],null,6),t.SAD=new t("SAD",(!1),(!0),(!0),["CHEEKS_HIGH","CHEEKS_PUMP","CHEEKS_SUCK","EYEBROWS_ANGRY","MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_UP","MOUTH_PUCKER","MOUTH_WIDE","SYMMETRY_CHIN_LEFT","SYMMETRY_RIGHT_UP"],[-1.45,-.35,.05,-1,-.35,-.4,.65,-.3,.25,.2,-.1],"YX-YYY-X--Y",7),t.SCARED=new t("SCARED",(!1),(!1),(!0),["CHEEKS_HIGH","EYEBROWS_RAISED_LEFT","EYEBROWS_RAISED_RIGHT","WINK_LEFT","WINK_RIGHT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_LIPS_LOWER_UP","SYMMETRY_CHIN_LEFT","SYMMETRY_RIGHT_UP"],[-.05,1.25,1.75,-.65,-.6,-.25,.35,-.6,-.65,.05],"Y--YYY-YX-",8),t.SKEPTICAL=new t("SKEPTICAL",(!1),(!1),(!0),["EYEBROWS_RAISED_LEFT","EYEBROWS_RAISED_RIGHT","WINK_RIGHT","NOSE_FLARE","SYMMETRY_CHIN_LEFT","SYMMETRY_RIGHT_UP"],[-.65,.95,-.35,-.25,-.2,.15],"Y-YYX-",9),t.STRUGGLING=new t("STRUGGLING",(!1),(!1),(!1),["EYEBROWS_ANGRY","EYEBROWS_RAISED_LEFT","EYELIDS_SQUINT","WINK_LEFT","WINK_RIGHT","NOSE_FLARE","MOUTH_CORNERS_DOWN","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_WIDE","SYMMETRY_LEFT_UP","SYMMETRY_RIGHT_UP"],[1,.6,1,.25,.35,1,.5,.35,-.7,.6,.05,-.4,.55],"--------Y--Y-",10),t.VISEME_ID=-1,t.VISEME_DICT={".":new t(".",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT"],[.25],null,t.VISEME_ID),AA:new t("AA",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_OPEN","MOUTH_PUCKER","MOUTH_WIDE"],[.3,.65,.55,.1],null,t.VISEME_ID),AO:new t("AO",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_OPEN","MOUTH_WIDE"],[.5,.35,-.35],"--X",t.VISEME_ID),"AW-OW":new t("AW-OW",(!0),(!0),(!1),["MOUTH_CORNERS_DOWN","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN","MOUTH_PUCKER","MOUTH_WIDE"],[-.05,.5,.35,.05,1.5,-.3],"Y-----",t.VISEME_ID),"AE-EH":new t("AE-EH",(!0),(!0),(!1),["MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_OPEN","MOUTH_WIDE"],[-.25,.3,.8,-.5,.45,.3],"Y--Y--",t.VISEME_ID),"AH-HH":new t("AH-HH",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_OPEN"],[.3,.4],null,t.VISEME_ID),"AY-IH":new t("AY-IH",(!0),(!0),(!1),["MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_OPEN","MOUTH_WIDE"],[-.25,.3,.8,-.5,.35,.3],"Y--Y--",t.VISEME_ID),"B-M-P":new t("B-M-P",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP"],[.55,-.45],"-Y",t.VISEME_ID),"CH-JH-SH-ZH":new t("CH-JH-SH-ZH",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_PUCKER","MOUTH_WIDE"],[.9,-.45,-.45,1.1,.8],"-YY--",t.VISEME_ID),"DH-TH":new t("DH-TH",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN","MOUTH_PUCKER","MOUTH_WIDE","TONGUE_RAISED","TONGUE_STUCK_OUT"],[.6,-1,-.05,.2,-.05,.8,.05,.45],"-YY-X---",t.VISEME_ID),"ER-R-W":new t("ER-R-W",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_OPEN","MOUTH_PUCKER"],[-.3,2,.25,1],"Z---",t.VISEME_ID),EY:new t("EY",(!0),(!0),(!1),["MOUTH_CORNERS_DOWN","MOUTH_CORNERS_UP","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN","MOUTH_WIDE"],[-.25,.3,.7,-.5,.15,.3,.3],"Y--Y---",t.VISEME_ID),"F-V":new t("F-V",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_WIDE"],[.6,.2,-.5,1],"--Y-",t.VISEME_ID),IY:new t("IY",(!0),(!0),(!1),["NOSE_FLARE","MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN"],[.4,.05,.1,.4,.1],null,t.VISEME_ID),L:new t("L",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_OPEN","MOUTH_PUCKER","MOUTH_WIDE","TONGUE_RAISED","TONGUE_STUCK_OUT"],[.35,-.7,-.2,.2,-.05,1,.2,.2],"-YY-X---",t.VISEME_ID),"OY-UH-UW":new t("OY-UH-UW",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_UP","MOUTH_OPEN","MOUTH_PUCKER"],[.65,.25,1.55],null,t.VISEME_ID),S:new t("S",(!0),(!0),(!1),["MOUTH_LIPS_LOWER_OUT","MOUTH_LIPS_LOWER_UP","MOUTH_LIPS_UPPER_UP","MOUTH_PUCKER","MOUTH_WIDE"],[.6,-1.05,-.05,-.05,.8],"-YYX-",t.VISEME_ID)},e.Expression=t;var r=(function(r){function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.doInvoluntaryBlinking=!1,e.expressions=new Array,e._randomExpressions=new Array,e._currentExpression=t.NONE,e._currentExpDegree=0,e._idleMode=!1,e._randomMode=!1,e.doRandomEyes=!1,e}return __extends(i,r),i.prototype.postConstruction=function(){this._winker=this.getShapeKeyGroup(i._WINK),this._winker.addComboDerivedKey(e.ShapeKeyGroup.BASIS,[i._LEFT,i._RIGHT],[1,1],null,i._BOTH_CLOSED),this._eyes=this.getShapeKeyGroup(i._EYES),this._face||(this._face=this.consolidateShapeKeyGroups(i._FACE,["CHEEKS","EYEBROWS","EYELIDS","MOUTH","NOSE","SYMMETRY","TONGUE","WINK"],!0),this.removeShapeKeyGroup("CHEEKS"),this.removeShapeKeyGroup("EYEBROWS"),this.removeShapeKeyGroup("EYELIDS"),this.removeShapeKeyGroup("MOUTH"),this.removeShapeKeyGroup("NOSE"),this.removeShapeKeyGroup("SYMMETRY"),this.removeShapeKeyGroup("TONGUE")),this.expressions.push(t.NONE),this.setShapeKeyGroupLast(i._WINK)},i.prototype.addExpression=function(t){this.expressions.push(t),this._face.addComboDerivedKey(e.ShapeKeyGroup.BASIS,t.endStateNames,t.endStateRatios,t.mirrorAxes,t.name),t.randomizable&&this._randomExpressions.push(this.expressions.length-1)},i.prototype.addStockExpressions=function(e,r){void 0===r&&(r=!0);var i=!e;if((i||e.indexOf("ANGRY")!==-1)&&this.addExpression(t.ANGRY),(i||e.indexOf("CRYING")!==-1)&&this.addExpression(t.CRYING),(i||e.indexOf("DISGUSTED")!==-1)&&this.addExpression(t.DISGUSTED),(i||e.indexOf("HAPPY")!==-1)&&this.addExpression(t.HAPPY),(i||e.indexOf("LAUGH")!==-1)&&this.addExpression(t.LAUGH),(i||e.indexOf("PPHPHT")!==-1)&&this.addExpression(t.PPHPHT),(i||e.indexOf("SAD")!==-1)&&this.addExpression(t.SAD),(i||e.indexOf("SCARED")!==-1)&&this.addExpression(t.SCARED),(i||e.indexOf("SKEPTICAL")!==-1)&&this.addExpression(t.SKEPTICAL),(i||e.indexOf("STRUGGLING")!==-1)&&this.addExpression(t.STRUGGLING),r)for(var n in t.VISEME_DICT)this.addExpression(t.VISEME_DICT[n])},i.prototype.removeExpressionComponents=function(){this._face.deleteShapeKey("CHEEKS_HIGH"),this._face.deleteShapeKey("CHEEKS_PUMP"),this._face.deleteShapeKey("CHEEKS_SUCK"),this._face.deleteShapeKey("EYEBROWS_ANGRY"),this._face.deleteShapeKey("EYEBROWS_RAISED_LEFT"),this._face.deleteShapeKey("EYEBROWS_RAISED_RIGHT"),this._face.deleteShapeKey("EYELIDS_SQUINT"),this._face.deleteShapeKey("WINK_BOTH_CLOSED"),this._face.deleteShapeKey("WINK_LEFT"),this._face.deleteShapeKey("WINK_RIGHT"),this._face.deleteShapeKey("SYMMETRY_CHIN_LEFT"),this._face.deleteShapeKey("SYMMETRY_LEFT_UP"),this._face.deleteShapeKey("SYMMETRY_RIGHT_UP"),this._face.deleteShapeKey("NOSE_FLARE"),this._face.deleteShapeKey("TONGUE_RAISED"),this._face.deleteShapeKey("TONGUE_STUCK_OUT"),this._face.deleteShapeKey("MOUTH_CORNERS_DOWN"),this._face.deleteShapeKey("MOUTH_CORNERS_UP"),this._face.deleteShapeKey("MOUTH_LIPS_LOWER_OUT"),this._face.deleteShapeKey("MOUTH_LIPS_LOWER_UP"),this._face.deleteShapeKey("MOUTH_LIPS_UPPER_UP"),this._face.deleteShapeKey("MOUTH_OPEN"),this._face.deleteShapeKey("MOUTH_PUCKER"),this._face.deleteShapeKey("MOUTH_WIDE")},i.prototype.getExpressionNames=function(){for(var e=this.expressions.length,t=new Array,r=0;r<e;r++)this.expressions[r].isViseme||t.push(this.expressions[r].name);return t},i.prototype.getVisemeNames=function(){for(var e=this.expressions.length,t=new Array,r=0;r<e;r++)this.expressions[r].isViseme&&t.push(this.expressions[r].name);return t},i.prototype.beforeRender=function(){r.prototype.beforeRender.call(this),this.isVisible&&(this.doRandomEyes&&!this._eyes.isActive()&&this._eyeProcessing(),this._shapeKeyChangesMade||(this.doInvoluntaryBlinking&&!this._winker.isActive()&&this._currentExpression.blinkable&&this._winkProcessing(),this._idleMode&&!this._face.isActive()&&this._moodPostProcessing()))},i.prototype._eyeProcessing=function(){var e=300*Math.random()+200,t=5e3*Math.random()+5e3,r=2*Math.random()-1,i=2*Math.random()-1;this.queueEyeRotation(r,i,e,t,!1)},i.prototype.queueEyeRotation=function(t,r,n,a,s){void 0===n&&(n=300),void 0===a&&(a=0),void 0===s&&(s=!0);var o=[],l=[];t<0?(o.push("DOWN"),l.push(Math.abs(t))):(o.push("UP"),l.push(t)),r<0?(o.push("RIGHT"),l.push(Math.abs(r))):(o.push("LEFT"),l.push(r));var h=new e.VertexDeformation(i._EYES,e.ShapeKeyGroup.BASIS,o,l,n,null,null,{millisBefore:a}),u=new e.EventSeries([h]);s&&this._eyes.clearQueue(!0),this._eyes.queueEventSeries(u)},i.prototype._winkProcessing=function(){var e=Math.random()*(i._MAX_INTERVAL-2e3)+2e3;this._queueLids(i._BLINK,10,e,!1)},i.prototype.winkLeft=function(e){void 0===e&&(e=50),this._queueLids(i._WINK_LEFT,e)},i.prototype.winkRight=function(e){void 0===e&&(e=50),this._queueLids(i._WINK_RIGHT,e)},i.prototype.blink=function(){this._queueLids(i._BLINK,20)},i.prototype._queueLids=function(t,r,n,a){void 0===n&&(n=0),void 0===a&&(a=!0);var s;switch(t){case i._BLINK:if(!this._currentExpression.blinkable)return;s=[new e.Deformation(i._WINK,i._BOTH_CLOSED,1,i._DEFORM_SPEED,null,null,{millisBefore:n}),new e.BasisReturn(i._WINK,i._DEFORM_SPEED,null,null,{millisBefore:r})];break;case i._WINK_LEFT:if(!this._currentExpression.winkable)return;s=[new e.Deformation(i._WINK,i._LEFT,1,i._DEFORM_SPEED,null,null,{millisBefore:n}),new e.BasisReturn(i._WINK,i._DEFORM_SPEED,null,null,{millisBefore:r})];break;case i._WINK_RIGHT:if(!this._currentExpression.winkable)return;s=[new e.Deformation(i._WINK,i._RIGHT,1,i._DEFORM_SPEED,null,null,{millisBefore:n}),new e.BasisReturn(i._WINK,i._DEFORM_SPEED,null,null,{millisBefore:r})]}var o=new e.EventSeries(s,1,1,i._WINK);a&&this._winker.clearQueue(!0),this._winker.queueEventSeries(o)},i.prototype._moodPostProcessing=function(t){var r=t?250:750,n=t?0:200*Math.random();if(!t){var a=.3*Math.random()-.15;this._currentExpDegree>=.7?a-=.02:this._currentExpDegree<=.2&&(a+=.02),this._currentExpDegree+=a,this._randomMode&&this._pickAMood()}var s;s=this._currentExpression.endStateNames.length>0?new e.Deformation(i._FACE,this._currentExpression.name,this._currentExpDegree,r,null,null,{millisBefore:n}):new e.BasisReturn(i._FACE,r);var o=new e.EventSeries([s]),l=this.isVisible&&t;this._face.queueEventSeries(o,l,l)},i.prototype._pickAMood=function(){if(!(this._numChangesOfCurrentMood++<this._totChangesOfCurrentMood)){var e=Math.floor(Math.random()*this._randomExpressions.length);this._currentExpression=this.expressions[e],this._numChangesOfCurrentMood=0,this._totChangesOfCurrentMood=Math.floor(Math.random()*(i._MAX_CHANGES_FOR_MOOD-5)+5),this._currentExpDegree=.3}},i.prototype.setIdleMode=function(e){this._idleMode=e,!e&&this._randomMode&&this.setRandomExpressionSwitching(!1),this._numChangesOfCurrentMood=i._MAX_CHANGES_FOR_MOOD},i.prototype.setRandomExpressionSwitching=function(e){this._randomMode=e,e&&!this._idleMode&&this.setIdleMode(!0)},i.prototype.setCurrentMood=function(r,n,a){for(var s=r instanceof t?r.name:r,o=-1,l=0,h=this.expressions.length;l<h;l++)if(this.expressions[l].name===s){o=l;break}if(o!==-1)return this._currentExpDegree=n,this._currentExpression=this.expressions[o],a||(this._numChangesOfCurrentMood=0,this._totChangesOfCurrentMood=Math.floor(Math.random()*(i._MAX_CHANGES_FOR_MOOD-5)+5),this._moodPostProcessing(!0)),this._currentExpression;if(r instanceof t){this.setIdleMode(!1),this.setRandomExpressionSwitching(!1);var u=r,d=u.mirrorReqd?{mirrorAxes:u.mirrorAxes}:{},c=new e.VertexDeformation(i._FACE,e.ShapeKeyGroup.BASIS,u.endStateNames,u.endStateRatios,250,null,null,d),A=new e.EventSeries([c]);return this._face.queueEventSeries(A,this.isVisible,this.isVisible),r}return BABYLON.Tools.Error("QI.Automaton- "+this.name+" does not have expression: "+s),null},i})(e.Mesh);r._WINK="WINK",r._BLINK=0,r._BOTH_CLOSED="BOTH_CLOSED",r._WINK_LEFT=1,r._LEFT="LEFT",r._WINK_RIGHT=2,r._RIGHT="RIGHT",r._FACE="FACE",r._MAX_CHANGES_FOR_MOOD=10,r._EYES="EYES",r._MAX_INTERVAL=8e3,r._DEFORM_SPEED=50,e.Automaton=r})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.makeEntrance=function(){var t,i=r.buildScatter(this._mesh),n=this;t=[new e.MorphImmediate(e.Mesh.COMPUTED_GROUP_NAME,i,1,{sound:n.soundEffect}),function(){n._mesh.isVisible=!0},new e.BasisReturn(e.Mesh.COMPUTED_GROUP_NAME,n.durations[0]),function(){n._mesh.makeVisible(!0),n._mesh.removeShapeKeyGroup(e.Mesh.COMPUTED_GROUP_NAME)}],this._mesh.appendStallForMissingQueues(t,this.durations[0],e.Mesh.COMPUTED_GROUP_NAME);var a=new e.EventSeries(t,1,1,e.Mesh.COMPUTED_GROUP_NAME);this._mesh.queueEventSeries(a,!1,!1,!0),this._mesh.resumeInstancePlay()},r.buildScatter=function(e){for(var t,r="SCATTER",i=e._originalPositions.length,n=e.makeComputedGroup(),a=e.getBoundingInfo().boundingBox.center,s=new Float32Array(i),o=0;o<i;o+=3)t=(e._originalPositions[o]-a.x)*Math.random(),s[o]=e._originalPositions[o]+t,t=(e._originalPositions[o+1]-a.y)*Math.random(),s[o+1]=e._originalPositions[o+1]+t,t=(e._originalPositions[o+2]-a.z)*Math.random(),s[o+2]=e._originalPositions[o+2]+t;return n._addShapeKey(r,!1,s),r},r})(e.AbstractGrandEntrance);e.GatherEntrance=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.makeEntrance=function(){if(!BABYLON.FireMaterial)throw"Fire Material library not found";this._count=3;var e=this,t=function(){e._loaded()};this._diffuse=BABYLON.Texture.CreateFromBase64String("data:image/JPEG;base64,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","fireDiffuseTex",this._mesh.getScene(),!1,!0,BABYLON.Texture.TRILINEAR_SAMPLINGMODE,t),this._distortion=BABYLON.Texture.CreateFromBase64String("data:image/JPEG;base64,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","fireDistortionTex",this._mesh.getScene(),!1,!0,BABYLON.Texture.TRILINEAR_SAMPLINGMODE,t),
this._opacity=BABYLON.Texture.CreateFromBase64String("data:image/JPEG;base64,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","fireOpacityTex",this._mesh.getScene(),!1,!0,BABYLON.Texture.TRILINEAR_SAMPLINGMODE,t)},r.prototype._loaded=function(){0===--this._count&&this._showTime()},r.prototype._showTime=function(){var t=new BABYLON.FireMaterial("Fire Entrance",this._mesh.getScene());t.diffuseTexture=this._diffuse,t.distortionTexture=this._distortion,t.opacityTexture=this._opacity,t.speed=1,t.alpha=.5,t.checkReadyOnlyOnce=!0;var r=this._mesh.getDescendants();r.push(this._mesh);for(var i=new Array(r.length),n=0,a=r.length;n<a;n++)i[n]=r[n].material,r[n].material=t;var s=this,o=[function(){s._mesh.makeVisible(!0)},new e.Stall(s.durations[0],e.PovProcessor.POV_GROUP_NAME,s.soundEffect),function(){for(var e=0,n=r.length;e<n;e++)r[e].material=i[e];t.dispose(),s._diffuse.dispose(),s._distortion.dispose(),s._opacity.dispose()}];this._mesh.appendStallForMissingQueues(o,this.durations[0]);var l=new e.EventSeries(o);this._mesh.queueEventSeries(l,!1,!1,!0),this._mesh.resumeInstancePlay()},r})(e.AbstractGrandEntrance);e.FireEntrance=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.makeEntrance=function(){var t=this,r=t._mesh.scaling;t._mesh.scaling=BABYLON.Vector3.Zero();var i;i=[function(){t._mesh.makeVisible(!0)},new e.PropertyEvent(t._mesh,"scaling",r,this.durations[0],{sound:t.soundEffect})];var n=this._mesh.getScene();BABYLON.HighlightLayer&&n.getEngine().isStencilEnable&&(i.splice(0,0,(function(){var e=n.activeCameras.length>0?n.activeCameras[0]:n.activeCamera;t._HighLightLayer=new BABYLON.HighlightLayer("QI.ExpandEntrance internal",n,{camera:e}),t._HighLightLayer.addMesh(t._mesh,BABYLON.Color3.White());for(var r=t._mesh.getDescendants(),i=0,a=r.length;i<a;i++)t._HighLightLayer.addMesh(r[i],BABYLON.Color3.White())})),i.push(new e.Stall(t.durations[1])),i.push((function(){t._HighLightLayer.dispose()}))),this._mesh.appendStallForMissingQueues(i,this.durations[0]+this.durations[1],e.Mesh.COMPUTED_GROUP_NAME);var a=new e.EventSeries(i);this._mesh.queueEventSeries(a,!1,!1,!0),this._mesh.resumeInstancePlay()},r})(e.AbstractGrandEntrance);e.ExpandEntrance=t})(QI||(QI={}));var QI;!(function(e){var t=(function(t){function r(e,i,n,a){var s=t.call(this,e,i,n,a)||this;return r._SB_INITIALIZED||(r._SB_INITIALIZED=!0,BABYLONX.ShaderBuilder.InitializeEngine()),s}return __extends(r,t),r.prototype._getEffectHostMesh=function(){return null},r.prototype._makeCallback=function(){return null},r.prototype.makeEntrance=function(){this._originalScale=this._mesh.scaling.clone(),this._mesh.scaling=new BABYLON.Vector3(1e-7,1e-7,1e-7),this._effectHostMesh=this._getEffectHostMesh(),this._effectHostMesh.setEnabled(!1);var t=this,r=[function(){t._mesh.makeVisible(!0),t._effectHostMesh.setEnabled(!0)},new e.RecurringCallbackEvent(this._makeCallback(),t.durations[0],{sound:t.soundEffect}),function(){t._effectHostMesh.dispose()}];this._mesh.appendStallForMissingQueues(r,this.durations[0]);var i=new e.EventSeries(r);this._mesh.queueEventSeries(i,!1,!1,!0),this._mesh.resumeInstancePlay()},r})(e.AbstractGrandEntrance);t._SB_INITIALIZED=!1,e.ShaderBuilderEntrance=t;var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._getEffectHostMesh=function(){var e=this._mesh.getScene(),r=this._mesh.getSizeCenterWtKids(),i=Math.max(r.size.x,r.size.z)*t._RADUIS_MULT,n=BABYLON.Mesh.CreateCylinder(this._mesh+"_tp",r.size.y,i,i,30,6,e);n.position=r.center;var a="16.",s="0.1",o=BABYLONX.Shader.Print(r.size.y),l="sin("+a+"* pos.y /"+o+" - sin(pos.x * "+s+" / "+o+") + 1. * speed * time * "+s+"),sin("+a+" * pos.y / "+o+" + cos(pos.z * "+s+" / "+o+") + 1. * speed * time * "+s+") * 0.2 ,0.",h="16.",u="vec4(color.xyz,min((5. - "+h+" * pos.y / "+o+" ),"+h+" * pos.y / "+o+" * 0.5 + 4.) * color.w * length(result.xyz) / 1.5)",d=new BABYLONX.ShaderBuilder;d.SetUniform("color","vec4"),d.SetUniform("speed","float"),d.VertexShader("result = vec4(pos + nrm * (length(vec3( "+l+" ))) * 0.6, 1.);"),d.InLine("result = vec4( "+l+",1.);"),d.InLine("result = "+u+";"),d.Back("result.xyz = color.xyz;"),d.Transparency();var c=d.BuildMaterial(e);return c.setVector4("color",new BABYLON.Vector4(1,1,0,.3)),c.setFloat("speed",1),n.material=c,n},t.prototype._makeCallback=function(){var e=this;return function(t){var r=e._effectHostMesh.material;r.setFloat("speed",Math.sin(t)),r.setFloat("time",100*t),t>=.85&&(e._mesh.scaling=e._originalScale)}},t})(t);r._RADUIS_MULT=1.2,e.TeleportEntrance=r;var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._st_time=0,t}return __extends(t,e),t.prototype._getEffectHostMesh=function(){var e=this._mesh.getScene(),t=this._mesh.getSizeCenterWtKids(),r=(t.size.x+t.size.y+t.size.z)/3,i=r/2,n=i.toFixed(1),a=BABYLON.Mesh.CreateSphere(this._mesh+"_tp",40,r,e);a.position=t.center;var s={r:.8,g:.8,b:.8,a:1},o="0.1",l=(new Date).getMilliseconds().toFixed(1),h="nrm * pow(min(20.6, pow(ssp * stt * 1.3 * 2.123423 + sin(ssp * stt)  *0.01 ,0.4)), 1.) + ";h+="nrm * pow(ssp * stt * 0.03 * 2.123423, ",h+="(abs((ssp * stt * 0.003)) * 0.2)) * 3. * vec3(noise(pos * 0.003 + nrm + vec3(0., -1., 0.) * (ssp * stt * 0.001) + ",h+="ssp * stt * 0.001 + "+l+" * 0.12568) + ",h+="0.3 * noise(pos * 0.02 + vec3(0., 1., 0.) * (ssp * stt * 0.003 + "+l+" * 0.12568) * 0.1) )";var u=new BABYLONX.ShaderBuilder;u.Setting.WorldPosition=!0,u.SetUniform("color","vec4"),u.SetUniform("color2","vec4"),u.SetUniform("speed","float"),u.SetUniform("st_time","float"),u.VertexShader("wpos = pos;float stt = 0.;if (st_time != 0.) stt = time - st_time;float ssp = 1.;if (stt < 2000.) stt = max(0., stt - stt * stt / 5500.);pos = pos + nrm * (max(ssp * stt / 75., length(vec3("+h+")))) * "+o+";result = vec4(pos, 1.);"),u.InLine("float stt = 0.;float ssp = 1.;if (st_time == 0.) discard;if (st_time != 0.) stt = time - st_time;result = vec4( "+h+", 1.);if (stt < 2000.) stt = max(0., stt - stt * stt / 5500.);"),u.Effect({pr:"min(1. ,max(-1., pr))"}),u.InLine("result = vec4( vec3(length(pos) - 10. * "+n+" )/(20.6 * "+n+"), 1.);"),u.Reference(2,null),u.Effect({pr:"min(1., max(-1., pow(pr, 2.5) * 7.))"}),u.Reference(1,null),u.Solid(s),u.InLine("result.xyz = length(result_1.xyz) * vec3(0.,0.,0.) * (min(1., max(0., (stt - 150.) / 1050.))) + result.xyz * (1. - min(1., max(0., (stt - 100.) / 550.)));"),u.Effect({pr:"pow(pr, 3.) * 7."}),u.InLine("result.w = 1. - (stt - 100.) / 850.;if(stt > 300.) result.w = (1.- min(1., (stt - 100.) / 850.)) * length(result_1.xyz);"),u.Transparency();var d=u.BuildMaterial(e);return d.setVector4("color",new BABYLON.Vector4(1,1,0,1)),d.setVector4("color2",new BABYLON.Vector4(1,0,0,1)),d.setFloat("speed",-2),d.setFloat("st_time",0),a.material=d,a},t.prototype._makeCallback=function(){var e=this;return function(r){var i=e._effectHostMesh.material;0===e._st_time&&(e._st_time=1e-4,i.setFloat("st_time",e._st_time)),i.setFloat("time",r*t._MAX_TIME),r>=.25&&(e._mesh.scaling=e._originalScale)}},t})(t);i._MAX_TIME=1300,e.PoofEntrance=i})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(){}return t.perform=function(e,r,i,n,a){var s=t.EFFECTS[e];if(!s)throw"No such scene transition: "+e;s.initiate(r,i,n)},t.makeAllVisible=function(t){for(var r=0,i=t.length;r<i;r++){var n=t[r];if(n instanceof e.Mesh)n.makeVisible(!0);else{var a=n.getChildMeshes();n.isVisible=!0;for(var s=0,o=a.length;s<o;s++)a[r].isVisible=!0}}},t})();t.EFFECTS={},e.SceneTransition=t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(){}return t.prototype.initiate=function(r,i,n){e.SceneTransition.makeAllVisible(r);var a=e.TimelineControl.scene.activeCamera||e.TimelineControl.scene.activeCameras[0],s=new BABYLON.BlurPostProcess("Horizontal blur",new BABYLON.Vector2(1,0),t._INITIAL_KERNEL,1,a),o=new BABYLON.BlurPostProcess("Vertical blur",new BABYLON.Vector2(0,1),t._INITIAL_KERNEL,1,a),l=i?i:t._DEFAULT_MILLIS,h=n?n:this._sound,u={pace:new e.SinePace(e.Pace.MODE_INOUT),privilegedEvent:!0};h&&(u.sound=h);var d=function(e){s.kernel=t._INITIAL_KERNEL*(1-e),o.kernel=t._INITIAL_KERNEL*(1-e)},c=new e.RecurringCallbackEvent(d,l,u),A=function(){s.dispose(),o.dispose()};c.alsoClean(A),c.initialize(0,e.TimelineControl.scene)},t})();t.NAME="INTO_FOCUS",t._INITIAL_KERNEL=200,t._DEFAULT_MILLIS=5e3,e.IntoFocusTransition=t,e.SceneTransition.EFFECTS[t.NAME]=new t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(){}return t.prototype.initiate=function(r,i,n){e.SceneTransition.makeAllVisible(r);var a=e.TimelineControl.scene.activeCamera||e.TimelineControl.scene.activeCameras[0],s=new BABYLON.BlackAndWhitePostProcess("WelcomeToWonderLand",1,a),o=i?i:t._DEFAULT_MILLIS,l=n?n:this._sound,h={pace:new e.SinePace(e.Pace.MODE_INOUT),privilegedEvent:!0};l&&(h.sound=l);var u=new e.PropertyEvent(s,"degree",0,o,h),d=function(){s.dispose()};u.alsoClean(d),u.initialize(0,e.TimelineControl.scene)},t})();t.NAME="TO_COLOR",t._DEFAULT_MILLIS=5e3,e.ToColorTransition=t,e.SceneTransition.EFFECTS[t.NAME]=new t})(QI||(QI={}));var QI;!(function(e){var t=(function(){function t(){}return t.prototype.initiate=function(r,i,n){e.SceneTransition.makeAllVisible(r),this._meshes=r;var a=(e.TimelineControl.scene.activeCamera||e.TimelineControl.scene.activeCameras[0],i?i:t._DEFAULT_MILLIS),s=n?n:this._sound,o={pace:new e.SinePace(e.Pace.MODE_INOUT),privilegedEvent:!0};s&&(o.sound=s);var l=this,h=function(e){l._changeVisiblity(e,l._meshes)},u=new e.RecurringCallbackEvent(h,a,o),d=function(){l._meshes=null};u.alsoClean(d),u.initialize(0,e.TimelineControl.scene)},t.prototype._changeVisiblity=function(e,t){for(var r=0,i=t.length;r<i;r++){var n=t[r];n.visibility=e;var a=n.getChildMeshes();a.length>0&&this._changeVisiblity(e,a)}},t})();t.NAME="VISIBLITY",t._DEFAULT_MILLIS=5e3,e.VisiblityTransition=t,e.SceneTransition.EFFECTS[t.NAME]=new t})(QI||(QI={}));var TOWER_OF_BABEL;!(function(e){var t=(function(){function e(){}return e.instance=function(t,r,i){for(var n,a=0,s=e.MODULES.length;a<s;a++)if(t===e.MODULES[a].getModuleName()){n=e.MODULES[a].instance(r,i);break}return n||BABYLON.Tools.Error("MeshFactory.instance:  module ("+t+") not loaded"),n},e})();t.MODULES=new Array,e.MeshFactory=t})(TOWER_OF_BABEL||(TOWER_OF_BABEL={}));var TOWER_OF_BABEL;!(function(e){var t=(function(){function e(e,t){this.jsPath=e,this.matPath=t,this._characters=new Array,this._busts=new Array,this._sceneChunks=new Array,this.jsPath.lastIndexOf("/")+1!==this.jsPath.length&&(this.jsPath+="/"),this.matPath.lastIndexOf("/")+1!==this.matPath.length&&(this.matPath+="/")}return e.prototype.addCharacter=function(e){e._preloader=this,this._characters.push(e)},e.prototype.addBust=function(e){e._preloader=this,this._busts.push(e)},e.prototype.addSceneChunk=function(e){e._preloader=this,this._sceneChunks.push(e)},e.addtextureBuffer=function(t){e._images.push(t)},e.findTextureBuffer=function(t){for(var r=0,i=this._images.length;r<i;r++)if(e._images[r].fName===t)return e._images[r];return null},Object.defineProperty(e.prototype,"numCharacters",{get:function(){return this._characters.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numBusts",{get:function(){return this._busts.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSceneChunks",{get:function(){return this._sceneChunks.length},enumerable:!0,configurable:!0}),e.prototype.prepRemainingCharacters=function(){for(var e=0,t=this._characters.length;e<t;e++)this._characters[e].makeReady()},e.prototype.prepRemainingBusts=function(){for(var e=0,t=this._busts.length;e<t;e++)this._busts[e].makeReady()},e.prototype.pickCharacter=function(e,t){var r=e?this._busts:this._characters;return"undefined"==typeof t&&(t=Math.floor(Math.random()*r.length)),r[t]},e})();t.READ_AHEAD_LOGGING=!1,t.MAKE_MULTI_SCENE=!1,t._images=new Array,e.Preloader=t})(TOWER_OF_BABEL||(TOWER_OF_BABEL={}));var TOWER_OF_BABEL;!(function(TOWER_OF_BABEL){var PreLoadable=(function(){function PreLoadable(e,t){this.moduleName=e,this._jsFile=t,this._onPath=!1,this._inProgress=!1}return PreLoadable.prototype.makeReady=function(readyCallback){var _this=this;if(this._onPath)return readyCallback&&readyCallback(),!0;if(this._inProgress)return this._userCallback||(this._userCallback=readyCallback),!1;this._inProgress=!0,this._loadStart=BABYLON.Tools.Now,readyCallback&&(this._userCallback=readyCallback);var jsElem=document.createElement("script");jsElem.type="application/javascript",jsElem.src=this._preloader.jsPath+this._jsFile,document.body.appendChild(jsElem);var ref=this;return jsElem.onload=function(){ref._onPath=ref._inProgress=!0,TOWER_OF_BABEL.Preloader.READ_AHEAD_LOGGING&&BABYLON.Tools.Log(ref._jsFile+" loaded in "+((BABYLON.Tools.Now-ref._loadStart)/1e3).toFixed(3)+" secs");try{eval(ref.moduleName+'.matReadAhead("'+ref._preloader.matPath+'");')}catch(err){BABYLON.Tools.Error("TOWER_OF_BABEL.PreLoadable: module "+ref.moduleName+".matReadAhead() failed")}ref._userCallback&&_this._userCallback(),ref._userCallback=null},jsElem.onerror=function(){BABYLON.Tools.Error("TOWER_OF_BABEL.PreLoadable: "+jsElem.src+" failed to load.")},!1},PreLoadable})();TOWER_OF_BABEL.PreLoadable=PreLoadable;var Character=(function(_super){function Character(e,t,r){var i=_super.call(this,e,t)||this;return i.className=r,i}return __extends(Character,_super),Character.prototype.instance=function(name){if(!this._onPath)return BABYLON.Tools.Error("TOWER_OF_BABEL.Character: Not correctly made ready."),null;var ret;return eval("ret = new "+this.moduleName+"."+this.className+'("'+name+'", TOWER_OF_BABEL.Preloader.SCENE, "'+this._preloader.matPath+'")'),ret},Character})(PreLoadable);TOWER_OF_BABEL.Character=Character;var SceneChunk=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.instance=function(e){if(!this._onPath)return void BABYLON.Tools.Error("TOWER_OF_BABEL.SceneChunk: Not correctly made ready.")},t})(PreLoadable);TOWER_OF_BABEL.SceneChunk=SceneChunk})(TOWER_OF_BABEL||(TOWER_OF_BABEL={}));var TOWER_OF_BABEL;!(function(e){var t=(function(){function t(e,t){this.path=e,this.fName=t,this._buffer=null,this._fetchStart=BABYLON.Tools.Now,this.path.lastIndexOf("/")+1!==this.path.length&&(this.path+="/"),this._load(!1)}return t.prototype._load=function(t){var r=null,i=this,n=this.path+this.fName,a=e.Preloader.SCENE.getEngine().textureFormatInUse,s=n.lastIndexOf("."),o=!t&&a;o&&(n=n.substring(0,s)+a,r=function(){i._load(!0)}),o?BABYLON.Tools.LoadFile(n,(function(e){i._notifyReady(e)}),null,e.Preloader.SCENE.database,!0,r):BABYLON.Tools.LoadImage(n,(function(e){i._notifyReady(e)}),r,e.Preloader.SCENE.database)},t.prototype._notifyReady=function(t){this._buffer=t,e.Preloader.READ_AHEAD_LOGGING&&BABYLON.Tools.Log(this.fName+" fetched in "+((BABYLON.Tools.Now-this._fetchStart)/1e3).toFixed(3)+" secs"),this._userCallback&&this._assign(this._userCallback)},t.prototype.applyWhenReady=function(e,t,r){this._mat=e,this._txType=t,this._buffer?this._assign(r):this._userCallback=r},t.prototype._assign=function(r){var i=new BABYLON.Texture(this.path+this.fName,e.Preloader.SCENE,(!1),(!0),BABYLON.Texture.TRILINEAR_SAMPLINGMODE,r,null,this._buffer);switch(this._buffer&&!e.Preloader.MAKE_MULTI_SCENE&&delete this._buffer,i.name=this.fName,i.hasAlpha=this.hasAlpha,i.level=this.level,i.coordinatesIndex=this.coordinatesIndex,i.coordinatesMode=this.coordinatesMode,i.uOffset=this.uOffset,i.vOffset=this.vOffset,i.uScale=this.uScale,i.vScale=this.vScale,i.uAng=this.uAng,i.vAng=this.vAng,i.wAng=this.wAng,i.wrapU=this.wrapU,i.wrapV=this.wrapV,this._txType){case t.DIFFUSE_TEX:this._mat.diffuseTexture=i;break;case t.BUMP_TEX:this._mat.bumpTexture=i;break;case t.AMBIENT_TEX:this._mat.ambientTexture=i;break;case t.OPACITY_TEX:this._mat.opacityTexture=i;break;case t.EMISSIVE_TEX:this._mat.emissiveTexture=i;break;case t.SPECULAR_TEX:this._mat.specularTexture=i;break;case t.REFLECTION_TEX:this._mat.reflectionTexture=i}},t})();t.DIFFUSE_TEX=0,t.BUMP_TEX=1,t.AMBIENT_TEX=2,t.OPACITY_TEX=3,t.EMISSIVE_TEX=4,t.SPECULAR_TEX=5,t.REFLECTION_TEX=6,e.TextureBuffer=t})(TOWER_OF_BABEL||(TOWER_OF_BABEL={})),("undefined"!=typeof window&&window.module||"undefined"!=typeof module)&&"undefined"!=typeof module.exports&&(module.exports=QI);
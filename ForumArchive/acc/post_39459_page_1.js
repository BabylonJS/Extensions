[{"Owner":"Nacheitor","Date":"2018-08-16T10:09:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ I_t_m trying to develop a shader in Babylon like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe problem is that always return the barycentric attribute (0_co_ 0_co_ 0). Someone know what could be the problem?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy shader code is the following_dd_\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tBABYLON.Effect.ShadersStore[_t_infillVertexShader_t_] _eq_ `_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â precision highp float_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â attribute vec3 position_co_ barycentric_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â  uniform mat4 worldViewProjection_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â varying vec3 vBC_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â  void main(){_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  vBC _eq_ barycentric_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â Â Â  Â vec4 p _eq_ vec4(position_co_ 1.)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â Â Â  Â gl_Position _eq_ worldViewProjection * p_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â }_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â `_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â BABYLON.Effect.ShadersStore[_t_infillFragmentShader_t_] _eq_ `_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â #extension GL_OES_standard_derivatives _dd_ enable_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â precision highp float_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â varying vec3 vBC_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â  float edgeFactor(){_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  vec3 d _eq_ fwidth(vBC)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  vec3 a3 _eq_ smoothstep(vec3(0.0)_co_ d*1.5_co_ vBC)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  return min(min(a3.x_co_ a3.y)_co_ a3.z)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â  }\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â  void main(){_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  // coloring by edge_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  gl_FragColor _eq_ vec4(mix(vec3(0.0)_co_ vec3(0.5)_co_ edgeFactor())_co_ 1.0)_sm_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  // alpha by edge_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  if(gl_FrontFacing) {_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â Â Â Â Â  gl_FragColor _eq_ vec4(vec3(1.0_co_ 1.0_co_ 1.0)_co_ (1.0 - edgeFactor()) * 0.95)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â  } else {_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â Â Â Â Â Â Â Â Â Â  gl_FragColor _eq_ vec4(vec3(1.0_co_ 1.0_co_ 1.0)_co_ (1.0 - edgeFactor()) * 0.7)_sm__lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â Â Â  Â }_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â Â Â  Â }_lt_br /_gt_\n\t\t\tÂ Â  Â Â Â  Â `_sm_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-16T10:45:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ it would be amazing if you could share a playground highlighting the issue.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFrom what I guess you are using an attribute named barycentric but you are not bing and/or creating it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-16T14:33:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere you have a playground_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#SLK1PH_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#SLK1PH_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can see that the sphere color is black.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-16T14:50:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs described before_co_ you are not populating the _qt_barycentric_qt_ attribute you are using in the shader.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBabylon by default comes with position_co_ normal_co_ uvs_co_ vertex colors_co_ tangents ... but no barycentric coordinates which is quite specifice to your need.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDidÂ you try the wireframe mode of the mesh ? it should be pretty similar than what you are trying to achieve.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf it does not fit you could store the barycentric info in the normals as you might not need them in this kind of shader or could also use tangents or vertex colors that could also fit with your need.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-16T15:29:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you_co_ Sebavan_co_ for your help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI cant use normal information because the barycentric information is different for each vertex depending to de facet _lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_ to which it belongs_lt_/span_gt__lt_/span_gt_. Barycentric information is the vertex coodinates inside each facet_co_ in differents facets the same vertex have diferents coodinates...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI dont want to use wireframe of the mesh because I want to draw the wireframe and the model at the same time. Like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//codeflow.org/webgl/barycentric-wireframe/www/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//codeflow.org/webgl/barycentric-wireframe/www/_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-16T16:20:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou willÂ in this case need to dedup the indices to ensure that every triangle would have its own vertex data. once it is the case the uniqueness would not be an issue anymore.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother approach might be to render the mesh twice_co_ once normally and once in wireframe which could be fast enought as the info would already be in the gpu.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo not hesitate if you need help with either of those approaches.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-17T10:22:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks Sebavan_co_ I have chosen to implement the first approach. You can see the result here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7ZPM3C%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7ZPM3C#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope than someone need something like this_co_ this thread could help him...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-17T10:51:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGG thanks for the playground_co_ it might help others.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-08-17T15:16:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_iframe allowfullscreen_eq__qt__qt_ data-controller_eq__qt_core.front.core.autosizeiframe_qt_ data-embedcontent_eq__qt__qt_ data-embedid_eq__qt_embed4672807702_qt_ scrolling_eq__qt_no_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/36576-understanding-buffers-better/?do_eq_embed_qt_ style_eq__qt_height_dd_219px_sm_max-width_dd_502px_sm__qt__gt__lt_/iframe_gt_\n_lt_p_gt_\n\t_lt_br /_gt_\n\tyou can bind custom attribute buffers._lt_br /_gt_\n\tLet me look up how to calculate barycentric stuff and Ill give example._lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//en.wikipedia.org/wiki/Barycentric_coordinate_system_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//en.wikipedia.org/wiki/Barycentric_coordinate_system_lt_/a_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\too ezpz_lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1TDIAH%2320_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1TDIAH#20_lt_/a_gt__lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1TDIAH%2321_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1TDIAH#21_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\taw I just saw_dd_Â _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7ZPM3C%232_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//playground.babylonjs.com/#7ZPM3C#2_lt_/a_gt__lt_br /_gt_\n\tYou are gonna wanna use a combination of both of our methods. (so you don_t_t replace your normals)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-21T07:40:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ Prime8_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to work with vertex buffer but I dont get the same results than you_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7ZPM3C%233_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7ZPM3C#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould you know what the problem is?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-21T08:41:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28693-nacheitor/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28693_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28693-nacheitor/_qt_ rel_eq__qt__qt__gt_@Nacheitor_lt_/a_gt_Â the easiest is to not use indexed meshes_dd_Â _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7ZPM3C%234_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7ZPM3C#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_div style_eq__qt_background-color_dd_#fffffe_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt_\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_sphere.convertToUnIndexedMesh()_sm__lt_/span_gt_\n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\tÂ \n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_This will prevent you to try to map to the indexed position when filling your array of barycentric data._lt_/span_gt_\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-21T16:34:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_Thanks_co_ everything works perfectly._lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-22T09:22:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_Hi again_co_ I_t_ve been trying to load several models with the shader we did._lt_/span_gt_ _lt_span_gt_The problem is that at the moment that two models are in the same scene_co_ sometimes one is painted over the other_co_ depending on the position of the camera._lt_/span_gt_ _lt_span_gt_You can see it in the example_dd__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7ZPM3C%236_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7ZPM3C#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_You can see how the order of the shaders changes by moving the camera from top to bottom._lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_Would there be any way to make a model paint on top of the other_co_ without depending on the position of the camera?_lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-22T12:39:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis is expected with transparency ordering (closest mat from the cam renders first)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou should have a read atÂ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered_lt_/a_gt_Â and you ll find all the possible solutions for your issue. In case you wonder_co_ you are in blend node _lt_span_gt__lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ™‚_lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nacheitor","Date":"2018-08-22T17:22:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you_co_ Sebavan.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span lang_eq__qt_en_qt_ xml_dd_lang_eq__qt_en_qt__gt__lt_span_gt_The article is very instructive._lt_/span_gt__lt_/span_gt_ I can change the transparency rendering order using the property alphaIndex.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]
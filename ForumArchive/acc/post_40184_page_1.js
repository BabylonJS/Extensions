[{"Owner":"jdavid","Date":"2018-09-23T00:59:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello all_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m working on my first Babylon.JS project_co_ which involves a ground terrain for a small island.Â  I_t_d like to find a good balance of performance and looking good_co_ and currently I have neither. _lt_span_gt__dd_-/_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCurrently_co_ I_t_ve got a terrain heightmap I exported from WorldCreator (2048 x 2048 PNG) that I_t_m using withÂ BABYLON.MeshBuilder.CreateGroundFromHeightMap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere are the parameters I_t_m creating the GroundFromHeightMap with_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_{\n\twidth_dd_ 2048_co_\n\theight_dd_ 2048_co_\n\tsubdivisions_dd_ 1024_co_\n\tminHeight_dd_ -289_co_\n\tmaxHeight_dd_ 364\n}\n\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThen I_t_m just applying a green StandardMaterial and adding a blue Ground plane to represent water.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe result of this_co_ using a UniversalCamera with no gravity for the moment_co_ is already down to 12-13 frames per second_co_ and the terrain shape still looks pretty terrible.Â  It_t_sÂ especially blocky at the waterline.Â  (Pictures attached.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are so many different places I could have gone wrong here_co_ that I thought it might be best to ask for some guidance.Â  What would I have to change to get a nice_co_ smooth shoreline at 60fps on a 2016 Macbook Pro?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tChanging the number of subdivisions obviously has a huge impact on performance_co_ but lowering it (to raise FPS) makes things look even worse.Â  Changing the width and height don_t_t seem to matter much.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs it not realistic to have a terrain this size_co_ and I should be looking into chunking it?Â  If so_co_ what sort of sizes of heightmap chunks vs # of subdivisions have people had good results with in the past on middle-of-the-road hardware?Â  Or is the problem somewhere else entirely?Â  (I_t_m sort of afraid the answer may involve shaders_co_ since I really do not understand what those are or how to do anything useful with them. _dd_) )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for any advice!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/Terrain2.jpg.e9be207cba7f5fc410f9224bb8bb7fee.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_20164_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/Terrain2.thumb.jpg.bb094930ef66e79f95f863022af86bf7.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Terrain2.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/Terrain.jpg.8a7882332cc3dcbf3c536bfa05ffca79.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_20165_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/Terrain.thumb.jpg.6b77e47d8c4d19584f59bc365a895178.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Terrain.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-23T06:58:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tJust for testing purposes_co_ I tried this with a 512x512 heightmap and these settings_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_{\n\twidth_dd_ 512_co_\n\theight_dd_ 512_co_\n\tsubdivisions_dd_ 512_co_\n\tminHeight_dd_ -56_co_\n\tmaxHeight_dd_ 39\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI also turned off the minimap and (grasping at straws) set the specularColor to black on the ground and water textures.Â  The scene is basically as minimal as I can possibly make it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNone of that seemed to affect the frame rate.Â  It still sits in the low teens_co_ though it seems to run faster if I pull the camera back away_co_ even though that results in many more polygons in frame.Â  Counterintuitively_co_ the more of my little island is in view (due to increasing altitude) the faster the framerate gets_co_ on up to 40-60fps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe only change I made that did help the frame rate at ground level was deleting the water ground plane_co_ which seems like it pushes the framerateÂ into the high teens / low 20s.Â  But at that point it_t_s hard to tell if I_t_m looking at the same part of the map_co_ so I can_t_t be sure that_t_s apples-to-apples.Â  Weirdly (to me)_co_ increasing the subdivisions in the water plane also helped_co_ allowing me to leave it in but keep the upper-teens framerate.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve also noticed that if I stop moving the camera_co_ after a few seconds the frame rate will shoot up to 60 and I can rotate the camera at that location without loss of performance.Â  But as soon as I move the camera_co_ it dives back into the teens.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis same computer runs the playground demo for height maps at 60fps without breaking a sweat_co_ so I am pretty sure the problem here isÂ me.Â  If I set my parameters to exactly the same values that demo uses (200x200_co_ 250 subdivisions_co_ 0-10 height_co_ updatable false) I still get high-teens framerates.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-23T11:06:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32860-jdavid/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32860_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32860-jdavid/_qt_ rel_eq__qt__qt__gt_@jdavid_lt_/a_gt_ and welcome to the forum. Weekends tend to be quiet so you may get more suggestions later on. Have you read about _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/extensions/dynamic_terrain_qt_ rel_eq__qt_external nofollow_qt__gt_dynamic terrains_lt_/a_gt_ ? They might help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-23T18:42:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the response and suggestion_co_Â @JohnK!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s a very small demo/personal learning project_co_ basically a walking simulator with a very smallÂ island and two buildings where you can walk out of one building_co_ across part of the island_co_ and into the other building_co_ and that_t_s it.Â  MostlyÂ I_t_m hoping to use it to learn how to make anÂ environment look good_dd_ textures_co_ grass_co_ trees_co_ good-looking water_co_ etc.Â  Since it_t_s so small_co_ I could certainly fit it within any reasonable constraints_co_ if I just understood what the constraints were. _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I_t_d like to keep it as simple as possible_co_ and It_t_d be great to understand where I_t_ve gone wrong with the basic terrain mesh.Â  (Since many of the things that happen are quite surprising to me_co_ like increasing the subdivisions of the water plane causing the frame rate to go up_co_ that suggests I_t_ve still got a lot to learn about the basics!)Â  But since I_t_ve more or less hit a dead end on that for now_co_Â I_t_ll work through some of the material on dynamic terrains and see if I_t_m clever enough to make a go of that. _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-24T06:55:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOK_co_ so I fussed with the dynamic terrain extension at some length_co_ and I was able to get it to work.Â  Unfortunately_co_ unless I turn the _qt_terrainSub_qt_ value down so low that you can see the terrain being popped in right in front of you_co_ it performs about the same as or worse than the basic terrain mesh_sm_ FPS in the teens.Â  For a larger project_co_ the dynamic terrain extension is really slick and definitely the way to go.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI created a smaller 512x512 heightmap with significantly less altitude variation_co_ and set that to be 256x256 with 256 subdivisions.Â  That helped quite a bit with the _qt_antialiased Minecraft_qt_ look visible in my earlier screenshots_co_ although the much smaller_co_ much flatter island is certainly missing some of the majestic drama of the original. _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat doesn_t_t perform great_co_ only around 30-40fps_co_ but it_t_s at least usable for now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt would still be greatÂ to hear from anyone who has worked with terrain meshes_co_ especially around how big of a mesh they are rendering (whether dynamic or just a basic static mesh)Â and what kind of performance they are getting.Â  That would really help me calibrate my expectations to determine how much of my performance problem is poor coding and how much is unrealistic expectations. _lt_span_gt__lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ™‚_lt_/span_gt_Â _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"dbawel","Date":"2018-09-24T09:15:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32860-jdavid/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32860_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32860-jdavid/_qt_ rel_eq__qt__qt__gt_@jdavid_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s all in the math. Look at the least common hardware you want to support_co_ and do an evaluation of vertices_co_ materials_co_ and textures. Always use a power 2 texture until we enter full support of WebGL 2.0. I always look at my code as a water pipe and a bathtub... how much water can I push through the pipe and how much water can the bathtub hold?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDB\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-24T11:38:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think that Babylon has in the latest version some small performance problem due to small bug in the latest version of Chrome (if you use Chrome).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made a field editor that runs at 60 FPS_dd_Â _lt_a href_eq__qt_https_dd_//bitbucket.org/JSbabylon/terraineditor_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//bitbucket.org/JSbabylon/terraineditor_lt_/a_gt_Â Try to see what this gives.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can also use an octree in the terrain_co_ but currently Octree is lowering the performance because of the Bug in Chrome.Â which I hope will soon be fixed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is also _lt_em_gt_terrain.optimize (64)_sm__lt_/em_gt_ who can help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can also reproduce your way of doing it in the Playground.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-09-24T11:48:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPlease do a PG so we can understand where_t_s your issue\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[EDIT] please have a look at this example _dd_ _lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/demos/flightSim.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousquie.fr/BJS/demos/flightSim.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe terrain is only 200x200 or 300x300 subdivisions (just can_t_t remember) sliding on a map of 2000x2000 points and it runs quite smoothly in my Chrome here.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"dbawel","Date":"2018-09-24T13:45:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_Â mentions_co_ a PG scene will provide you with many responses and hopefully a solution for your specific issue. However_co_ if you aren_t_t familiar with the Optimization of LOD_co_ then here are the docs_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//doc.babylonjs.com/how_to/in-browser_mesh_simplification_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/how_to/in-browser_mesh_simplification_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDB\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-24T18:45:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the responses_co_ all.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy understanding is that I cannot do a PG because I am using Typescript for my project_co_ is that correct?Â  (I have a background in programming_co_ but both Javascript and 3D are fairly new to me.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_Â I looked at your flight simulator twice_co_ and it consistently runs at 56-60fps on this system (almost always at 60fps).Â  It is very smooth and I would love to get to that point.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are only threeÂ meshes in this scene at present_dd_ the terrain mesh_co_Â the water plane mesh_co_ and (sometimes) a skybox.Â  That_t_s it.Â  So based on what I read about those suggestions_co_ IÂ don_t_t _lt_em_gt_think_lt_/em_gt_ I_t_m at a point where the octree (not enough meshes) or auto-LOD (part of ground &amp_sm_ waterÂ meshes is always nearby_co_ and the geometry of the skybox is already pretty simple) will bail me out.Â  Does that sound right?Â  (FWIW removing the Skybox appears to have no effect on performance.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLikewise_co_ the only texturesÂ are on the Skybox.Â  The ground and sea materials are StandardMaterial with diffuseColor set to a Color3.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I don_t_t think I_t_m flooding the bathtub_co_ yet. _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_Â  Â (My test is being done on a 2016 Macbook Pro with a Radeon 460_co_ but I don_t_t really have the first idea how many polygons that can actuallyÂ push or how to build a scene budget based on that knowledge.Â  Yet. _lt_span_gt__lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ™‚_lt_/span_gt__lt_/span_gt__lt_span_gt_Â _lt_/span_gt_)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI cannot find any documentation of a terrain.optimize() call_co_ but I_t_ll certainly try to find some more information about that.Â  And I_t_ll see if I can somehow get somethingÂ going on PG.Â  It sounds like I could maybe post the heightmap on Github and then access it fromÂ aÂ PG.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ I think I might have a lead.Â  Last night_co_ while messing around with walking around on the terrain with gravity on_co_ I noticed that if the player fell onto the surface of the water (which had checkCollisions set true temporarily just to keep the player from falling out of the world) the FPS dropped to 2-3 and basically stuck there.Â  So I just had a few minutesÂ this afternoon_co_ andÂ I tried turning gravity off and removing checkCollisions from both the terrain and the water plane.Â  And_co_ voila_co_ I can fly around at 50-60fps_co_ no problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis would kind of explain why myÂ frame rate wentÂ up when not moving_sm_Â much of the collision code can probably be skipped at that point.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes this sound like a reasonable explanation?Â  Maybe a terrain-sized mesh is just too large and complicated to collision-check efficiently?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGravity + collisions already had the significant drawback of not being able to move uphill at all_co_ not even 1cm_co_ and I_t_ve seen various other methods discussed on these forums in all the searching I_t_ve done on this issue_co_ so I_t_d been planning to look into those anyway.Â \n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-24T19:22:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229260_qt_ data-ipsquote-contentid_eq__qt_40184_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537814717_qt_ data-ipsquote-userid_eq__qt_32860_qt_ data-ipsquote-username_eq__qt_jdavid_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t36 minutes ago_co_ jdavid said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMy understanding is that I cannot do a PG because I am_lt_span_gt_ï»¿_lt_/span_gt_ using Typescript for my project_co_ is that correct?_lt_span_gt_ï»¿_lt_/span_gt_Â  _lt_span_gt_ï»¿_lt_/span_gt_(\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tNot any moreÂ _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/features/playground_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/features/playground_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-24T19:35:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOctree can help with the collisions in the field. and mesh.optimise () can be found in the API.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I create large terrain with collision_co_ I use Octree + optimize () and it always makes me return one of the PFS to 60.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-24T19:35:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWow_co_ cool!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just have to step back for a moment and say thatÂ Babylon.JS is not only an amazing piece of high-quality open source code_co_ it also seems to be a really well-run project.Â  The playground feature was impressive before. With Typescript support?Â  Even better!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m also veryÂ grateful for how welcoming and helpful the posts here have been!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks to everyone!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-24T19:42:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229270_qt_ data-ipsquote-contentid_eq__qt_40184_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537817704_qt_ data-ipsquote-userid_eq__qt_5292_qt_ data-ipsquote-username_eq__qt_Dad72_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t10 minutes ago_co_ Dad72 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tOctree can help with the collisions in the field. and mesh.optimise () can be found in the API.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tWhen I create large terrain with collision_co_ I use Octree + optimize () and it always makes me return one of the PFS to 60.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAha_co_ I was looking for something specific to terrain.Â  Looking at the reference page for Mesh_co_ I see _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.mesh#optimizeindices_qt_ rel_eq__qt_external nofollow_qt__gt_an optimizeindices method_lt_/a_gt__co_ but that takes a callback_co_ not a number.Â Â Â Is it that_co_ or something else_co_ hiding in a base class maybe?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think I_t_m going to try to load the bigger terrain again tonight_co_ and I will try both octree and optimize in conjunction with that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-24T19:46:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSorry_co_ it was for GroundMesh and not Mesh. But you create ground with GroundMesh logically with Heightmap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.groundmesh#optimize_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/api/classes/babylon.groundmesh#optimize_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-24T19:52:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229275_qt_ data-ipsquote-contentid_eq__qt_40184_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537818418_qt_ data-ipsquote-userid_eq__qt_5292_qt_ data-ipsquote-username_eq__qt_Dad72_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tJust now_co_ Dad72 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tSorry_co_ it was for GroundMesh and not Mesh. But you create ground with GroundMesh logically with Heighmap.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.groundmesh#optimize_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/api/classes/babylon.groundmesh#optimize_lt_/a_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAha_co_ got it_co_ thanks again!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe documentation is a bit sparse on what that actually does_co_ but I can always read the source code and hope my brain doesn_t_t explode. _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Or it may become apparent what it does after I spend a bit more time learning about octree generally._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-24T20:17:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWe really need help from all motivated people out there to improve docs _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_Â Feel free to submit a PR! It is always a nice way to start contributing_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jdavid","Date":"2018-09-25T06:37:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo_co_ I got a bit of time to work on this tonight.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBuilding on the checkCollisions discovery_co_ I went back to the original 2048x2048 terrain heightmap.Â Â Still 50-60fps.Â Â I added a colormap diffuseTexture on it.Â  (No splat map yet.)Â  Still 50-60fps.Â Â I added a textured placeholder building with collisionsÂ (that_t_s all IÂ have so far)_co_ still 50-60fps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt may be an effect of having even a rudimentary texture on it_co_ or else I somehow accidentally fixed the 8-bit heightmap issue_co_ because the _qt_anti-aliased Minecraft_qt_ look is gone as well.Â Â \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I turned collisions and gravity back on and I definitely took a hit_co_ but nothing like it was before.Â  That brings it down to the 30_t_s_co_ but still very usable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHuge progress_co_ you should see my grin!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut at this point_co_ I_t_m a little confused.Â  This is a far more complicated scene than before_co_ but it_t_s running much better.Â  And by and large I_t_ve been commenting things out_co_ so it_t_s not like I_t_ve done a big rewrite that could have fixed anything.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe two unexplained things are_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- The frame rate got a lot better.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- The terrain mesh got a lot smoother.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOdd!Â  Related?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn the optimize() call_co_ here is what I found in the Octree how-to_dd_\u2028\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_By callingÂ groundMesh.optimize(chunkSize)Â where chunkSize defines the number of submeshes you want_co_ the mesh will be optimized for rendering_co_ picking and collisions by creating an internal octree (Be sure to select a correct chunkSize)._qt_\u2028\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt does not indicate what a correct chunkSize is or how to calculate one.Â  In addition to _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5292_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/_qt_ rel_eq__qt__qt__gt_@Dad72_lt_/a_gt__t_s suggestion of 64_co_ I tried 8_co_ 16_co_ and 256.Â  In all four cases_co_ the terrain mesh disappeared.Â  But I_t_m optimistic that if I get it working like he says_co_ I_t_ll have collision and an even betterÂ frame rate at the same time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlas_co_ that_t_s where I ran out of time_co_ so no luck on figuring out how to make a PG from this_co_ nor how to run uphill. Yet.Â _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt__lt_br /_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ if I figure out what _qt_a correct chunksize_qt_ is and get optimize() working_co_ I_t_ll see what I can do in the way of a PR.Â \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-25T16:20:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@_lt_font style_eq__qt_vertical-align_dd_inherit_sm__qt__gt__lt_font style_eq__qt_vertical-align_dd_inherit_sm__qt__gt_Deltakosh_lt_/font_gt__lt_/font_gt__lt_/a_gt__lt_/span_gt__co_ I noticed since the version 3.3_co_ when one moves the camera (free or rotate ...) the FTP moves enormously between 50 and 60 FPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is enough that I move a small millimeter so that the FPS goes from 60 to 51_co_ 52 FPS. IF I do not move the camera_co_ I stay at 60 FPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I move the camera for a long time_co_ the FPS can put down &lt_sm__eq_ 40 (-20 FPS just by moving the camera)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think there must be some worries somewhere. Before 3.3 did not changeÂ anything to the FPS when moving the camera.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-25T16:40:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI may need more info than that to help. Can you do a profile check between 3.2 and 3.3? Can you repro in the PG?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe have added some counter measures to work around the Chrome bug but maybe some bugs can remain.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe are a week away from the release so we need to fix it now or never _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-25T17:05:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5292_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/_qt_ rel_eq__qt__qt__gt_@Dad72_lt_/a_gt_Â can you make sure this is not an issue with too much pickable meshes? When the camera moves_co_ the mouse cursor moves so you may end up having a lot of picking in your scene\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-25T17:15:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIn fact_co_ I think it_t_s because of the GUI label that I create when there are some numbers.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen we have some objects_co_ as well as GUI tags_co_ this is where it starts to degrade many FPSs.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#3YFJ5R%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#3YFJ5R#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry to move the camera_co_ zoom in and out.Â Â If you stop the camera_co_ it goes back to 60 FPS\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-25T17:27:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell I have the same behavior on 3.2 and 3.3. I see no difference.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs the labels are linked to a mesh_co_ the system needs to update the label position when the camera_t_s move because the meshes will be elsewhere on screen\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-09-25T17:45:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think my scene has increased between 3.2 and 3.3 which makes me think that. and I did not use labels yet\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ but the fall of FPS is pretty huge I think_co_ no ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_What is the way to optimize this?_lt_/strong_gt_ Arf_co_ that_t_s not the subject of the post_co_ I thought it was bind_co_ but no.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-25T17:51:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell the engine needs to update and unproject all meshes position _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]